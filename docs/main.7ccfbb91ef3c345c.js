"use strict";(self.webpackChunkrpg_angular_v2=self.webpackChunkrpg_angular_v2||[]).push([[179],{972:()=>{function Ge(n){return"function"==typeof n}function ic(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Tf=ic(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Xa(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class or{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(s){e=s instanceof Tf?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{nk(s)}catch(o){e=e??[],o instanceof Tf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Tf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nk(e);else{if(e instanceof or){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xa(t,e)}remove(e){const{_finalizers:t}=this;t&&Xa(t,e),e instanceof or&&e._removeParent(this)}}or.EMPTY=(()=>{const n=new or;return n.closed=!0,n})();const ek=or.EMPTY;function tk(n){return n instanceof or||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function nk(n){Ge(n)?n():n.unsubscribe()}const Eo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},If={setTimeout(n,e,...t){const{delegate:r}=If;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=If;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rk(n){If.setTimeout(()=>{const{onUnhandledError:e}=Eo;if(!e)throw n;e(n)})}function Py(){}const Iz=Oy("C",void 0,void 0);function Oy(n,e,t){return{kind:n,value:e,error:t}}let Co=null;function Df(n){if(Eo.useDeprecatedSynchronousErrorHandling){const e=!Co;if(e&&(Co={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Co;if(Co=null,t)throw r}}else n()}class Fy extends or{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,tk(e)&&e.add(this)):this.destination=Nz}static create(e,t,r){return new Sf(e,t,r)}next(e){this.isStopped?Vy(function Sz(n){return Oy("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Vy(function Dz(n){return Oy("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vy(Iz,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xz=Function.prototype.bind;function Ly(n,e){return xz.call(n,e)}class Mz{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Af(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Af(r)}else Af(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Af(t)}}}class Sf extends Fy{constructor(e,t,r){let i;if(super(),Ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Eo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ly(e.next,s),error:e.error&&Ly(e.error,s),complete:e.complete&&Ly(e.complete,s)}):i=e}this.destination=new Mz(i)}}function Af(n){Eo.useDeprecatedSynchronousErrorHandling?function Az(n){Eo.useDeprecatedSynchronousErrorHandling&&Co&&(Co.errorThrown=!0,Co.error=n)}(n):rk(n)}function Vy(n,e){const{onStoppedNotification:t}=Eo;t&&If.setTimeout(()=>t(n,e))}const Nz={closed:!0,next:Py,error:function kz(n){throw n},complete:Py},By="function"==typeof Symbol&&Symbol.observable||"@@observable";function bo(n){return n}let rt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Pz(n){return n&&n instanceof Fy||function Rz(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}(n)&&tk(n)}(t)?t:new Sf(t,r,i);return Df(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=sk(r))((i,s)=>{const o=new Sf({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[By](){return this}pipe(...t){return function ik(n){return 0===n.length?bo:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=sk(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function sk(n){var e;return null!==(e=n??Eo.Promise)&&void 0!==e?e:Promise}const Oz=ic(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let kt=(()=>{class n extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ok(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Oz}next(t){Df(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Df(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Df(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ek:(this.currentObservers=null,s.push(t),new or(()=>{this.currentObservers=null,Xa(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new rt;return t.source=this,t}}return n.create=(e,t)=>new ok(e,t),n})();class ok extends kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ek}}function ak(n){return Ge(n?.lift)}function Nt(n){return e=>{if(ak(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(n,e,t,r,i){return new Fz(n,e,t,r,i)}class Fz extends Fy{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Re(n,e){return Nt((t,r)=>{let i=0;t.subscribe(Et(r,s=>{r.next(n.call(e,s,i++))}))})}function uk(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function To(n){return this instanceof To?(this.v=n,this):new To(n)}function Bz(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof To?Promise.resolve(h.value.v).then(u,c):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function u(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Uz(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function dk(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const hk=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function fk(n){return Ge(n?.then)}function pk(n){return Ge(n[By])}function gk(n){return Symbol.asyncIterator&&Ge(n?.[Symbol.asyncIterator])}function mk(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _k=function jz(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yk(n){return Ge(n?.[_k])}function vk(n){return Bz(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield To(t.read());if(i)return yield To(void 0);yield yield To(r)}}finally{t.releaseLock()}})}function wk(n){return Ge(n?.getReader)}function Wr(n){if(n instanceof rt)return n;if(null!=n){if(pk(n))return function Hz(n){return new rt(e=>{const t=n[By]();if(Ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(hk(n))return function Gz(n){return new rt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(fk(n))return function Wz(n){return new rt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rk)})}(n);if(gk(n))return Ek(n);if(yk(n))return function qz(n){return new rt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(wk(n))return function zz(n){return Ek(vk(n))}(n)}throw mk(n)}function Ek(n){return new rt(e=>{(function Kz(n,e){var t,r,i,s;return function Lz(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Uz(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function $i(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function sn(n,e,t=1/0){return Ge(e)?sn((r,i)=>Re((s,o)=>e(r,s,i,o))(Wr(n(r,i))),t):("number"==typeof e&&(t=e),Nt((r,i)=>function Qz(n,e,t,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const h=()=>{d&&!l.length&&!u&&e.complete()},f=g=>u<r?p(g):l.push(g),p=g=>{s&&e.next(g),u++;let m=!1;Wr(t(g,c++)).subscribe(Et(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const v=l.shift();o?$i(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(Et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function Za(n=1/0){return sn(bo,n)}const ji=new rt(n=>n.complete());function $y(n){return n[n.length-1]}function Ck(n){return Ge($y(n))?n.pop():void 0}function sc(n){return function Jz(n){return n&&Ge(n.schedule)}($y(n))?n.pop():void 0}function xf(n,e=0){return Nt((t,r)=>{t.subscribe(Et(r,i=>$i(r,n,()=>r.next(i),e),()=>$i(r,n,()=>r.complete(),e),i=>$i(r,n,()=>r.error(i),e)))})}function Mf(n,e=0){return Nt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function bk(n,e){if(!n)throw new Error("Iterable cannot be null");return new rt(t=>{$i(t,e,()=>{const r=n[Symbol.asyncIterator]();$i(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Rt(n,e){return e?function i4(n,e){if(null!=n){if(pk(n))return function Zz(n,e){return Wr(n).pipe(Mf(e),xf(e))}(n,e);if(hk(n))return function t4(n,e){return new rt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(fk(n))return function e4(n,e){return Wr(n).pipe(Mf(e),xf(e))}(n,e);if(gk(n))return bk(n,e);if(yk(n))return function n4(n,e){return new rt(t=>{let r;return $i(t,e,()=>{r=n[_k](),$i(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(n,e);if(wk(n))return function r4(n,e){return bk(vk(n),e)}(n,e)}throw mk(n)}(n,e):Wr(n)}function el(n){return n<=0?()=>ji:Nt((e,t)=>{let r=0;e.subscribe(Et(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function jy(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(el(1)).subscribe(()=>n())}function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function Hy(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Gy(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const a4=Be({__forward_ref__:Be});function We(n){return n.__forward_ref__=We,n.toString=function(){return Ue(this())},n}function Z(n){return Wy(n)?n():n}function Wy(n){return"function"==typeof n&&n.hasOwnProperty(a4)&&n.__forward_ref__===We}class L extends Error{constructor(e,t){super(function kf(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function ie(n){return"string"==typeof n?n:null==n?"":String(n)}function Nf(n,e){throw new L(-201,!1)}function lr(n,e){null==n&&function ke(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _t(n){return{providers:n.providers||[],imports:n.imports||[]}}function qy(n){return Tk(n,Rf)||Tk(n,Dk)}function Tk(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ik(n){return n&&(n.hasOwnProperty(zy)||n.hasOwnProperty(g4))?n[zy]:null}const Rf=Be({\u0275prov:Be}),zy=Be({\u0275inj:Be}),Dk=Be({ngInjectableDef:Be}),g4=Be({ngInjectorDef:Be});var Q=(()=>((Q=Q||{})[Q.Default=0]="Default",Q[Q.Host=1]="Host",Q[Q.Self=2]="Self",Q[Q.SkipSelf=4]="SkipSelf",Q[Q.Optional=8]="Optional",Q))();let Ky;function fi(n){const e=Ky;return Ky=n,e}function Sk(n,e,t){const r=qy(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Q.Optional?null:void 0!==e?e:void Nf(Ue(n))}function As(n){return{toString:n}.toString()}var qr=(()=>((qr=qr||{})[qr.OnPush=0]="OnPush",qr[qr.Default=1]="Default",qr))(),zr=(()=>{return(n=zr||(zr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",zr;var n})();const Fe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),tl={},Me=[],Pf=Be({\u0275cmp:Be}),Qy=Be({\u0275dir:Be}),Yy=Be({\u0275pipe:Be}),Ak=Be({\u0275mod:Be}),Gi=Be({\u0275fac:Be}),oc=Be({__NG_ELEMENT_ID__:Be});let _4=0;function Wt(n){return As(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===qr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Me,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||zr.Emulated,id:"c"+_4++,styles:n.styles||Me,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return i.inputs=kk(n.inputs,r),i.outputs=kk(n.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(xk).filter(Mk):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Fn).filter(Mk):null,i})}function xk(n){return $e(n)||On(n)}function Mk(n){return null!==n}const v4={};function Ct(n){return As(()=>{const e={type:n.type,bootstrap:n.bootstrap||Me,declarations:n.declarations||Me,imports:n.imports||Me,exports:n.exports||Me,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(v4[n.id]=n.type),e})}function kk(n,e){if(null==n)return tl;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const ee=Wt;function Pt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function $e(n){return n[Pf]||null}function On(n){return n[Qy]||null}function Fn(n){return n[Yy]||null}function ur(n,e){const t=n[Ak]||null;if(!t&&!0===e)throw new Error(`Type ${Ue(n)} does not have '\u0275mod' property.`);return t}function Yn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Qr(n){return Array.isArray(n)&&!0===n[1]}function Zy(n){return 0!=(8&n.flags)}function Vf(n){return 2==(2&n.flags)}function Bf(n){return 1==(1&n.flags)}function Yr(n){return null!==n.template}function T4(n){return 0!=(256&n[2])}function xo(n,e){return n.hasOwnProperty(Gi)?n[Gi]:null}class S4{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ar(){return Pk}function Pk(n){return n.type.prototype.ngOnChanges&&(n.setInput=x4),A4}function A4(){const n=Fk(this),e=n?.current;if(e){const t=n.previous;if(t===tl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function x4(n,e,t,r){const i=Fk(n)||function M4(n,e){return n[Ok]=e}(n,{previous:tl,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new S4(l&&l.currentValue,e,o===tl),n[r]=e}Ar.ngInherit=!0;const Ok="__ngSimpleChanges__";function Fk(n){return n[Ok]||null}let iv;function sv(){return void 0!==iv?iv:typeof document<"u"?document:void 0}function dt(n){return!!n.listen}const Lk={createRenderer:(n,e)=>sv()};function bt(n){for(;Array.isArray(n);)n=n[0];return n}function Uf(n,e){return bt(e[n])}function Mr(n,e){return bt(e[n.index])}function ov(n,e){return n.data[e]}function ol(n,e){return n[e]}function dr(n,e){const t=e[n];return Yn(t)?t:t[0]}function av(n){return 64==(64&n[2])}function xs(n,e){return null==e?null:n[e]}function Bk(n){n[18]=0}function lv(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const ne={lFrame:Kk(null),bindingsEnabled:!0};function $k(){return ne.bindingsEnabled}function S(){return ne.lFrame.lView}function Ce(){return ne.lFrame.tView}function $f(n){return ne.lFrame.contextLView=n,n[8]}function jf(n){return ne.lFrame.contextLView=null,n}function Ot(){let n=jk();for(;null!==n&&64===n.type;)n=n.parent;return n}function jk(){return ne.lFrame.currentTNode}function pi(n,e){const t=ne.lFrame;t.currentTNode=n,t.isParent=e}function uv(){return ne.lFrame.isParent}function cv(){ne.lFrame.isParent=!1}function Ln(){const n=ne.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function al(){return ne.lFrame.bindingIndex++}function qi(n){const e=ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function z4(n,e){const t=ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,dv(e)}function dv(n){ne.lFrame.currentDirectiveIndex=n}function hv(n){const e=ne.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function fv(n){ne.lFrame.currentQueryIndex=n}function Q4(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function qk(n,e,t){if(t&Q.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Q.Host||(i=Q4(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ne.lFrame=zk();return r.currentTNode=e,r.lView=n,!0}function Gf(n){const e=zk(),t=n[1];ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zk(){const n=ne.lFrame,e=null===n?null:n.child;return null===e?Kk(n):e}function Kk(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Qk(){const n=ne.lFrame;return ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Yk=Qk;function Wf(){const n=Qk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vn(){return ne.lFrame.selectedIndex}function Ms(n){ne.lFrame.selectedIndex=n}function ht(){const n=ne.lFrame;return ov(n.tView,n.selectedIndex)}function qf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=c&&(n.destroyHooks||(n.destroyHooks=[])).push(t,c)}}function zf(n,e,t){Jk(n,e,3,t)}function Kf(n,e,t,r){(3&n[2])===t&&Jk(n,e,t,r)}function pv(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Jk(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(iK(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function iK(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class dc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Qf(n,e,t){const r=dt(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];mv(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Xk(n){return 3===n||4===n||6===n}function mv(n){return 64===n.charCodeAt(0)}function Yf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Zk(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Zk(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function eN(n){return-1!==n}function ll(n){return 32767&n}function ul(n,e){let t=function uK(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let _v=!0;function Jf(n){const e=_v;return _v=n,e}let cK=0;const gi={};function fc(n,e){const t=vv(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,yv(r.data,n),yv(e,null),yv(r.blueprint,null));const i=Xf(n,e),s=n.injectorIndex;if(eN(i)){const o=ll(i),a=ul(i,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function yv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Xf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=uN(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Zf(n,e,t){!function dK(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(oc)&&(r=t[oc]),null==r&&(r=t[oc]=cK++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function rN(n,e,t){if(t&Q.Optional)return n;Nf()}function iN(n,e,t,r){if(t&Q.Optional&&void 0===r&&(r=null),0==(t&(Q.Self|Q.Host))){const i=n[9],s=fi(void 0);try{return i?i.get(e,r,t&Q.Optional):Sk(e,r,t&Q.Optional)}finally{fi(s)}}return rN(r,0,t)}function sN(n,e,t,r=Q.Default,i){if(null!==n){if(1024&e[2]){const o=function mK(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=oN(s,o,t,r|Q.Self,gi);if(a!==gi)return a;let l=s.parent;if(!l){const u=o[21];if(u){const c=u.get(t,gi,r);if(c!==gi)return c}l=uN(o),o=o[15]}s=l}return i}(n,e,t,r,gi);if(o!==gi)return o}const s=oN(n,e,t,r,gi);if(s!==gi)return s}return iN(e,t,r,i)}function oN(n,e,t,r,i){const s=function pK(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(oc)?n[oc]:void 0;return"number"==typeof e?e>=0?255&e:gK:e}(t);if("function"==typeof s){if(!qk(e,n,r))return r&Q.Host?rN(i,0,r):iN(e,t,r,i);try{const o=s(r);if(null!=o||r&Q.Optional)return o;Nf()}finally{Yk()}}else if("number"==typeof s){let o=null,a=vv(n,e),l=-1,u=r&Q.Host?e[16][6]:null;for((-1===a||r&Q.SkipSelf)&&(l=-1===a?Xf(n,e):e[a+8],-1!==l&&lN(r,!1)?(o=e[1],a=ll(l),e=ul(l,e)):a=-1);-1!==a;){const c=e[1];if(aN(s,a,c.data)){const d=fK(a,e,t,o,r,u);if(d!==gi)return d}l=e[a+8],-1!==l&&lN(r,e[1].data[a+8]===u)&&aN(s,a,e)?(o=c,a=ll(l),e=ul(l,e)):a=-1}}return i}function fK(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],c=function ep(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,c=s>>20,h=i?a+c:n.directiveEnd;for(let f=r?a:a+c;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=o[l];if(f&&Yr(f)&&f.type===t)return l}return null}(a,o,t,null==r?Vf(a)&&_v:r!=o&&0!=(3&a.type),i&Q.Host&&s===a);return null!==c?pc(e,o,c,a):gi}function pc(n,e,t,r){let i=n[t];const s=e.data;if(function sK(n){return n instanceof dc}(i)){const o=i;o.resolving&&function l4(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new L(-200,`Circular dependency in DI detected for ${n}${t}`)}(function xe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ie(n)}(s[t]));const a=Jf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?fi(o.injectImpl):null;qk(n,r,Q.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function rK(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Pk(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&fi(l),Jf(a),o.resolving=!1,Yk()}}return i}function aN(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function lN(n,e){return!(n&Q.Self||n&Q.Host&&e)}class cl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sN(this._tNode,this._lView,e,r,t)}}function gK(){return new cl(Ot(),S())}function bn(n){return As(()=>{const e=n.prototype.constructor,t=e[Gi]||wv(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Gi]||wv(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function wv(n){return Wy(n)?()=>{const e=wv(Z(n));return e&&e()}:xo(n)}function uN(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function gc(n){return function hK(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Xk(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Ot(),n)}const hl="__parameters__";function pl(n,e,t){return As(()=>{const r=function Ev(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(hl)?l[hl]:Object.defineProperty(l,hl,{value:[]})[hl];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class K{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const yK=new K("AnalyzeForEntryComponents");function zi(n,e){n.forEach(t=>Array.isArray(t)?zi(t,e):e(t))}function dN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function tp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function fr(n,e,t){let r=gl(n,e);return r>=0?n[1|r]=t:(r=~r,function EK(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function bv(n,e){const t=gl(n,e);if(t>=0)return n[1|t]}function gl(n,e){return function pN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const vc={},Iv="__NG_DI_FLAG__",rp="ngTempTokenPath",xK=/\n/gm,gN="__source";let wc;function ip(n){const e=wc;return wc=n,e}function kK(n,e=Q.Default){if(void 0===wc)throw new L(-203,!1);return null===wc?Sk(n,void 0,e):wc.get(n,e&Q.Optional?null:void 0,e)}function k(n,e=Q.Default){return(function m4(){return Ky}()||kK)(Z(n),e)}function Dv(n){const e=[];for(let t=0;t<n.length;t++){const r=Z(n[t]);if(Array.isArray(r)){if(0===r.length)throw new L(900,!1);let i,s=Q.Default;for(let o=0;o<r.length;o++){const a=r[o],l=RK(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function Ec(n,e){return n[Iv]=e,n.prototype[Iv]=e,n}function RK(n){return n[Iv]}const sp=Ec(pl("Inject",n=>({token:n})),-1),st=Ec(pl("Optional"),8),Cc=Ec(pl("SkipSelf"),4);let lp,up;function _l(n){return function Sv(){if(void 0===lp&&(lp=null,Fe.trustedTypes))try{lp=Fe.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lp}()?.createHTML(n)||n}function TN(n){return function Av(){if(void 0===up&&(up=null,Fe.trustedTypes))try{up=Fe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return up}()?.createHTML(n)||n}class Mo{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class zK extends Mo{getTypeName(){return"HTML"}}class KK extends Mo{getTypeName(){return"Style"}}class QK extends Mo{getTypeName(){return"Script"}}class YK extends Mo{getTypeName(){return"URL"}}class JK extends Mo{getTypeName(){return"ResourceURL"}}function pr(n){return n instanceof Mo?n.changingThisBreaksApplicationSecurity:n}function mi(n,e){const t=SN(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function SN(n){return n instanceof Mo&&n.getTypeName()||null}class r6{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(_l(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class i6{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=_l(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=_l(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const o6=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,a6=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ic(n){return(n=String(n)).match(o6)||n.match(a6)?n:"unsafe:"+n}function xN(n){return(n=String(n)).split(",").map(e=>Ic(e.trim())).join(", ")}function _i(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Dc(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const MN=_i("area,br,col,hr,img,wbr"),kN=_i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),NN=_i("rp,rt"),xv=Dc(MN,Dc(kN,_i("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dc(NN,_i("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dc(NN,kN)),Mv=_i("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kv=_i("srcset"),RN=Dc(Mv,kv,_i("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_i("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),l6=_i("script,style,template");class u6{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!xv.hasOwnProperty(t))return this.sanitizedSomething=!0,!l6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!RN.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Mv[a]&&(l=Ic(l)),kv[a]&&(l=xN(l)),this.buf.push(" ",o,'="',PN(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();xv.hasOwnProperty(t)&&!MN.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(PN(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const c6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d6=/([^\#-~ |!])/g;function PN(n){return n.replace(/&/g,"&amp;").replace(c6,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(d6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cp;function ON(n,e){let t=null;try{cp=cp||function AN(n){const e=new i6(n);return function s6(){try{return!!(new window.DOMParser).parseFromString(_l(""),"text/html")}catch{return!1}}()?new r6(e):e}(n);let r=e?String(e):"";t=cp.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=cp.getInertBodyElement(r)}while(r!==s);return _l((new u6).sanitizeChildren(Nv(t)||t))}finally{if(t){const r=Nv(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Nv(n){return"content"in n&&function h6(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var je=(()=>((je=je||{})[je.NONE=0]="NONE",je[je.HTML=1]="HTML",je[je.STYLE=2]="STYLE",je[je.SCRIPT=3]="SCRIPT",je[je.URL=4]="URL",je[je.RESOURCE_URL=5]="RESOURCE_URL",je))();function Rv(n){const e=function Sc(){const n=S();return n&&n[12]}();return e?TN(e.sanitize(je.HTML,n)||""):mi(n,"HTML")?TN(pr(n)):ON(sv(),ie(n))}function Fv(n){return n.ngOriginalError}class yl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Fv(e);for(;t&&Fv(t);)t=Fv(t);return t||null}}const Lv=new Map;let S6=0;const Bv="__ngContext__";function Tn(n,e){Yn(e)?(n[Bv]=e[20],function x6(n){Lv.set(n[20],n)}(e)):n[Bv]=e}function Ac(n){const e=n[Bv];return"number"==typeof e?function VN(n){return Lv.get(n)||null}(e):e||null}function Uv(n){const e=Ac(n);return e?Yn(e)?e:e.lView:null}const V6=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Fe))();function Ki(n){return n instanceof Function?n():n}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();function jv(n,e){return undefined(n,e)}function xc(n){const e=n[3];return Qr(e)?e[3]:e}function Hv(n){return zN(n[13])}function Gv(n){return zN(n[4])}function zN(n){for(;null!==n&&!Qr(n);)n=n[4];return n}function wl(n,e,t,r,i){if(null!=r){let s,o=!1;Qr(r)?s=r:Yn(r)&&(o=!0,r=r[0]);const a=bt(r);0===n&&null!==t?null==i?ZN(e,t,a):ko(e,t,a,i||null,!0):1===n&&null!==t?ko(e,t,a,i||null,!0):2===n?function a1(n,e,t){const r=dp(n,e);r&&function Z6(n,e,t,r){dt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function n5(n,e,t,r,i){const s=t[7];s!==bt(t)&&wl(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];Mc(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function qv(n,e,t){if(dt(n))return n.createElement(e,t);{const r=null!==t?function P4(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function QN(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,lv(i,-1)),t.splice(r,1)}function zv(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&QN(i,r),e>0&&(n[t-1][4]=r[4]);const s=tp(n,10+e);!function W6(n,e){Mc(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function YN(n,e){if(!(128&e[2])){const t=e[11];dt(t)&&t.destroyNode&&Mc(n,e,t,3,null,null),function K6(n){let e=n[13];if(!e)return Kv(n[1],n);for(;e;){let t=null;if(Yn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Yn(e)&&Kv(e[1],e),e=e[3];null===e&&(e=n),Yn(e)&&Kv(e[1],e),t=e&&e[4]}e=t}}(e)}}function Kv(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function X6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof dc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function J6(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):bt(e[o]),l=r[i=t[s+2]],u=t[s+3];"boolean"==typeof u?a.removeEventListener(t[s],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&dt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Qr(e[3])){t!==e[3]&&QN(t,e);const r=e[19];null!==r&&r.detachView(n)}!function M6(n){Lv.delete(n[20])}(e)}}function JN(n,e,t){return function XN(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===zr.None||i===zr.Emulated)return null}return Mr(r,t)}(n,e.parent,t)}function ko(n,e,t,r,i){dt(n)?n.insertBefore(e,t,r,i):(t1(e)?e.content:e).insertBefore(t,r,i)}function ZN(n,e,t){dt(n)?n.appendChild(e,t):(t1(e)?e.content:e).appendChild(t)}function e1(n,e,t,r,i){null!==r?ko(n,e,t,r,i):ZN(n,e,t)}function t1(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}function dp(n,e){return dt(n)?n.parentNode(e):e.parentNode}let i1=function r1(n,e,t){return 40&n.type?Mr(n,t):null};function hp(n,e,t,r){const i=JN(n,r,e),s=e[11],a=function n1(n,e,t){return i1(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)e1(s,i,t[l],a,!1);else e1(s,i,t,a,!1)}function fp(n,e){if(null!==e){const t=e.type;if(3&t)return Mr(e,n);if(4&t)return Yv(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return fp(n,r);{const i=n[e.index];return Qr(i)?Yv(-1,i):bt(i)}}if(32&t)return jv(e,n)()||bt(n[e.index]);{const r=o1(n,e);return null!==r?Array.isArray(r)?r[0]:fp(xc(n[16]),r):fp(n,e.next)}}return null}function o1(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Yv(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return fp(r,i)}return e[7]}function Jv(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Tn(bt(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Jv(n,e,t.child,r,i,s,!1),wl(e,n,i,a,s);else if(32&l){const u=jv(t,r);let c;for(;c=u();)wl(e,n,i,c,s);wl(e,n,i,a,s)}else 16&l?l1(n,e,r,t,i,s):wl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Mc(n,e,t,r,i,s){Jv(t,r,n.firstChild,e,i,s,!1)}function l1(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)wl(e,n,i,l[u],s);else Jv(n,e,l,o[3],i,s,!0)}function u1(n,e,t){dt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Xv(n,e,t){dt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function c1(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const d1="ng-template";function i5(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==c1(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function h1(n){return 4===n.type&&n.value!==d1}function s5(n,e,t){return e===(4!==n.type||t?n.value:d1)}function o5(n,e,t){let r=4;const i=n.attrs||[],s=function u5(n){for(let e=0;e<n.length;e++)if(Xk(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!s5(n,l,t)||""===l&&1===e.length){if(Jr(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!i5(n.attrs,u,t)){if(Jr(r))return!1;o=!0}continue}const d=a5(8&r?"class":l,i,h1(n),t);if(-1===d){if(Jr(r))return!1;o=!0;continue}if(""!==u){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==c1(f,u,0)||2&r&&u!==h){if(Jr(r))return!1;o=!0}}}}else{if(!o&&!Jr(r)&&!Jr(l))return!1;if(o&&Jr(l))continue;o=!1,r=l|1&r}}return Jr(r)||o}function Jr(n){return 0==(1&n)}function a5(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function c5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function f1(n,e,t=!1){for(let r=0;r<e.length;r++)if(o5(n,e[r],t))return!0;return!1}function p1(n,e){return n?":not("+e.trim()+")":e}function h5(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Jr(o)&&(e+=p1(s,i),i=""),r=o,s=s||!Jr(r);t++}return""!==i&&(e+=p1(s,i)),e}const se={};function q(n){g1(Ce(),S(),Vn()+n,!1)}function g1(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&zf(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Kf(e,s,0,t)}Ms(t)}const v1=new K("ENVIRONMENT_INITIALIZER"),w1=new K("INJECTOR_DEF_TYPES");function w5(...n){return{\u0275providers:E1(0,n)}}function E1(n,...e){const t=[],r=new Set;let i;return zi(e,s=>{const o=s;Zv(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&C1(i,t),t}function C1(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];zi(i,s=>{e.push(s)})}}function Zv(n,e,t,r){if(!(n=Z(n)))return!1;let i=null,s=Ik(n);const o=!s&&$e(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Ik(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)Zv(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{zi(s.imports,c=>{Zv(c,e,t,r)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&C1(u,e)}if(!a){const u=xo(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:Me},{provide:w1,useValue:i,multi:!0},{provide:v1,useValue:()=>k(i),multi:!0})}const l=s.providers;null==l||a||zi(l,c=>{e.push(c)})}}return i!==n&&void 0!==n.providers}const E5=Be({provide:String,useValue:Be});function ew(n){return null!==n&&"object"==typeof n&&E5 in n}function No(n){return"function"==typeof n}const tw=new K("INJECTOR",-1);class I1{get(e,t=vc){if(t===vc){const r=new Error(`NullInjectorError: No provider for ${Ue(e)}!`);throw r.name="NullInjectorError",r}return t}}const nw=new K("Set Injector scope."),pp={},b5={};let rw;function iw(){return void 0===rw&&(rw=new I1),rw}class Ro{}class D1 extends Ro{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ow(e,o=>this.processProvider(o)),this.records.set(tw,El(void 0,this)),i.has("environment")&&this.records.set(Ro,El(void 0,this));const s=this.records.get(nw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(w1.multi,Me,Q.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,t=vc,r=Q.Default){this.assertNotDestroyed();const i=ip(this),s=fi(void 0);try{if(!(r&Q.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function A5(n){return"function"==typeof n||"object"==typeof n&&n instanceof K}(e)&&qy(e);a=l&&this.injectableDefInScope(l)?El(sw(e),pp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Q.Self?iw():this.parent).get(e,t=r&Q.Optional&&t===vc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[rp]=o[rp]||[]).unshift(Ue(e)),i)throw o;return function PK(n,e,t,r){const i=n[rp];throw e[gN]&&i.unshift(e[gN]),n.message=function OK(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ue(e);if(Array.isArray(e))i=e.map(Ue).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ue(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xK,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rp]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{fi(s),ip(i)}}resolveInjectorInitializers(){const e=ip(this),t=fi(void 0);try{const r=this.get(v1.multi,Me,Q.Self);for(const i of r)i()}finally{ip(e),fi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ue(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){let t=No(e=Z(e))?e:Z(e&&e.provide);const r=function I5(n){return ew(n)?El(void 0,n.useValue):El(S1(n),pp)}(e);if(No(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=El(void 0,pp,!0),i.factory=()=>Dv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===pp&&(t.value=b5,t.value=t.factory()),"object"==typeof t.value&&t.value&&function S5(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Z(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function sw(n){const e=qy(n),t=null!==e?e.factory:xo(n);if(null!==t)return t;if(n instanceof K)throw new L(204,!1);if(n instanceof Function)return function T5(n){const e=n.length;if(e>0)throw function yc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new L(204,!1);const t=function f4(n){const e=n&&(n[Rf]||n[Dk]);if(e){const t=function p4(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new L(204,!1)}function S1(n,e,t){let r;if(No(n)){const i=Z(n);return xo(i)||sw(i)}if(ew(n))r=()=>Z(n.useValue);else if(function T1(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Dv(n.deps||[]));else if(function b1(n){return!(!n||!n.useExisting)}(n))r=()=>k(Z(n.useExisting));else{const i=Z(n&&(n.useClass||n.provide));if(!function D5(n){return!!n.deps}(n))return xo(i)||sw(i);r=()=>new i(...Dv(n.deps))}return r}function El(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function x5(n){return!!n.\u0275providers}function ow(n,e){for(const t of n)Array.isArray(t)?ow(t,e):x5(t)?ow(t.\u0275providers,e):e(t)}function A1(n,e=null,t=null,r){const i=x1(n,e,t,r);return i.resolveInjectorInitializers(),i}function x1(n,e=null,t=null,r,i=new Set){const s=[t||Me,w5(n)];return r=r||("object"==typeof n?void 0:Ue(n)),new D1(s,e||iw(),r||null,i)}let Lt=(()=>{class n{static create(t,r){if(Array.isArray(t))return A1({name:""},r,t,"");{const i=t.name??"";return A1({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=vc,n.NULL=new I1,n.\u0275prov=W({token:n,providedIn:"any",factory:()=>k(tw)}),n.__NG_ELEMENT_ID__=-1,n})();function b(n,e=Q.Default){const t=S();return null===t?k(n,e):sN(Ot(),t,Z(n),e)}function dw(){throw new Error("invalid")}function mp(n,e){return n<<17|e<<2}function Xr(n){return n>>17&32767}function gw(n){return 2|n}function Qi(n){return(131068&n)>>2}function mw(n,e){return-131069&n|e<<2}function _w(n){return 1|n}function Q1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];fv(i),o.contentQueries(2,e[s],s)}}}function kc(n,e,t,r,i,s,o,a,l,u,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||n&&1024&n[2])&&(d[2]|=1024),Bk(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=u||n&&n[9]||null,d[6]=s,d[20]=function A6(){return S6++}(),d[21]=c,d[16]=2==e.type?n[16]:d,d}function bl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Dw(n,e,t,r,i){const s=jk(),o=uv(),l=n.data[e]=function a8(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function q4(){return ne.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function cc(){const n=ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return pi(s,!0),s}function Tl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Nc(n,e,t){Gf(e);try{const r=n.viewQuery;null!==r&&Ow(1,r,t);const i=n.template;null!==i&&Y1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Q1(n,e),n.staticViewQueries&&Ow(2,n.viewQuery,t);const s=n.components;null!==s&&function i8(n,e){for(let t=0;t<e.length;t++)I8(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Wf()}}function Il(n,e,t,r){const i=e[2];if(128!=(128&i)){Gf(e);try{Bk(e),function Hk(n){return ne.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Y1(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&zf(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Kf(e,u,0,null),pv(e,0)}if(function b8(n){for(let e=Hv(n);null!==e;e=Gv(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(512&i[2])&&lv(s,1),i[2]|=512}}}(e),function C8(n){for(let e=Hv(n);null!==e;e=Gv(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];av(r)&&Il(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&Q1(n,e),o){const u=n.contentCheckHooks;null!==u&&zf(e,u)}else{const u=n.contentHooks;null!==u&&Kf(e,u,1),pv(e,1)}!function n8(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ms(~i);else{const s=i,o=t[++r],a=t[++r];z4(o,s),a(2,e[s])}}}finally{Ms(-1)}}(n,e);const a=n.components;null!==a&&function r8(n,e){for(let t=0;t<e.length;t++)T8(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Ow(2,l,r),o){const u=n.viewCheckHooks;null!==u&&zf(e,u)}else{const u=n.viewHooks;null!==u&&Kf(e,u,2),pv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,lv(e[3],-1))}finally{Wf()}}}function s8(n,e,t,r){const i=e[10],o=function Vk(n){return 4==(4&n[2])}(e);try{!o&&i.begin&&i.begin(),o&&Nc(n,e,r),Il(n,e,t,r)}finally{!o&&i.end&&i.end()}}function Y1(n,e,t,r,i){const s=Vn(),o=2&r;try{Ms(-1),o&&e.length>22&&g1(n,e,22,!1),t(r,i)}finally{Ms(s)}}function J1(n,e,t){if(Zy(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Sw(n,e,t){!$k()||(function p8(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||fc(t,e),Tn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],u=Yr(l);u&&v8(e,t,l);const c=pc(e,n,a,t);Tn(c,e),null!==o&&w8(0,a-i,c,l,0,o),u&&(dr(t.index,e)[8]=c)}}(n,e,t,Mr(t,e)),128==(128&t.flags)&&function g8(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function K4(){return ne.lFrame.currentDirectiveIndex}();try{Ms(s);for(let a=r;a<i;a++){const l=n.data[a],u=e[a];dv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&iR(l,u)}}finally{Ms(-1),dv(o)}}(n,e,t))}function Aw(n,e,t=Mr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function X1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=vp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function vp(n,e,t,r,i,s,o,a,l,u){const c=22+r,d=c+i,h=function o8(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:se);return t}(c,d),f="function"==typeof u?u():u;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function nR(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function mr(n,e,t,r,i,s,o,a){const l=Mr(e,t);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(pR(n,t,c,r,i),Vf(e)&&function c8(n,e){const t=dr(e,n);16&t[2]||(t[2]|=32)}(t,e.index)):3&e.type&&(r=function u8(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,dt(s)?s.setProperty(l,r,i):mv(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function xw(n,e,t,r){let i=!1;if($k()){const s=function m8(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];f1(t,o.selectors,!1)&&(i||(i=[]),Zf(fc(t,e),n,o.type),Yr(o)?(sR(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,oR(t,n.data.length,s.length);for(let c=0;c<s.length;c++){const d=s[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=Tl(n,e,s.length,null);for(let c=0;c<s.length;c++){const d=s[c];t.mergedAttrs=Yf(t.mergedAttrs,d.hostAttrs),aR(n,t,e,u,d),y8(u,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),u++}!function l8(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],d=c.inputs,h=null===s||h1(e)?null:E8(d,s);o.push(h),a=nR(d,u,a),l=nR(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function _8(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new L(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Yf(t.mergedAttrs,t.attrs),i}function rR(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function f8(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function iR(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function sR(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function y8(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yr(e)&&(t[""]=n)}}function oR(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aR(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=xo(i.type)),o=new dc(s,Yr(i),b);n.blueprint[r]=o,t[r]=o,rR(n,e,0,r,Tl(n,t,i.hostVars,se),i)}function v8(n,e,t){const r=Mr(e,n),i=X1(t),s=n[10],o=wp(n,kc(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}function yi(n,e,t,r,i,s){const o=Mr(n,e);!function Mw(n,e,t,r,i,s,o){if(null==s)dt(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?ie(s):o(s,r||"",i);dt(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function w8(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],d=o[l++];null!==a?r.setInput(t,d,u,c):t[c]=d}}}function E8(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function lR(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function T8(n,e){const t=dr(e,n);if(av(t)){const r=t[1];48&t[2]?Il(r,t,r.template,t[8]):t[5]>0&&kw(t)}}function kw(n){for(let r=Hv(n);null!==r;r=Gv(r))for(let i=10;i<r.length;i++){const s=r[i];if(512&s[2]){const o=s[1];Il(o,s,o.template,s[8])}else s[5]>0&&kw(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=dr(t[r],n);av(i)&&i[5]>0&&kw(i)}}function I8(n,e){const t=dr(e,n),r=t[1];(function D8(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Nc(r,t,t[8])}function wp(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Nw(n){for(;n;){n[2]|=32;const e=xc(n);if(T4(n)&&!e)return n;n=e}return null}function uR(n){!function Rw(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Uv(t);if(null!==r){const i=r[1];s8(i,r,i.template,t)}}}(n[8])}function Ow(n,e,t){fv(0),e(n,t)}const A8=(()=>Promise.resolve(null))();function cR(n){return n[7]||(n[7]=[])}function dR(n){return n.cleanup||(n.cleanup=[])}function fR(n,e){const t=n[9],r=t?t.get(yl,null):null;r&&r.handleError(e)}function pR(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],u=n.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Yi(n,e,t){const r=Uf(e,n);!function KN(n,e,t){dt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Ep(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Gy(i,a):2==s&&(r=Gy(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B8(){const n=Ot();qf(S()[1],n)}function Pe(n){let e=function DR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Yr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Lw(n.inputs),o.declaredInputs=Lw(n.declaredInputs),o.outputs=Lw(n.outputs);const a=i.hostBindings;a&&H8(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&$8(n,l),u&&j8(n,u),Hy(n.inputs,i.inputs),Hy(n.declaredInputs,i.declaredInputs),Hy(n.outputs,i.outputs),Yr(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Pe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function U8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yf(i.hostAttrs,t=Yf(t,i.hostAttrs))}}(r)}function Lw(n){return n===tl?{}:n===Me?[]:n}function $8(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function j8(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function H8(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let Cp=null;function Po(){if(!Cp){const n=Fe.Symbol;if(n&&n.iterator)Cp=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Cp=r)}}}return Cp}function Rc(n){return!!Vw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Po()in n)}function Vw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function vi(n,e,t){return n[e]=t}function In(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Oo(n,e,t,r){const i=In(n,e,t);return In(n,e+1,r)||i}function Jn(n,e,t,r){const i=S();return In(i,al(),e)&&(Ce(),yi(ht(),i,n,e,t,r)),Jn}function Al(n,e,t,r,i,s){const a=Oo(n,function Wi(){return ne.lFrame.bindingIndex}(),t,i);return qi(2),a?e+ie(t)+r+ie(i)+s:se}function Vt(n,e,t,r,i,s,o,a){const l=S(),u=Ce(),c=n+22,d=u.firstCreatePass?function Y8(n,e,t,r,i,s,o,a,l){const u=e.consts,c=bl(e,n,4,o||null,xs(u,a));xw(e,t,c,xs(u,l)),qf(e,c);const d=c.tViews=vp(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,t,r,i,s,o):u.data[c];pi(d,!1);const h=l[11].createComment("");hp(u,l,h,d),Tn(h,l),wp(l,l[c]=lR(h,l,h,d)),Bf(d)&&Sw(u,l,d),null!=o&&Aw(l,d,a)}function _e(n,e,t){const r=S();return In(r,al(),e)&&mr(Ce(),ht(),r,n,e,r[11],t,!1),_e}function Bw(n,e,t,r,i){const o=i?"class":"style";pR(n,t,e.inputs[o],o,r)}function T(n,e,t,r){const i=S(),s=Ce(),o=22+n,a=i[11],l=i[o]=qv(a,e,function nK(){return ne.lFrame.currentNamespace}()),u=s.firstCreatePass?function Z8(n,e,t,r,i,s,o){const a=e.consts,u=bl(e,n,2,i,xs(a,s));return xw(e,t,u,xs(a,o)),null!==u.attrs&&Ep(u,u.attrs,!1),null!==u.mergedAttrs&&Ep(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,t,r):s.data[o];pi(u,!0);const c=u.mergedAttrs;null!==c&&Qf(a,l,c);const d=u.classes;null!==d&&Xv(a,l,d);const h=u.styles;return null!==h&&u1(a,l,h),64!=(64&u.flags)&&hp(s,i,l,u),0===function U4(){return ne.lFrame.elementDepthCount}()&&Tn(l,i),function $4(){ne.lFrame.elementDepthCount++}(),Bf(u)&&(Sw(s,i,u),J1(s,u,i)),null!==r&&Aw(i,u),T}function I(){let n=Ot();uv()?cv():(n=n.parent,pi(n,!1));const e=n;!function j4(){ne.lFrame.elementDepthCount--}();const t=Ce();return t.firstCreatePass&&(qf(t,n),Zy(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function aK(n){return 0!=(16&n.flags)}(e)&&Bw(t,e,S(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lK(n){return 0!=(32&n.flags)}(e)&&Bw(t,e,S(),e.stylesWithoutHost,!1),I}function Oe(n,e,t,r){return T(n,e,t,r),I(),Oe}function Oc(n,e,t){const r=S(),i=Ce(),s=n+22,o=i.firstCreatePass?function e7(n,e,t,r,i){const s=e.consts,o=xs(s,r),a=bl(e,n,8,"ng-container",o);return null!==o&&Ep(a,o,!0),xw(e,t,a,xs(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];pi(o,!0);const a=r[s]=r[11].createComment("");return hp(i,r,a,o),Tn(a,r),Bf(o)&&(Sw(i,r,o),J1(i,o,r)),null!=t&&Aw(r,o),Oc}function Fc(){let n=Ot();const e=Ce();return uv()?cv():(n=n.parent,pi(n,!1)),e.firstCreatePass&&(qf(e,n),Zy(n)&&e.queries.elementEnd(n)),Fc}function Tp(){return S()}function Lc(n){return!!n&&"function"==typeof n.then}const Uw=function LR(n){return!!n&&"function"==typeof n.subscribe};function be(n,e,t,r){const i=S(),s=Ce(),o=Ot();return function BR(n,e,t,r,i,s,o,a){const l=Bf(r),c=n.firstCreatePass&&dR(n),d=e[8],h=cR(e);let f=!0;if(3&r.type||a){const m=Mr(r,e),v=a?a(m):m,C=h.length,y=a?D=>a(bt(D[r.index])):r.index;if(dt(t)){let D=null;if(!a&&l&&(D=function t7(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=s,D.__ngLastListenerFn__=s,f=!1;else{s=$w(r,e,d,s,!1);const F=t.listen(v,i,s);h.push(s,F),c&&c.push(i,y,C,C+1)}}else s=$w(r,e,d,s,!0),v.addEventListener(i,s,o),h.push(s),c&&c.push(i,y,C,o)}else s=$w(r,e,d,s,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const m=g.length;if(m)for(let v=0;v<m;v+=2){const j=e[g[v]][g[v+1]].subscribe(s),fe=h.length;h.push(s,j),c&&c.push(i,r.index,fe,-(fe+1))}}}(s,i,i[11],o,n,e,!!t,r),be}function UR(n,e,t,r){try{return!1!==t(r)}catch(i){return fR(n,i),!1}}function $w(n,e,t,r,i){return function s(o){if(o===Function)return r;Nw(2&n.flags?dr(n.index,e):e);let l=UR(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)l=UR(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Dn(n=1){return function Y4(n){return(ne.lFrame.contextLView=function J4(n,e){for(;n>0;)e=e[15],n--;return e}(n,ne.lFrame.contextLView))[8]}(n)}function YR(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Xr(s):Qi(s),l=!1;for(;0!==a&&(!1===l||o);){const c=n[a+1];a7(n[a],e)&&(l=!0,n[a+1]=r?_w(c):gw(c)),a=r?Xr(c):Qi(c)}l&&(n[t+1]=r?gw(s):_w(s))}function a7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&gl(n,e)>=0}const Bt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function JR(n){return n.substring(Bt.key,Bt.keyEnd)}function XR(n,e){const t=Bt.textEnd;return t===e?-1:(e=Bt.keyEnd=function d7(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Bt.key=e,t),Ol(n,e,t))}function Ol(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Fl(n,e,t){return ei(n,e,t,!1),Fl}function Ip(n,e){return ei(n,e,null,!0),Ip}function Ji(n){!function ti(n,e,t,r){const i=Ce(),s=qi(2);i.firstUpdatePass&&iP(i,null,s,r);const o=S();if(t!==se&&In(o,s,t)){const a=i.data[Vn()];if(lP(a,r)&&!rP(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Gy(l,t||"")),Bw(i,a,o,t,r)}else!function w7(n,e,t,r,i,s,o,a){i===se&&(i=Me);let l=0,u=0,c=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==c||null!==d;){const h=l<i.length?i[l+1]:void 0,f=u<s.length?s[u+1]:void 0;let g,p=null;c===d?(l+=2,u+=2,h!==f&&(p=d,g=f)):null===d||null!==c&&c<d?(l+=2,p=c):(u+=2,p=d,g=f),null!==p&&oP(n,e,t,r,p,g,o,a),c=l<i.length?i[l]:null,d=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function v7(n,e,t){if(null==t||""===t)return Me;const r=[],i=pr(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(fr,Ei,n,!0)}function Ei(n,e){for(let t=function u7(n){return function eP(n){Bt.key=0,Bt.keyEnd=0,Bt.value=0,Bt.valueEnd=0,Bt.textEnd=n.length}(n),XR(n,Ol(n,0,Bt.textEnd))}(e);t>=0;t=XR(e,t))fr(n,JR(e),!0)}function ei(n,e,t,r){const i=S(),s=Ce(),o=qi(2);s.firstUpdatePass&&iP(s,n,o,r),e!==se&&In(i,o,e)&&oP(s,s.data[Vn()],i,i[11],n,i[o+1]=function E7(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ue(pr(n)))),n}(e,t),r,o)}function rP(n,e){return e>=n.expandoStartIndex}function iP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Vn()],o=rP(n,t);lP(s,r)&&null===e&&!o&&(e=!1),e=function g7(n,e,t,r){const i=hv(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Vc(t=Hw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Hw(i,n,e,t,r),null===s){let l=function m7(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Qi(r))return n[Xr(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Hw(null,n,e,l[1],r),l=Vc(l,e.attrs,r),function _7(n,e,t,r){n[Xr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function y7(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Vc(r,n[s].hostAttrs,t);return Vc(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function s7(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Xr(o),l=Qi(o);n[r]=t;let c,u=!1;if(Array.isArray(t)){const d=t;c=d[1],(null===c||gl(d,c)>0)&&(u=!0)}else c=t;if(i)if(0!==l){const h=Xr(n[a+1]);n[r+1]=mp(h,a),0!==h&&(n[h+1]=mw(n[h+1],r)),n[a+1]=function q5(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=mp(a,0),0!==a&&(n[a+1]=mw(n[a+1],r)),a=r;else n[r+1]=mp(l,0),0===a?a=r:n[l+1]=mw(n[l+1],r),l=r;u&&(n[r+1]=gw(n[r+1])),YR(n,c,r,!0),YR(n,c,r,!1),function o7(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&gl(s,e)>=0&&(t[r+1]=_w(t[r+1]))}(e,c,n,r,s),o=mp(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function Hw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Vc(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Vc(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fr(n,o,!!t||e[++s]))}return void 0===n?null:n}function oP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1];Dp(function $1(n){return 1==(1&n)}(u)?aP(l,e,t,i,Qi(u),o):void 0)||(Dp(s)||function U1(n){return 2==(2&n)}(u)&&(s=aP(l,null,t,i,a,o)),function r5(n,e,t,r,i){const s=dt(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:gr.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=gr.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Uf(Vn(),t),i,s))}function aP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let h=t[i+1];h===se&&(h=d?Me:void 0);let f=d?bv(h,r):c===r?h:void 0;if(u&&!Dp(f)&&(f=bv(l,r)),Dp(f)&&(a=f,o))return a;const p=n[i+1];i=o?Xr(p):Qi(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=bv(l,r))}return a}function Dp(n){return void 0!==n}function lP(n,e){return 0!=(n.flags&(e?16:32))}function M(n,e=""){const t=S(),r=Ce(),i=n+22,s=r.firstCreatePass?bl(r,i,1,e,null):r.data[i],o=t[i]=function Wv(n,e){return dt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);hp(r,t,o,s),pi(s,!1)}function ni(n){return Nr("",n,""),ni}function Nr(n,e,t){const r=S(),i=function Sl(n,e,t,r){return In(n,al(),t)?e+ie(t)+r:se}(r,n,e,t);return i!==se&&Yi(r,Vn(),i),Nr}function Sp(n,e,t,r,i){const s=S(),o=Al(s,n,e,t,r,i);return o!==se&&Yi(s,Vn(),o),Sp}function Gw(n,e,t){const r=S();if(In(r,al(),e)){const s=Ce(),o=ht();mr(s,o,r,n,e,function hR(n,e,t){return(null===n||Yr(n))&&(t=function L4(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}(hv(s.data),o,r),t,!0)}return Gw}const Fo=void 0;var $7=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function U7(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Ll={};function Un(n){const e=function j7(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=SP(e);if(t)return t;const r=e.split("-")[0];if(t=SP(r),t)return t;if("en"===r)return $7;throw new Error(`Missing locale data for the locale "${n}".`)}function SP(n){return n in Ll||(Ll[n]=Fe.ng&&Fe.ng.common&&Fe.ng.common.locales&&Fe.ng.common.locales[n]),Ll[n]}var B=(()=>((B=B||{})[B.LocaleId=0]="LocaleId",B[B.DayPeriodsFormat=1]="DayPeriodsFormat",B[B.DayPeriodsStandalone=2]="DayPeriodsStandalone",B[B.DaysFormat=3]="DaysFormat",B[B.DaysStandalone=4]="DaysStandalone",B[B.MonthsFormat=5]="MonthsFormat",B[B.MonthsStandalone=6]="MonthsStandalone",B[B.Eras=7]="Eras",B[B.FirstDayOfWeek=8]="FirstDayOfWeek",B[B.WeekendRange=9]="WeekendRange",B[B.DateFormat=10]="DateFormat",B[B.TimeFormat=11]="TimeFormat",B[B.DateTimeFormat=12]="DateTimeFormat",B[B.NumberSymbols=13]="NumberSymbols",B[B.NumberFormats=14]="NumberFormats",B[B.CurrencyCode=15]="CurrencyCode",B[B.CurrencySymbol=16]="CurrencySymbol",B[B.CurrencyName=17]="CurrencyName",B[B.Currencies=18]="Currencies",B[B.Directionality=19]="Directionality",B[B.PluralCase=20]="PluralCase",B[B.ExtraData=21]="ExtraData",B))();const Vl="en-US";let AP=Vl;function zw(n,e,t,r,i){if(n=Z(n),Array.isArray(n))for(let s=0;s<n.length;s++)zw(n[s],e,t,r,i);else{const s=Ce(),o=S();let a=No(n)?n:Z(n.provide),l=S1(n);const u=Ot(),c=1048575&u.providerIndexes,d=u.directiveStart,h=u.providerIndexes>>20;if(No(n)||!n.multi){const f=new dc(l,i,b),p=Qw(a,e,i?c:c+h,d);-1===p?(Zf(fc(u,o),s,a),Kw(s,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Qw(a,e,c+h,d),p=Qw(a,e,c,c+h),g=f>=0&&t[f],m=p>=0&&t[p];if(i&&!m||!i&&!g){Zf(fc(u,o),s,a);const v=function BQ(n,e,t,r,i){const s=new dc(n,t,b);return s.multi=[],s.index=e,s.componentProviders=0,ZP(s,i,r&&!t),s}(i?VQ:LQ,t.length,i,r,l);!i&&m&&(t[p].providerFactory=v),Kw(s,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(v),o.push(v)}else Kw(s,n,f>-1?f:p,ZP(t[i?p:f],l,!i&&r));!i&&r&&m&&t[p].componentProviders++}}}function Kw(n,e,t,r){const i=No(e),s=function C5(n){return!!n.useClass}(e);if(i||s){const l=(s?Z(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=u.indexOf(t);-1===c?u.push(t,[r,l]):u[c+1].push(r,l)}else u.push(t,l)}}}function ZP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function LQ(n,e,t,r){return Yw(this.multi,[])}function VQ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=pc(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),Yw(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Yw(i,s);return s}function Yw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Xe(n,e=[]){return t=>{t.providersResolver=(r,i)=>function FQ(n,e,t){const r=Ce();if(r.firstCreatePass){const i=Yr(n);zw(t,r.data,r.blueprint,i,!0),zw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class $Q{resolveComponentFactory(e){throw function UQ(n){const e=Error(`No component factory found for ${Ue(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ul=(()=>{class n{}return n.NULL=new $Q,n})();class Ps{}class tO{}class nO{}function HQ(){return $l(Ot(),S())}function $l(n,e){return new _r(Mr(n,e))}let _r=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=HQ,n})();class Hc{}let Xi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function qQ(){const n=S(),t=dr(Ot().index,n);return function WQ(n){return n[11]}(Yn(t)?t:n)}(),n})(),zQ=(()=>{class n{}return n.\u0275prov=W({token:n,providedIn:"root",factory:()=>null}),n})();class jl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rO=new jl("14.0.3"),Jw={};function Np(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(bt(s)),Qr(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&Np(l[1],l,u,r)}const o=t.type;if(8&o)Np(n,e,t.child,r);else if(32&o){const a=jv(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=o1(e,t);if(Array.isArray(a))r.push(...a);else{const l=xc(e[16]);Np(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Gc{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Np(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(zv(e,r),tp(t,r))}this._attachedToViewContainer=!1}YN(this._lView[1],this._lView)}onDestroy(e){!function tR(n,e,t,r){const i=cR(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&dR(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Nw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Pw(n,e,t){const r=e[10];r.begin&&r.begin();try{Il(n,e,n.template,t)}catch(i){throw fR(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function z6(n,e){Mc(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e}}class KQ extends Gc{constructor(e){super(e),this._view=e}detectChanges(){uR(this._view)}checkNoChanges(){}get context(){return null}}class Xw extends Ul{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$e(e);return new Zw(t,this.ngModule)}}function iO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class YQ{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Jw,r);return i!==Jw||t===Jw?i:this.parentInjector.get(e,t,r)}}class Zw extends nO{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function f5(n){return n.map(h5).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return iO(this.componentDef.inputs)}get outputs(){return iO(this.componentDef.outputs)}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ro?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new YQ(e,s):e,a=o.get(Hc,Lk),l=o.get(zQ,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function eR(n,e,t){if(dt(n))return n.selectRootElement(e,t===zr.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):qv(a.createRenderer(null,this.componentDef),c,function QQ(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,f=function IR(n,e){return{components:[],scheduler:n||V6,clean:A8,playerHandler:e||null,flags:0}}(),p=vp(0,null,null,1,0,null,null,null,null,null),g=kc(null,p,f,h,null,null,a,u,l,o,null);let m,v;Gf(g);try{const C=function bR(n,e,t,r,i,s){const o=t[1];t[22]=n;const l=bl(o,22,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&(Ep(l,u,!0),null!==n&&(Qf(i,n,u),null!==l.classes&&Xv(i,n,l.classes),null!==l.styles&&u1(i,n,l.styles)));const c=r.createRenderer(n,e),d=kc(t,X1(e),null,e.onPush?32:16,t[22],l,r,c,s||null,null,null);return o.firstCreatePass&&(Zf(fc(l,t),o,e.type),sR(o,l),oR(l,t.length,1)),wp(t,d),t[22]=d}(d,this.componentDef,g,a,u);if(d)if(r)Qf(u,d,["ng-version",rO.full]);else{const{attrs:y,classes:D}=function p5(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Jr(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Qf(u,d,y),D&&D.length>0&&Xv(u,d,D.join(" "))}if(v=ov(p,22),void 0!==t){const y=v.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const F=t[D];y.push(null!=F?Array.from(F):null)}}m=function TR(n,e,t,r,i){const s=t[1],o=function h8(n,e,t){const r=Ot();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),aR(n,r,e,Tl(n,e,1,null),t));const i=pc(e,n,r.directiveStart,r);Tn(i,e);const s=Mr(r,e);return s&&Tn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,null!==i)for(const l of i)l(o,e);if(e.contentQueries){const l=Ot();e.contentQueries(1,o,l.directiveStart)}const a=Ot();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ms(a.index),rR(t[1],a,0,a.directiveStart,a.directiveEnd,e),iR(e,o)),o}(C,this.componentDef,g,f,[B8]),Nc(p,g,null)}finally{Wf()}return new XQ(this.componentType,m,$l(v,g),g,v)}}class XQ extends class jQ{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new KQ(i),this.componentType=e}get injector(){return new cl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class sO extends Ps{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xw(this);const r=ur(e);this._bootstrapComponents=Ki(r.bootstrap),this._r3Injector=x1(e,t,[{provide:Ps,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],Ue(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,t=Lt.THROW_IF_NOT_FOUND,r=Q.Default){return e===Lt||e===Ps||e===tw?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class eE extends tO{constructor(e){super(),this.moduleType=e}create(e){return new sO(this.moduleType,e)}}class e9 extends Ps{constructor(e,t,r){super(),this.componentFactoryResolver=new Xw(this),this.instance=null;const i=new D1([...e,{provide:Ps,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],t||iw(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Rp(n,e=null,t=null){return new e9(n,e,t).injector}function tE(n,e,t,r){return oO(S(),Ln(),n,e,t,r)}function Wc(n,e){const t=n[e];return t===se?void 0:t}function oO(n,e,t,r,i,s){const o=e+t;return In(n,o,i)?vi(n,o+1,s?r.call(s,i):r(i)):Wc(n,o+1)}function Lo(n,e){const t=Ce();let r;const i=n+22;t.firstCreatePass?(r=function f9(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=xo(r.type)),o=fi(b);try{const a=Jf(!1),l=s();return Jf(a),function J8(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,S(),i,l),l}finally{fi(o)}}function nE(n,e,t){const r=n+22,i=S(),s=ol(i,r);return zc(i,r)?oO(i,Ln(),e,s.transform,t,s):s.transform(t)}function qc(n,e,t,r){const i=n+22,s=S(),o=ol(s,i);return zc(s,i)?function aO(n,e,t,r,i,s,o){const a=e+t;return Oo(n,a,i,s)?vi(n,a+2,o?r.call(o,i,s):r(i,s)):Wc(n,a+2)}(s,Ln(),e,o.transform,t,r,o):o.transform(t,r)}function zc(n,e){return n[1].data[e].pure}function rE(n){return e=>{setTimeout(n,void 0,e)}}const pt=class _9 extends kt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=rE(s),i&&(i=rE(i)),o&&(o=rE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof or&&e.add(a),a}};let Zi=(()=>{class n{}return n.__NG_ELEMENT_ID__=E9,n})();const v9=Zi,w9=class extends v9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=kc(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Nc(r,i,e),new Gc(i)}};function E9(){return function Pp(n,e){return 4&n.type?new w9(e,n,$l(n,e)):null}(Ot(),S())}let ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=C9,n})();function C9(){return function fO(n,e){let t;const r=e[n.index];if(Qr(r))t=r;else{let i;if(8&n.type)i=bt(r);else{const s=e[11];i=s.createComment("");const o=Mr(n,e);ko(s,dp(s,o),i,function e5(n,e){return dt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=lR(r,e,i,n),wp(e,t)}return new dO(t,n,e)}(Ot(),S())}const b9=ri,dO=class extends b9{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new cl(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xf(this._hostTNode,this._hostLView);if(eN(e)){const t=ul(e,this._hostLView),r=ll(e);return new cl(t[1].data[r+8],t)}return new cl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=hO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function _c(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new Zw($e(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?u:this.parentInjector).get(Ro,null);h&&(s=h)}const c=l.create(u,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,t){const r=e._lView,i=r[1];if(function B4(n){return Qr(n[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],h=new dO(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Q6(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],dN(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Y6(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,o,s);const a=Yv(s,o),l=r[11],u=dp(l,o[7]);return null!==u&&function q6(n,e,t,r,i,s){r[0]=i,r[6]=e,Mc(n,r,t,1,i,s)}(i,o[6],l,r,u,a),e.attachToViewContainerRef(),dN(sE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=hO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=zv(this._lContainer,t);r&&(tp(sE(this._lContainer),t),YN(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=zv(this._lContainer,t);return r&&null!=tp(sE(this._lContainer),t)?new Gc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hO(n){return n[8]}function sE(n){return n[8]||(n[8]=[])}function Fp(...n){}const yE=new K("Application Initializer");let Lp=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Fp,this.reject=Fp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Lc(s))t.push(s);else if(Uw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(k(yE,8))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qc=new K("AppId",{providedIn:"root",factory:function LO(){return`${vE()}${vE()}${vE()}`}});function vE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VO=new K("Platform Initializer"),Vp=new K("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BO=new K("appBootstrapListener"),UO=new K("AnimationModuleType");let Z9=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const es=new K("LocaleId",{providedIn:"root",factory:()=>function NK(n,e=Q.Default){return k(n,e)}(es,Q.Optional|Q.SkipSelf)||function eY(){return typeof $localize<"u"&&$localize.locale||Vl}()});class nY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let wE=(()=>{class n{compileModuleSync(t){return new eE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ki(ur(t).declarations).reduce((o,a)=>{const l=$e(a);return l&&o.push(new Zw(l)),o},[]);return new nY(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iY=(()=>Promise.resolve(0))();function EE(n){typeof Zone>"u"?iY.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Le{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function sY(){let n=Fe.requestAnimationFrame,e=Fe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function lY(n){const e=()=>{!function aY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Fe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bE(n),n.isCheckStableRunning=!0,CE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return $O(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),jO(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return $O(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),jO(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,bE(n),CE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Le.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Le.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,oY,Fp,Fp);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const oY={};function CE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $O(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jO(n){n._nesting--,CE(n)}class uY{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HO=new K(""),Bp=new K("");let DE,TE=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,DE||(function cY(n){DE=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Le.assertNotInAngularZone(),EE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())EE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(k(Le),k(IE),k(Bp))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),IE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return DE?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Os=null;const GO=new K("AllowMultipleToken"),WO=new K("PlatformOnDestroy");class qO{constructor(e,t){this.name=e,this.token=t}}function KO(n,e,t=[]){const r=`Platform: ${e}`,i=new K(r);return(s=[])=>{let o=SE();if(!o||o.injector.get(GO,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function fY(n){if(Os&&!Os.get(GO,!1))throw new L(400,!1);Os=n;const e=n.get(YO);(function zO(n){const e=n.get(VO,null);e&&e.forEach(t=>t())})(n)}(function QO(n=[],e){return Lt.create({name:e,providers:[{provide:nw,useValue:"platform"},{provide:WO,useValue:()=>Os=null},...n]})}(a,r))}return function gY(n){const e=SE();if(!e)throw new L(401,!1);return e}()}}function SE(){return Os?.get(YO)??null}let YO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function mY(n,e){let t;return t="noop"===n?new uY:("zone.js"===n?void 0:n)||new Le(e),t}(r?.ngZone,function JO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Le,useValue:i}];return i.run(()=>{const o=Lt.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(yl,null);if(!l)throw new L(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{Up(this._modules,a),u.unsubscribe()})}),function XO(n,e,t){try{const r=t();return Lc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(Lp);return u.runInitializers(),u.donePromise.then(()=>(function xP(n){lr(n,"Expected localeId to be defined"),"string"==typeof n&&(AP=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(es,Vl)||Vl),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=ZO({},r);return function dY(n,e,t){const r=new eE(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ql);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new L(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(WO,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(k(Lt))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ZO(n,e){return Array.isArray(e)?e.reduce(ZO,n):{...n,...e}}let ql=(()=>{class n{constructor(t,r,i,s){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new rt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new rt(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),EE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function s4(...n){const e=sc(n),t=function Xz(n,e){return"number"==typeof $y(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Wr(r[0]):Za(t)(Rt(r,e)):ji}(o,a.pipe(function o4(n={}){const{connector:e=(()=>new kt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,l=null,u=0,c=!1,d=!1;const h=()=>{a?.unsubscribe(),a=null},f=()=>{h(),o=l=null,c=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Nt((g,m)=>{u++,!d&&!c&&h();const v=l=l??e();m.add(()=>{u--,0===u&&!d&&!c&&(a=jy(p,i))}),v.subscribe(m),o||(o=new Sf({next:C=>v.next(C),error:C=>{d=!0,h(),a=jy(f,t,C),v.error(C)},complete:()=>{c=!0,h(),a=jy(f,r),v.complete()}}),Rt(g).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof nO;if(!this._initStatus.done)throw!i&&function Gl(n){const e=$e(n)||On(n)||Fn(n);return null!==e&&e.standalone}(t),new L(405,false);let s;s=i?t:this._injector.get(Ul).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const o=function hY(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ps),l=s.create(Lt.NULL,[],r||s.selector,o),u=l.location.nativeElement,c=l.injector.get(HO,null);return c?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Up(this.components,l),c?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new L(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Up(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(BO,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Up(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(k(Le),k(Lt),k(yl),k(Lp))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Up(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let tF=!0,$p=(()=>{class n{}return n.__NG_ELEMENT_ID__=vY,n})();function vY(n){return function wY(n,e,t){if(Vf(n)&&!t){const r=dr(n.index,e);return new Gc(r,r)}return 47&n.type?new Gc(e[16],e):null}(Ot(),S(),16==(16&n))}class oF{constructor(){}supports(e){return Rc(e)}create(e){return new DY(e)}}const IY=(n,e)=>e;class DY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||IY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<lF(r,i,s)?t:r,a=lF(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let h=0;h<u;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;c<=p&&p<u&&(s[h]=f+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Rc(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function K8(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Po()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new SY(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new aF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class SY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class aF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new AY,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lF(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class uF{constructor(){}supports(e){return e instanceof Map||Vw(e)}create(){return new xY}}class xY{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Vw(e)))throw new L(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new MY(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class MY{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cF(){return new Gp([new oF])}let Gp=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cF()),deps:[[n,new Cc,new st]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new L(901,!1)}}return n.\u0275prov=W({token:n,providedIn:"root",factory:cF}),n})();function dF(){return new Yc([new uF])}let Yc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||dF()),deps:[[n,new Cc,new st]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new L(901,!1)}}return n.\u0275prov=W({token:n,providedIn:"root",factory:dF}),n})();const RY=KO(null,"core",[]);let PY=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(k(ql))},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({}),n})();function ns(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Wp=null;function Ci(){return Wp}const Tt=new K("DocumentToken");let Jc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:function(){return function VY(){return k(hF)}()},providedIn:"platform"}),n})();const BY=new K("Location Initialized");let hF=(()=>{class n extends Jc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ci().getBaseHref(this._doc)}onPopState(t){const r=Ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){fF()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){fF()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:function(){return function UY(){return new hF(k(Tt))}()},providedIn:"platform"}),n})();function fF(){return!!window.history.pushState}function NE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function pF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rs(n){return n&&"?"!==n[0]?"?"+n:n}let zl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:function(){return function $Y(){const n=k(Tt).location;return new gF(k(Jc),n&&n.origin||"")}()},providedIn:"root"}),n})();const RE=new K("appBaseHref");let gF=(()=>{class n extends zl{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return NE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+rs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+rs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(k(Jc),k(RE,8))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),jY=(()=>{class n extends zl{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=NE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+rs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+rs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(k(Jc),k(RE,8))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),PE=(()=>{class n{constructor(t){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=pF(mF(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rs(r))}normalize(t){return n.stripTrailingSlash(function GY(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,mF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rs,n.joinWithSlash=NE,n.stripTrailingSlash=pF,n.\u0275fac=function(t){return new(t||n)(k(zl))},n.\u0275prov=W({token:n,factory:function(){return function HY(){return new PE(k(zl))}()},providedIn:"root"}),n})();function mF(n){return n.replace(/\/index.html$/,"")}var Xn=(()=>((Xn=Xn||{})[Xn.Decimal=0]="Decimal",Xn[Xn.Percent=1]="Percent",Xn[Xn.Currency=2]="Currency",Xn[Xn.Scientific=3]="Scientific",Xn))(),z=(()=>((z=z||{})[z.Decimal=0]="Decimal",z[z.Group=1]="Group",z[z.List=2]="List",z[z.PercentSign=3]="PercentSign",z[z.PlusSign=4]="PlusSign",z[z.MinusSign=5]="MinusSign",z[z.Exponential=6]="Exponential",z[z.SuperscriptingExponent=7]="SuperscriptingExponent",z[z.PerMille=8]="PerMille",z[z.Infinity=9]="Infinity",z[z.NaN=10]="NaN",z[z.TimeSeparator=11]="TimeSeparator",z[z.CurrencyDecimal=12]="CurrencyDecimal",z[z.CurrencyGroup=13]="CurrencyGroup",z))();function Rr(n,e){const t=Un(n),r=t[B.NumberSymbols][e];if(typeof r>"u"){if(e===z.CurrencyDecimal)return t[B.NumberSymbols][z.Decimal];if(e===z.CurrencyGroup)return t[B.NumberSymbols][z.Group]}return r}const mJ=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function jE(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let IF=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Rc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ue(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(b(Gp),b(Yc),b(_r),b(Xi))},n.\u0275dir=ee({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class xJ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let GE=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new xJ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),SF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{SF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(ri),b(Zi),b(Gp))},n.\u0275dir=ee({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function SF(n,e){n.context.$implicit=e.item}let ed=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new MJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(ri),b(Zi))},n.\u0275dir=ee({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class MJ{constructor(){this.$implicit=null,this.ngIf=null}}function AF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ue(e)}'.`)}let MF=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(b(_r),b(Yc),b(Xi))},n.\u0275dir=ee({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();let NF=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function zE(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function CJ(n,e,t){return function UE(n,e,t,r,i,s,o=!1){let a="",l=!1;if(isFinite(n)){let u=function TJ(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(u=function bJ(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(u));let c=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){const C=s.match(mJ);if(null===C)throw new Error(`${s} is not a valid digit info`);const y=C[1],D=C[3],F=C[5];null!=y&&(c=jE(y)),null!=D&&(d=jE(D)),null!=F?h=jE(F):null!=D&&d>h&&(h=d)}!function IJ(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=0!==s;const u=e+n.integerLen,c=r.reduceRight(function(d,h,f,p){return p[f]=(h+=d)<10?h:h-10,l&&(0===p[f]&&f>=u?p.pop():l=!1),h>=10?1:0},0);c&&(r.unshift(c),n.integerLen++)}(u,d,h);let f=u.digits,p=u.integerLen;const g=u.exponent;let m=[];for(l=f.every(C=>!C);p<c;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const v=[];for(f.length>=e.lgSize&&v.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)v.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&v.unshift(f.join("")),a=v.join(Rr(t,r)),m.length&&(a+=Rr(t,i)+m.join("")),g&&(a+=Rr(t,z.Exponential)+"+"+g)}else a=Rr(t,z.Infinity);return a=n<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function $E(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let c=0;c<l.length;c++){const d=l.charAt(c);"0"===d?t.minFrac=t.maxFrac=c+1:"#"===d?t.maxFrac=c+1:t.posSuf+=d}const u=a.split(",");if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){const c=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+c).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function OE(n,e){return Un(n)[B.NumberFormats][e]}(e,Xn.Decimal),Rr(e,z.MinusSign)),e,z.Group,z.Decimal,t)}(function KE(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function si(n,e){return new L(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(b(es,16))},n.\u0275pipe=Pt({name:"number",type:n,pure:!0}),n})();let td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({}),n})();let iX=(()=>{class n{}return n.\u0275prov=W({token:n,providedIn:"root",factory:()=>new sX(k(Tt),window)}),n})();class sX{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oX(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=PF(this.window.history)||PF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function PF(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class QE extends class lX extends class LY{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function FY(n){Wp||(Wp=n)}(new QE)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function uX(){return nd=nd||document.querySelector("base"),nd?nd.getAttribute("href"):null}();return null==t?null:function cX(n){tg=tg||document.createElement("a"),tg.setAttribute("href",n);const e=tg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function SJ(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let tg,nd=null;const OF=new K("TRANSITION_ID"),hX=[{provide:yE,useFactory:function dX(n,e,t){return()=>{t.get(Lp).donePromise.then(()=>{const r=Ci(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[OF,Tt,Lt],multi:!0}];let pX=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();const ng=new K("EventManagerPlugins");let rg=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(k(ng),k(Le))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();class FF{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Ci().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let LF=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),rd=(()=>{class n extends LF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(VF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(VF))}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();function VF(n){Ci().remove(n)}const YE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},JE=/%COMP%/g;function ig(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ig(n,i,t):(i=i.replace(JE,n),t.push(i))}return t}function $F(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let sg=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new XE(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case zr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new wX(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case zr.ShadowDom:return new EX(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ig(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(k(rg),k(rd),k(Qc))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();class XE{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(YE[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(HF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=YE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=YE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gr.DashCase|gr.Important)?e.style.setProperty(t,r,i&gr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$F(r)):this.eventManager.addEventListener(e,t,$F(r))}}function HF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wX extends XE{constructor(e,t,r,i){super(e),this.component=r;const s=ig(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function _X(n){return"_ngcontent-%COMP%".replace(JE,n)}(i+"-"+r.id),this.hostAttr=function yX(n){return"_nghost-%COMP%".replace(JE,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class EX extends XE{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ig(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let CX=(()=>{class n extends FF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();const GF=["alt","control","meta","shift"],TX={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},IX={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let DX=(()=>{class n extends FF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ci().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(GF.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function SX(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&WF.hasOwnProperty(e)&&(e=WF[e]))}return TX[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),GF.forEach(s=>{s!=i&&IX[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();const qF=[{provide:Vp,useValue:"browser"},{provide:VO,useValue:function AX(){QE.makeCurrent()},multi:!0},{provide:Tt,useFactory:function MX(){return function O4(n){iv=n}(document),document},deps:[]}],kX=KO(RY,"browser",qF),zF=new K(""),KF=[{provide:Bp,useClass:class fX{addToWindow(e){Fe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Fe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Fe.getAllAngularRootElements=()=>e.getAllRootElements(),Fe.frameworkStabilizers||(Fe.frameworkStabilizers=[]),Fe.frameworkStabilizers.push(r=>{const i=Fe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ci().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HO,useClass:TE,deps:[Le,IE,Bp]},{provide:TE,useClass:TE,deps:[Le,IE,Bp]}],QF=[{provide:nw,useValue:"root"},{provide:yl,useFactory:function xX(){return new yl},deps:[]},{provide:ng,useClass:CX,multi:!0,deps:[Tt,Le,Vp]},{provide:ng,useClass:DX,multi:!0,deps:[Tt]},{provide:sg,useClass:sg,deps:[rg,rd,Qc]},{provide:Hc,useExisting:sg},{provide:LF,useExisting:rd},{provide:rd,useClass:rd,deps:[Tt]},{provide:rg,useClass:rg,deps:[ng,Le]},{provide:class aX{},useClass:pX,deps:[]},[]];let YF=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Qc,useValue:t.appId},{provide:OF,useExisting:Qc},hX]}}}return n.\u0275fac=function(t){return new(t||n)(k(zF,12))},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({providers:[...QF,...KF],imports:[td,PY]}),n})(),JF=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:function(t){let r=null;return r=t?new t:function RX(){return new JF(k(Tt))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let eL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:function(t){let r=null;return r=t?new(t||n):k(tL),r},providedIn:"root"}),n})(),tL=(()=>{class n extends eL{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case je.NONE:return r;case je.HTML:return mi(r,"HTML")?pr(r):ON(this._doc,String(r)).toString();case je.STYLE:return mi(r,"Style")?pr(r):r;case je.SCRIPT:if(mi(r,"Script"))return pr(r);throw new Error("unsafe value used in a script context");case je.URL:return SN(r),mi(r,"URL")?pr(r):Ic(String(r));case je.RESOURCE_URL:if(mi(r,"ResourceURL"))return pr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function XK(n){return new zK(n)}(t)}bypassSecurityTrustStyle(t){return function ZK(n){return new KK(n)}(t)}bypassSecurityTrustScript(t){return function e6(n){return new QK(n)}(t)}bypassSecurityTrustUrl(t){return function t6(n){return new YK(n)}(t)}bypassSecurityTrustResourceUrl(t){return function n6(n){return new JK(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:function(t){let r=null;return r=t?new t:function $X(n){return new tL(n.get(Tt))}(k(Lt)),r},providedIn:"root"}),n})();const nL_firebase={projectId:"rpg-2-53227",appId:"1:393611842949:web:db420042ce542e190360ec",storageBucket:"rpg-2-53227.appspot.com",locationId:"us-central",apiKey:"AIzaSyCJyMAtIBsRQApkzw61JaVnoz8u2tijAn0",authDomain:"rpg-2-53227.firebaseapp.com",messagingSenderId:"393611842949"};function oe(...n){return Rt(n,sc(n))}class on extends kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:jX}=Array,{getPrototypeOf:HX,prototype:GX,keys:WX}=Object;function rL(n){if(1===n.length){const e=n[0];if(jX(e))return{args:e,keys:null};if(function qX(n){return n&&"object"==typeof n&&HX(n)===GX}(e)){const t=WX(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:zX}=Array;function iL(n){return Re(e=>function KX(n,e){return zX(e)?n(...e):n(e)}(n,e))}function sL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function oL(...n){const e=sc(n),t=Ck(n),{args:r,keys:i}=rL(n);if(0===r.length)return Rt([],e);const s=new rt(function QX(n,e,t=bo){return r=>{aL(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)aL(e,()=>{const u=Rt(n[l],e);let c=!1;u.subscribe(Et(r,d=>{s[l]=d,c||(c=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>sL(i,o):bo));return t?s.pipe(iL(t)):s}function aL(n,e,t){n?$i(t,n,e):e()}function id(n,e){const t=Ge(n)?n:()=>n,r=i=>i.error(t());return new rt(e?i=>e.schedule(r,0,i):r)}const sd=ic(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tC(...n){return function YX(){return Za(1)}()(Rt(n,sc(n)))}function lL(n){return new rt(e=>{Wr(n()).subscribe(e)})}function nC(){return Nt((n,e)=>{let t=null;n._refCount++;const r=Et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uL extends rt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ak(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new or;const t=this.getSubject();e.add(this.source.subscribe(Et(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=or.EMPTY)}return e}refCount(){return nC()(this)}}function Bo(n,e){return Nt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Et(r,l=>{i?.unsubscribe();let u=0;const c=s++;Wr(n(l,c)).subscribe(i=Et(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function XX(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(Et(o,c=>{const d=u++;l=a?n(l,c,d):(a=!0,c),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function cL(n,e){return Nt(XX(n,e,arguments.length>=2,!0))}function Uo(n,e){return Nt((t,r)=>{let i=0;t.subscribe(Et(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ls(n){return Nt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Et(t,void 0,void 0,o=>{s=Wr(n(o,Ls(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function od(n,e){return Ge(e)?sn(n,e,1):sn(n,1)}function rC(n){return n<=0?()=>ji:Nt((e,t)=>{let r=[];e.subscribe(Et(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dL(n=ZX){return Nt((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ZX(){return new sd}function iC(n){return Nt((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $o(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((i,s)=>n(i,s,r)):bo,el(1),t?iC(e):dL(()=>new sd))}function an(n,e,t){const r=Ge(n)||e||t?{next:n,error:e,complete:t}:n;return r?Nt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Et(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):bo}function sC(n){return Nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class ss{constructor(e,t){this.id=e,this.url=t}}class oC extends ss{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ad extends ss{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hL extends ss{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nZ extends ss{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rZ extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iZ extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sZ extends ss{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oZ extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aZ extends ss{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const pe="primary";class pZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Kl(n){return new pZ(n)}const pL="ngNavigationCancelingError";function aC(n){const e=Error("NavigationCancelingError: "+n);return e[pL]=!0,e}function mZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function bi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gL(n[i],e[i]))return!1;return!0}function gL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function mL(n){return Array.prototype.concat.apply([],n)}function _L(n){return n.length>0?n[n.length-1]:null}function ln(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function oi(n){return Uw(n)?n:Lc(n)?Rt(Promise.resolve(n)):oe(n)}const vZ={exact:function wL(n,e,t){if(!Ho(n.segments,e.segments)||!og(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wL(n.children[r],e.children[r],t))return!1;return!0},subset:EL},yL={exact:function wZ(n,e){return bi(n,e)},subset:function EZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gL(n[t],e[t]))},ignored:()=>!0};function vL(n,e,t){return vZ[t.paths](n.root,e.root,t.matrixParams)&&yL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function EL(n,e,t){return CL(n,e,e.segments,t)}function CL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ho(i,t)||e.hasChildren()||!og(i,t,r))}if(n.segments.length===t.length){if(!Ho(n.segments,t)||!og(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!EL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ho(n.segments,i)&&og(n.segments,i,r)&&n.children[pe])&&CL(n.children[pe],e,s,r)}}function og(n,e,t){return e.every((r,i)=>yL[t](n[i].parameters,r.parameters))}class jo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap}toString(){return TZ.serialize(this)}}class we{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ln(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ag(this)}}class ld{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Kl(this.parameters)),this._parameterMap}toString(){return SL(this)}}function Ho(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class bL{}class TL{parse(e){const t=new RZ(e);return new jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ud(e.root,!0)}`,r=function SZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${lg(t)}=${lg(i)}`).join("&"):`${lg(t)}=${lg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function IZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const TZ=new TL;function ag(n){return n.segments.map(e=>SL(e)).join("/")}function ud(n,e){if(!n.hasChildren())return ag(n);if(e){const t=n.children[pe]?ud(n.children[pe],!1):"",r=[];return ln(n.children,(i,s)=>{s!==pe&&r.push(`${s}:${ud(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bZ(n,e){let t=[];return ln(n.children,(r,i)=>{i===pe&&(t=t.concat(e(r,i)))}),ln(n.children,(r,i)=>{i!==pe&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===pe?[ud(n.children[pe],!1)]:[`${i}:${ud(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pe]?`${ag(n)}/${t[0]}`:`${ag(n)}/(${t.join("//")})`}}function IL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lg(n){return IL(n).replace(/%3B/gi,";")}function lC(n){return IL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ug(n){return decodeURIComponent(n)}function DL(n){return ug(n.replace(/\+/g,"%20"))}function SL(n){return`${lC(n.path)}${function DZ(n){return Object.keys(n).map(e=>`;${lC(e)}=${lC(n[e])}`).join("")}(n.parameters)}`}const AZ=/^[^\/()?;=#]+/;function cg(n){const e=n.match(AZ);return e?e[0]:""}const xZ=/^[^=?&#]+/,kZ=/^[^&#]+/;class RZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pe]=new we(e,t)),r}parseSegment(){const e=cg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ld(ug(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=cg(this.remaining);i&&(r=i,this.capture(r))}e[ug(t)]=ug(r)}parseQueryParam(e){const t=function MZ(n){const e=n.match(xZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function NZ(n){const e=n.match(kZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=DL(t),s=DL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pe);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[pe]:new we([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class AL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cC(e,this._root).map(t=>t.value)}}function uC(n,e){if(n===e.value)return e;for(const t of e.children){const r=uC(n,t);if(r)return r}return null}function cC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cC(n,t);if(r.length)return r.unshift(e),r}return[]}class os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ql(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xL extends AL{constructor(e,t){super(e),this.snapshot=t,dC(this,e)}toString(){return this.snapshot.toString()}}function ML(n,e){const t=function PZ(n,e){const o=new dg([],{},{},"",{},pe,e,null,n.root,-1,{});return new NL("",new os(o,[]))}(n,e),r=new on([new ld("",{})]),i=new on({}),s=new on({}),o=new on({}),a=new on(""),l=new Go(r,i,o,a,s,pe,e,t.root);return l.snapshot=t.root,new xL(new os(l,[]),t)}class Go{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Re(e=>Kl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Re(e=>Kl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function OZ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dg{constructor(e,t,r,i,s,o,a,l,u,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._correctedLastPathIndex=h??c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class NL extends AL{constructor(e,t){super(t),this.url=e,dC(this,t)}toString(){return RL(this._root)}}function dC(n,e){e.value._routerState=n,e.children.forEach(t=>dC(n,t))}function RL(n){const e=n.children.length>0?` { ${n.children.map(RL).join(", ")} } `:"";return`${n.value}${e}`}function hC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),bi(e.params,t.params)||n.params.next(t.params),function _Z(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),bi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fC(n,e){const t=bi(n.params,e.params)&&function CZ(n,e){return Ho(n,e)&&n.every((t,r)=>bi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fC(n.parent,e.parent))}function cd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LZ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cd(n,r,i);return cd(n,r)})}(n,e,t);return new os(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cd(n,a)),o}}const r=function VZ(n){return new Go(new on(n.url),new on(n.params),new on(n.queryParams),new on(n.fragment),new on(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>cd(n,s));return new os(r,i)}}function hg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dd(n){return"object"==typeof n&&null!=n&&n.outlets}function pC(n,e,t,r,i){let s={};if(r&&ln(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(u=>`${u}`):`${a}`}),n===e)return new jo(t,s,i);const o=PL(n,e,t);return new jo(o,s,i)}function PL(n,e,t){const r={};return ln(n.children,(i,s)=>{r[s]=i===e?t:PL(i,e,t)}),new we(n.segments,r)}class OL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hg(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(dd);if(i&&i!==_L(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function FL(n,e,t){if(n||(n=new we([],{})),0===n.segments.length&&n.hasChildren())return fg(n,e,t);const r=function GZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(dd(a))break;const l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!VL(l,u,o))return s;r+=2}else{if(!VL(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new we(n.segments.slice(0,r.pathIndex),{});return s.children[pe]=new we(n.segments.slice(r.pathIndex),n.children),fg(s,0,i)}return r.match&&0===i.length?new we(n.segments,{}):r.match&&!n.hasChildren()?mC(n,e,t):r.match?fg(n,0,i):mC(n,e,t)}function fg(n,e,t){if(0===t.length)return new we(n.segments,{});{const r=function HZ(n){return dd(n[0])?n[0].outlets:{[pe]:n}}(t),i={};return ln(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=FL(n.children[o],e,s))}),ln(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new we(n.segments,i)}}function mC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(dd(s)){const l=WZ(s.outlets);return new we(r,l)}if(0===i&&hg(t[0])){r.push(new ld(n.segments[e].path,LL(t[0]))),i++;continue}const o=dd(s)?s.outlets[pe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&hg(a)?(r.push(new ld(o,LL(a))),i+=2):(r.push(new ld(o,{})),i++)}return new we(r,{})}function WZ(n){const e={};return ln(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mC(new we([],{}),0,t))}),e}function LL(n){const e={};return ln(n,(t,r)=>e[r]=`${t}`),e}function VL(n,e,t){return n==t.path&&bi(e,t.parameters)}class qZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hd,this.attachRef=null}}class hd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new qZ,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pg=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.name=i||pe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const i=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new zZ(t,a,i.injector);if(r&&function KZ(n){return!!n.resolveComponentFactory}(r)){const u=r.resolveComponentFactory(o);this.activated=i.createComponent(u,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(b(hd),b(ri),gc("name"),b($p),b(Ro))},n.\u0275dir=ee({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class zZ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Go?this.route:e===hd?this.childContexts:this.parent.get(e,t)}}let BL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Oe(0,"router-outlet")},dependencies:[pg],encapsulation:2}),n})();function UL(n,e){return n.providers&&!n._injector&&(n._injector=Rp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yC(n){const e=n.children&&n.children.map(yC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pe&&(t.component=BL),t}function Or(n){return n.outlet||pe}function $L(n,e){const t=n.filter(r=>Or(r)===e);return t.push(...n.filter(r=>Or(r)!==e)),t}function jL(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ZZ{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ql(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),ln(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ql(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dZ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(hC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=jL(i.snapshot),l=a?.get(Ul)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}function Vs(n){return"function"==typeof n}function Wo(n){return n instanceof jo}const fd=Symbol("INITIAL_VALUE");function pd(){return Bo(n=>oL(n.map(e=>e.pipe(el(1),function JX(...n){const e=sc(n);return Nt((t,r)=>{(e?tC(n,t,e):tC(n,t)).subscribe(r)})}(fd)))).pipe(cL((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==fd?i:(s===fd&&(r=!0),r||!1!==s&&o!==t.length-1&&!Wo(s)?i:s),e)},fd),Uo(e=>e!==fd),Re(e=>Wo(e)?e:!0===e),el(1)))}const HL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...HL}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mZ)(t,n,e);if(!i)return{...HL};const s={};ln(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mg(n,e,t,r,i="corrected"){if(t.length>0&&function aee(n,e,t){return t.some(r=>_g(n,e,r)&&Or(r)!==pe)}(n,t,r)){const o=new we(e,function oee(n,e,t,r){const i={};i[pe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Or(s)!==pe){const o=new we([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Or(s)]=o}return i}(n,e,r,new we(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function lee(n,e,t){return t.some(r=>_g(n,e,r))}(n,t,r)){const o=new we(n.segments,function see(n,e,t,r,i,s){const o={};for(const a of r)if(_g(n,t,a)&&!i[Or(a)]){const l=new we([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Or(a)]=l}return{...i,...o}}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new we(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function _g(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function GL(n,e,t,r){return!!(Or(n)===r||r!==pe&&_g(e,t,n))&&("**"===n.path||gg(e,n,t).matched)}function WL(n,e,t){return 0===e.length&&!n.children[t]}class yg{constructor(e){this.segmentGroup=e||null}}class qL{constructor(e){this.urlTree=e}}function gd(n){return id(new yg(n))}function zL(n){return id(new qL(n))}class hee{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=mg(this.urlTree.root,[],[],this.config).segmentGroup,t=new we(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,pe).pipe(Re(s=>this.createUrlTree(vC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ls(s=>{if(s instanceof qL)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof yg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,pe).pipe(Re(i=>this.createUrlTree(vC(i),e.queryParams,e.fragment))).pipe(Ls(i=>{throw i instanceof yg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new we([],{[pe]:e}):e;return new jo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Re(s=>new we([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Rt(i).pipe(od(s=>{const o=r.children[s],a=$L(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Re(l=>({segment:l,outlet:s})))}),cL((s,o)=>(s[o.outlet]=o.segment,s),{}),function eZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((i,s)=>n(i,s,r)):bo,rC(1),t?iC(e):dL(()=>new sd))}())}expandSegment(e,t,r,i,s,o){return Rt(r).pipe(od(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(Ls(u=>{if(u instanceof yg)return oe(null);throw u}))),$o(a=>!!a),Ls((a,l)=>{if(a instanceof sd||"EmptyError"===a.name)return WL(t,i,s)?oe(new we([],{})):gd(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return GL(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):gd(t):gd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zL(s):this.lineralizeSegments(r,s).pipe(sn(o=>{const a=new we(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:c}=gg(t,i,s);if(!a)return gd(t);const d=this.applyRedirectCommands(l,i.redirectTo,c);return i.redirectTo.startsWith("/")?zL(d):this.lineralizeSegments(i,d).pipe(sn(h=>this.expandSegment(e,t,r,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return e=UL(r,e),r.loadChildren?(r._loadedRoutes?oe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Re(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new we(i,{})))):oe(new we(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=gg(t,r,i);return o?(e=UL(r,e),this.getChildConfig(e,r,i).pipe(sn(c=>{const d=c.injector??e,h=c.routes,{segmentGroup:f,slicedSegments:p}=mg(t,a,l,h),g=new we(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(Re(y=>new we(a,y)));if(0===h.length&&0===p.length)return oe(new we(a,{}));const m=Or(r)===s;return this.expandSegment(d,g,h,p,m?pe:s,!0).pipe(Re(C=>new we(a.concat(C.segments),C.children)))}))):gd(t)}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe(sn(i=>i?this.configLoader.loadChildren(e,t).pipe(an(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function cee(n){return id(aC(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):oe({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?oe(i.map(o=>{const a=e.get(o);let l;if(function tee(n){return n&&Vs(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!Vs(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return oi(l)})).pipe(pd(),an(o=>{if(!Wo(o))return;const a=aC(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Re(o=>!0===o)):oe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return oe(r);if(i.numberOfChildren>1||!i.children[pe])return id(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[pe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new jo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ln(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return ln(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new we(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function vC(n){const e={};for(const r of Object.keys(n.children)){const s=vC(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function fee(n){if(1===n.numberOfChildren&&n.children[pe]){const e=n.children[pe];return new we(n.segments.concat(e.segments),e.children)}return n}(new we(n.segments,e))}class KL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vg{constructor(e,t){this.component=e,this.route=t}}function gee(n,e,t){const r=n._root;return md(r,e?e._root:null,t,[r.value])}function wg(n,e,t){return(jL(e)??t).get(n)}function md(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ql(e);return n.children.forEach(o=>{(function _ee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function yee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ho(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ho(n.url,e.url)||!bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fC(n,e)||!bi(n.queryParams,e.queryParams);default:return!fC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new KL(r)):(s.data=o.data,s._resolvedData=o._resolvedData),md(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vg(a.outlet.component,o))}else o&&_d(e,a,i),i.canActivateChecks.push(new KL(r)),md(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),ln(s,(o,a)=>_d(o,t.getContext(a),i)),i}function _d(n,e,t){const r=Ql(n),i=n.value;ln(r,(s,o)=>{_d(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new vg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class See{}function YL(n){return new rt(e=>e.error(n))}class xee{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=mg(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,pe);if(null===t)return null;const r=new dg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new os(r,t),s=new NL(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=kL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=$L(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=JL(r);return function Mee(n){n.sort((e,t)=>e.value.outlet===pe?-1:t.value.outlet===pe?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return WL(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!GL(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?_L(r).parameters:{},p=ZL(t)+r.length;s=new dg(r,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tV(e),Or(e),e.component??e._loadedComponent??null,e,XL(t),p,nV(e),p)}else{const f=gg(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments;const p=ZL(t)+o.length;s=new dg(o,f.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tV(e),Or(e),e.component??e._loadedComponent??null,e,XL(t),p,nV(e),p)}const l=function kee(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:u,slicedSegments:c}=mg(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const f=this.processChildren(l,u);return null===f?null:[new os(s,f)]}if(0===l.length&&0===c.length)return[new os(s,[])];const d=Or(e)===i,h=this.processSegment(l,u,c,d?pe:i);return null===h?null:[new os(s,h)]}}function Nee(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function JL(n){const e=[],t=new Set;for(const r of n){if(!Nee(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=JL(r.children);e.push(new os(r.value,i))}return e.filter(r=>!t.has(r))}function XL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ZL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tV(n){return n.data||{}}function nV(n){return n.resolve||{}}const wC=Symbol("RouteTitle");function rV(n){return"string"==typeof n.title||null===n.title}function EC(n){return Bo(e=>{const t=n(e);return t?Rt(t).pipe(Re(()=>e)):oe(e)})}class $ee extends class Uee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const CC=new K("ROUTES");let bC=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=oi(t.loadComponent()).pipe(an(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),sC(()=>{this.componentLoaders.delete(t)})),i=new uL(r,()=>new kt).pipe(nC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Re(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,u,c=!1;Array.isArray(a)?u=a:(l=a.create(t).injector,u=mL(l.get(CC,[],Q.Self|Q.Optional)));return{routes:u.map(yC),injector:l}}),sC(()=>{this.childrenLoaders.delete(r)})),o=new uL(s,()=>new kt).pipe(nC());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return oi(t()).pipe(sn(r=>r instanceof tO||Array.isArray(r)?oe(r):Rt(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(k(Lt),k(wE))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();class Hee{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Wee(n){throw n}function qee(n,e,t){return e.parse("/")}const zee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let un=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kt,this.errorHandler=Wee,this.malformedUriErrorHandler=qee,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>oe(void 0),this.urlHandlingStrategy=new Hee,this.routeReuseStrategy=new $ee,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(bC),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new uZ(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new lZ(h)),this.ngModule=o.get(Ps),this.console=o.get(Z9);const d=o.get(Le);this.isNgZoneEnabled=d instanceof Le&&Le.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function yZ(){return new jo(new we([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ML(this.currentUrlTree,this.rootComponentType),this.transitions=new on({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Uo(i=>0!==i.id),Re(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Bo(i=>{let s=!1,o=!1;return oe(i).pipe(an(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bo(a=>{const l=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return sV(a.source)&&(this.browserUrlTree=a.extractedUrl),oe(a).pipe(Bo(d=>{const h=this.transitions.getValue();return r.next(new oC(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?ji:Promise.resolve(d)}),function pee(n,e,t,r){return Bo(i=>function dee(n,e,t,r,i){return new hee(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Re(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),an(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects}}),function Ree(n,e,t,r,i){return sn(s=>function Aee(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new xee(n,e,t,r,i,s).recognize();return null===o?YL(new See):oe(o)}catch(o){return YL(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(Re(o=>({...s,targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),an(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new rZ(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=a,v=new oC(h,this.serializeUrl(f),p,g);r.next(v);const C=ML(f,this.rootComponentType).snapshot;return oe({...a,targetSnapshot:C,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),ji}),an(a=>{const l=new iZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Re(a=>({...a,guards:gee(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function vee(n,e){return sn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?oe({...t,guardsResult:!0}):function wee(n,e,t,r){return Rt(n).pipe(sn(i=>function Dee(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?oe(s.map(a=>{const l=wg(a,e,i);let u;if(function iee(n){return n&&Vs(n.canDeactivate)}(l))u=oi(l.canDeactivate(n,e,t,r));else{if(!Vs(l))throw new Error("Invalid CanDeactivate guard");u=oi(l(n,e,t,r))}return u.pipe($o())})).pipe(pd()):oe(!0)}(i.component,i.route,t,e,r)),$o(i=>!0!==i,!0))}(o,r,i,n).pipe(sn(a=>a&&function eee(n){return"boolean"==typeof n}(a)?function Eee(n,e,t,r){return Rt(e).pipe(od(i=>tC(function bee(n,e){return null!==n&&e&&e(new cZ(n)),oe(!0)}(i.route.parent,r),function Cee(n,e){return null!==n&&e&&e(new hZ(n)),oe(!0)}(i.route,r),function Iee(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function mee(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>lL(()=>oe(o.guards.map(l=>{const u=wg(l,o.node,t);let c;if(function ree(n){return n&&Vs(n.canActivateChild)}(u))c=oi(u.canActivateChild(r,n));else{if(!Vs(u))throw new Error("Invalid CanActivateChild guard");c=oi(u(r,n))}return c.pipe($o())})).pipe(pd())));return oe(s).pipe(pd())}(n,i.path,t),function Tee(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return oe(!0);const i=r.map(s=>lL(()=>{const o=wg(s,e,t);let a;if(function nee(n){return n&&Vs(n.canActivate)}(o))a=oi(o.canActivate(e,n));else{if(!Vs(o))throw new Error("Invalid CanActivate guard");a=oi(o(e,n))}return a.pipe($o())}));return oe(i).pipe(pd())}(n,i.route,t))),$o(i=>!0!==i,!0))}(r,s,n,e):oe(a)),Re(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),an(a=>{if(Wo(a.guardsResult)){const u=aC(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw u.url=a.guardsResult,u}const l=new sZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Uo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),EC(a=>{if(a.guards.canActivateChecks.length)return oe(a).pipe(an(l=>{const u=new oZ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),Bo(l=>{let u=!1;return oe(l).pipe(function Pee(n,e){return sn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let s=0;return Rt(i).pipe(od(o=>function Oee(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!rV(i)&&(s[wC]=i.title),function Fee(n,e,t,r){const i=function Lee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return oe({});const s={};return Rt(i).pipe(sn(o=>function Vee(n,e,t,r){const i=wg(n,e,r);return oi(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe($o(),an(a=>{s[o]=a}))),rC(1),function tZ(n){return Re(()=>n)}(s),Ls(o=>o instanceof sd?ji:id(o)))}(s,n,e,r).pipe(Re(o=>(n._resolvedData=o,n.data=kL(n,t).resolve,i&&rV(i)&&(n.data[wC]=i.title),null)))}(o.route,r,n,e)),an(()=>s++),rC(1),sn(o=>s===i.length?oe(t):ji))})}(this.paramsInheritanceStrategy,this.ngModule.injector),an({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),an(l=>{const u=new aZ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}))}),EC(()=>this.afterPreactivation()),EC(a=>{const l=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(an(d=>{u.component=d}),Re(()=>{})));for(const d of u.children)c.push(...l(d));return c};return oL(l(a.targetSnapshot.root)).pipe(iC(),el(1))}),Re(a=>{const l=function FZ(n,e,t){const r=cd(n,e._root,t?t._root:void 0);return new xL(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return{...a,targetRouterState:l}}),an(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Re(r=>(new ZZ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),an({next(){s=!0},complete(){s=!0}}),sC(()=>{s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ls(a=>{if(o=!0,function gZ(n){return n&&n[pL]}(a)){const l=Wo(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const u=new hL(i.id,this.serializeUrl(i.extractedUrl),a.message);if(r.next(u),l){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sV(i.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new nZ(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(u){i.reject(u)}}return ji}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(yC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=i||this.routerState.root,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function BZ(n,e,t,r,i){if(0===t.length)return pC(e.root,e.root,e.root,r,i);const s=function UZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new OL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ln(s.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new OL(t,e,r)}(t);return s.toRoot()?pC(e.root,e.root,new we([],{}),r,i):function o(l){const u=function $Z(n,e,t,r){return n.isAbsolute?new gC(e.root,!0,0):-1===r?new gC(t,t===e.root,0):function jZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new gC(r,!1,i-s)}(t,r+(hg(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),c=u.processChildren?fg(u.segmentGroup,u.index,s.commands):FL(u.segmentGroup,u.index,s.commands);return pC(e.root,u.segmentGroup,c,r,i)}(n.snapshot?._lastPathIndex)}(u,this.currentUrlTree,t,d,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Qee(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...zee}:!1===r?{...Kee}:r,Wo(t))return vL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return vL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ad(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,f)=>{a=h,l=f});const c=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:c,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new hL(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){dw()},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();function sV(n){return"imperative"!==n}let yd=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new kt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ns(this.skipLocationChange),replaceUrl:ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ns(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(un),b(Go),gc("tabindex"),b(Xi),b(_r))},n.\u0275dir=ee({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&be("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Ar]}),n})();class oV{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===pe);return t}getResolvedTitleForRoute(e){return e.data[wC]}}let Xee=(()=>{class n extends oV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(k(JF))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aV{}class lV{preload(e,t){return oe(null)}}let uV=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Uo(t=>t instanceof ad),od(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Rp(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Rt(i).pipe(Za())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):oe(null);const s=i.pipe(sn(o=>null===o?oe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Rt([s,this.loader.loadComponent(r)]).pipe(Za()):s})}}return n.\u0275fac=function(t){return new(t||n)(k(un),k(wE),k(Ro),k(aV),k(bC))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),IC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ad&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){dw()},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();const qo=new K("ROUTER_CONFIGURATION"),cV=new K("ROUTER_FORROOT_GUARD"),ete=[PE,{provide:bL,useClass:TL},{provide:un,useFactory:function ste(n,e,t,r,i,s,o={},a,l,u,c){const d=new un(null,n,e,t,r,i,mL(s));return u&&(d.urlHandlingStrategy=u),c&&(d.routeReuseStrategy=c),d.titleStrategy=l??a,function ote(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,d),d},deps:[bL,hd,PE,Lt,wE,CC,qo,Xee,[oV,new st],[class jee{},new st],[class Bee{},new st]]},hd,{provide:Go,useFactory:function ate(n){return n.routerState.root},deps:[un]},uV,lV,class Zee{preload(e,t){return t().pipe(Ls(()=>oe(null)))}},{provide:qo,useValue:{enableTracing:!1}},bC];function tte(){return new qO("Router",un)}let Yl=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ete,dV(t),{provide:cV,useFactory:ite,deps:[[un,new st,new Cc]]},{provide:qo,useValue:r||{}},{provide:zl,useFactory:rte,deps:[Jc,[new sp(RE),new st],qo]},{provide:IC,useFactory:nte,deps:[un,iX,qo]},{provide:aV,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:lV},{provide:qO,multi:!0,useFactory:tte},[DC,{provide:yE,multi:!0,useFactory:lte,deps:[DC]},{provide:hV,useFactory:ute,deps:[DC]},{provide:BO,multi:!0,useExisting:hV}]]}}static forChild(t){return{ngModule:n,providers:[dV(t)]}}}return n.\u0275fac=function(t){return new(t||n)(k(cV,8),k(un,8))},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({}),n})();function nte(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new IC(n,e,t)}function rte(n,e,t={}){return t.useHash?new jY(n,e):new gF(n,e)}function ite(n){return"guarded"}function dV(n){return[{provide:yK,multi:!0,useValue:n},{provide:CC,multi:!0,useValue:n}]}let DC=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new kt}appInitializer(){return this.injector.get(BY,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(un),o=this.injector.get(qo);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===o.initialNavigation?(s.afterPreactivation=()=>this.initNavigation?oe(void 0):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(qo),i=this.injector.get(uV),s=this.injector.get(IC),o=this.injector.get(un),a=this.injector.get(ql);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(k(Lt))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();function lte(n){return n.appInitializer.bind(n)}function ute(n){return n.bootstrapListener.bind(n)}const hV=new K("Router Initializer");let fV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(b(Xi),b(_r))},n.\u0275dir=ee({type:n}),n})(),zo=(()=>{class n extends fV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275dir=ee({type:n,features:[Pe]}),n})();const Ti=new K("NgValueAccessor"),fte={provide:Ti,useExisting:We(()=>Jl),multi:!0},gte=new K("CompositionEventMode");let Jl=(()=>{class n extends fV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pte(){const n=Ci()?Ci().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(b(Xi),b(_r),b(gte,8))},n.\u0275dir=ee({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&be("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Xe([fte]),Pe]}),n})();function Bs(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function gV(n){return null!=n&&"number"==typeof n.length}const Sn=new K("NgValidators"),Us=new K("NgAsyncValidators"),mte=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fr{static min(e){return function mV(n){return e=>{if(Bs(e.value)||Bs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function _V(n){return e=>{if(Bs(e.value)||Bs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function yV(n){return Bs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function vV(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wV(n){return Bs(n.value)||mte.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function EV(n){return e=>Bs(e.value)||!gV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function CV(n){return e=>gV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function bV(n){if(!n)return Eg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bs(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return xV(e)}static composeAsync(e){return MV(e)}}function Eg(n){return null}function TV(n){return null!=n}function IV(n){const e=Lc(n)?Rt(n):n;return Uw(e),e}function DV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function SV(n,e){return e.map(t=>t(n))}function AV(n){return n.map(e=>function _te(n){return!n.validate}(e)?e:t=>e.validate(t))}function xV(n){if(!n)return null;const e=n.filter(TV);return 0==e.length?null:function(t){return DV(SV(t,e))}}function SC(n){return null!=n?xV(AV(n)):null}function MV(n){if(!n)return null;const e=n.filter(TV);return 0==e.length?null:function(t){return function dte(...n){const e=Ck(n),{args:t,keys:r}=rL(n),i=new rt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,u=o;for(let c=0;c<o;c++){let d=!1;Wr(t[c]).subscribe(Et(s,h=>{d||(d=!0,u--),a[c]=h},()=>l--,void 0,()=>{(!l||!d)&&(u||s.next(r?sL(r,a):a),s.complete())}))}});return e?i.pipe(iL(e)):i}(SV(t,e).map(IV)).pipe(Re(DV))}}function AC(n){return null!=n?MV(AV(n)):null}function kV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NV(n){return n._rawValidators}function RV(n){return n._rawAsyncValidators}function xC(n){return n?Array.isArray(n)?n:[n]:[]}function Cg(n,e){return Array.isArray(n)?n.includes(e):n===e}function PV(n,e){const t=xC(e);return xC(n).forEach(i=>{Cg(t,i)||t.push(i)}),t}function OV(n,e){return xC(e).filter(t=>!Cg(n,t))}class FV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jn extends FV{get formDirective(){return null}get path(){return null}}class $s extends FV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class LV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bg=(()=>{class n extends LV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(b($s,2))},n.\u0275dir=ee({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Ip("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pe]}),n})(),MC=(()=>{class n extends LV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(b(jn,10))},n.\u0275dir=ee({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Ip("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),n})();const vd="VALID",Ig="INVALID",Xl="PENDING",wd="DISABLED";function PC(n){return(Dg(n)?n.validators:n)||null}function BV(n){return Array.isArray(n)?SC(n):n||null}function OC(n,e){return(Dg(e)?e.asyncValidators:n)||null}function UV(n){return Array.isArray(n)?AC(n):n||null}function Dg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=BV(this._rawValidators),this._composedAsyncValidatorFn=UV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vd}get invalid(){return this.status===Ig}get pending(){return this.status==Xl}get disabled(){return this.status===wd}get enabled(){return this.status!==wd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=BV(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=UV(e)}addValidators(e){this.setValidators(PV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OV(e,this._rawAsyncValidators))}hasValidator(e){return Cg(this._rawValidators,e)}hasAsyncValidator(e){return Cg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vd||this.status===Xl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wd:vd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xl,this._hasOwnPendingAsyncValidator=!0;const t=IV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?wd:this.errors?Ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xl)?Xl:this._anyControlsHaveStatus(Ig)?Ig:vd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ed extends HV{constructor(e,t,r){super(PC(t),OC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function jV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new L(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function $V(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[t])throw new L(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Cd(n,e){FC(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Dte(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GV(n,e)})}(n,e),function Ate(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ste(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ite(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ag(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Mg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function FC(n,e){const t=NV(n);null!==e.validator?n.setValidators(kV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=RV(n);null!==e.asyncValidator?n.setAsyncValidators(kV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();xg(e._rawValidators,i),xg(e._rawAsyncValidators,i)}function Mg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=NV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=RV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return xg(e._rawValidators,r),xg(e._rawAsyncValidators,r),t}function GV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function VC(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Jl?t=s:function kte(n){return Object.getPrototypeOf(n.constructor)===zo}(s)?r=s:i=s}),i||r||t||null}function KV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const An=class extends HV{constructor(e=null,t,r){super(PC(t),OC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let UC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),t2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({}),n})();const $C=new K("NgModelWithFormControlWarning"),$te={provide:$s,useExisting:We(()=>jC)};let jC=(()=>{class n extends $s{constructor(t,r,i,s){super(),this._ngModelWarningConfig=s,this.update=new pt,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=VC(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&Ag(r,this,!1),Cd(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}LC(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ag(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(b(Sn,10),b(Us,10),b(Ti,10),b($C,8))},n.\u0275dir=ee({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Xe([$te]),Pe,Ar]}),n})();const jte={provide:jn,useExisting:We(()=>Td)};let Td=(()=>{class n extends jn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Cd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ag(t.control||null,t,!1),function Nte(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function zV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ag(r||null,t),(n=>n instanceof An)(i)&&(Cd(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function WV(n,e){FC(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xte(n,e){return Mg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FC(this.form,this),this._oldForm&&Mg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(b(Sn,10),b(Us,10))},n.\u0275dir=ee({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&be("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xe([jte]),Pe,Ar]}),n})();const Wte={provide:$s,useExisting:We(()=>kg)};let kg=(()=>{class n extends $s{constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new pt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VC(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),LC(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Sg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(b(jn,13),b(Sn,10),b(Us,10),b(Ti,10),b($C,8))},n.\u0275dir=ee({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Xe([Wte]),Pe,Ar]}),n})();const qte={provide:Ti,useExisting:We(()=>Id),multi:!0};function s2(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Id=(()=>{class n extends zo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=s2(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function zte(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&be("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xe([qte]),Pe]}),n})(),WC=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(s2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(b(_r),b(Xi),b(Id,9))},n.\u0275dir=ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Kte={provide:Ti,useExisting:We(()=>qC),multi:!0};function o2(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let qC=(()=>{class n extends zo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Qte(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&be("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xe([Kte]),Pe]}),n})(),zC=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(o2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(o2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(b(_r),b(Xi),b(qC,9))},n.\u0275dir=ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[t2]}),n})(),ine=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[m2]}),n})(),_2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$C,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[m2]}),n})(),Qo=(()=>{class n{constructor(){this.weaponsList$=new on({}),this.weaponList=[],this.idCounter=this.weaponList.length+1,this.sheet$=new on({id:""}),this.id$=new on(""),this.player$=new on({origin:"Central Plaza"}),this.attributes$=new on(null),this.history$=new on("")}completeService(){this.weaponsList$&&this.weaponsList$.complete(),this.sheet$&&this.sheet$.complete()}change(t){this.weaponsList$.next(t)}addWeapon(t){this.weaponList.push({id:this.idCounter,...t}),this.idCounter+=1}removeWeapon(t){this.weaponList=this.weaponList.filter(function(r){return r?.id!==t})}get weaponsList(){return this.weaponList}changeSheet(t){t?.player&&(this.player$.next(t.player),this.id$.next(t?.id),this.attributes$.next(t?.attributes),this.history$.next(t?.history))}get characterSheet(){return this.sheet$}changeID(t){this.id$.next(t)}get id(){return this.id$}changePlayer(t){this.player$.next(t)}get player(){return this.player$}changeAttributes(t){this.attributes$.next(t)}get attributes(){return this.attributes$}changeHistory(t){this.history$.next(t)}get history(){return this.history$}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ane=(()=>{class n{constructor(t,r,i){this.router=t,this.activeRoute=r,this.utilService=i,this.weaponForm=new Ed({name:new An("",Fr.required),url:new An(""),description:new An("",Fr.required),type:new An("melee-light",Fr.required),class:new An("d",Fr.required)})}add(){this.weaponForm.valid&&(this.utilService.addWeapon(this.weaponForm.value),this.router.navigate(["."],{relativeTo:this.activeRoute.parent}))}}return n.\u0275fac=function(t){return new(t||n)(b(un),b(Go),b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-weapon-page"]],decls:50,vars:1,consts:[[1,"flex","flex-column","container","m-auto","min-h-80"],[1,"font-size-title"],[1,"flex","flex-column","gap1","flex-fill","mt1","font-size-sm",3,"formGroup"],[1,""],["for","name"],[1,"search-container","mt025"],["id","name","formControlName","name","type","text","placeholder","Nome",1,"w-100"],["for","url"],["id","url","formControlName","url","type","text","placeholder","URL da imagem",1,"w-100"],["for","description"],["id","description","formControlName","description","type","text","placeholder","Descri\xe7\xe3o",1,"w-100"],[1,"flex","align-center","justify-between"],["name","weaponType","formControlName","type"],["value","melee-light"],["value","melee-heavy"],["value","pistol"],["value","shotgun"],["value","machine-gun"],["for","damage"],["name","weaponClass","formControlName","class"],["value","d"],["value","c"],["value","b"],["value","a"],[1,"flex","justify-end","gap1"],["routerLink","..",1,"btn-back"],["type","submit",1,"btn-add",3,"click"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"h2",1),M(2,"Cria\xe7\xe3o de equipamento:"),I(),T(3,"form",2)(4,"div",3)(5,"label",4),M(6,"Nome do equipamento: "),I(),T(7,"div",5),Oe(8,"input",6),I()(),T(9,"div",3)(10,"label",7),M(11,"URL da imagem do equipamento: "),I(),T(12,"div",5),Oe(13,"input",8),I()(),T(14,"div",3)(15,"label",9),M(16,"Descri\xe7\xe3o do equipamento: "),I(),T(17,"div",5),Oe(18,"input",10),I()(),T(19,"div",11)(20,"label",9),M(21,"Tipo do equipamento: "),I(),T(22,"select",12)(23,"option",13),M(24,"Melee Leve"),I(),T(25,"option",14),M(26,"Melee Pesada"),I(),T(27,"option",15),M(28,"Pistola"),I(),T(29,"option",16),M(30,"Fuzil"),I(),T(31,"option",17),M(32,"Metralhadora"),I()()(),T(33,"div",11)(34,"label",18),M(35,"Classe do equipamento: "),I(),T(36,"select",19)(37,"option",20),M(38,"+D"),I(),T(39,"option",21),M(40,"+C"),I(),T(41,"option",22),M(42,"+B"),I(),T(43,"option",23),M(44,"+A"),I()()(),T(45,"div",24)(46,"button",25),M(47,"Voltar"),I(),T(48,"button",26),be("click",function(){return r.add()}),M(49,"Adicionar"),I()()()()),2&t&&(q(3),_e("formGroup",r.weaponForm))},dependencies:[UC,WC,zC,Jl,Id,bg,MC,Td,kg,yd],styles:["[_ngcontent-%COMP%]:root, html[data-theme=light][_ngcontent-%COMP%]{--background-color: #f4f4f4;--background-input: #ffffff;--background-accent: #000c66;--text-color: #121218;--subtext-color: #00000080;--text-accent-color: #ffffff;--card-shadow: rgba(0, 0, 0, 25%)}html[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1d1d1d;--background-input: #313131;--background-accent: #000630;--text-color: #ececec;--subtext-color: #ffffff80;--text-accent-color: #f3f3f3;--card-shadow: rgba(255, 255, 255, 25%)}.background-color[_ngcontent-%COMP%]{background-color:var(--background-color)}.background-accent[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{background-color:var(--background-accent)}.text-color[_ngcontent-%COMP%]{color:var(--text-color)!important}.subtext-color[_ngcontent-%COMP%]{color:var(--subtext-color)!important}.text-accent-color[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{color:var(--text-accent-color)}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px 4px var(--card-shadow)}.search-container[_ngcontent-%COMP%]{background-color:var(--background-input);display:flex;align-items:center;border-bottom:1px solid red;transition:.05s;border-radius:6px;max-height:2.8rem;width:100%;border:1px solid rgba(14,14,14,.1215686275)}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#535353a3;opacity:1;font-size:12px}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;color:var(--text-color);padding:.5rem;border:none;background-color:transparent}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.search-container[_ngcontent-%COMP%]:focus-within{outline:1px solid var(--background-accent)}.container[_ngcontent-%COMP%]{max-width:500px}select[_ngcontent-%COMP%]{background:var(--background-input);color:var(--text-color);border:1px solid rgba(14,14,14,.1215686275);padding:4px;border-radius:3px}"]}),n})();function y2(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(u){return void t(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function _(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){y2(s,r,i,o,a,"next",l)}function a(l){y2(s,r,i,o,a,"throw",l)}o(void 0)})}}function QC(n){return Nt((e,t)=>{Wr(n).subscribe(Et(t,()=>t.complete(),Py)),!t.closed&&e.subscribe(t)})}const P=function(n,e){if(!n)throw Zl(e)},Zl=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},v2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Ng={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0;let h=(15&a)<<2|u>>6,f=63&u;l||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(v2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==u||null==d)throw Error();r.push(s<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},w2=function(n){const e=v2(n);return Ng.encodeByteArray(e,!0)},Rg=function(n){return w2(n).replace(/\./g,"")},JC=function(n){try{return Ng.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function une(n){return E2(void 0,n)}function E2(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!cne(t)||(n[t]=E2(n[t],e[t]));return n}function cne(n){return"__proto__"!==n}class Dd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function yr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yr())}function Og(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function XC(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Yo(){return"object"==typeof indexedDB}function Sd(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function ZC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ls extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ii.prototype.create)}}class Ii{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function mne(n,e){return n.replace(_ne,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new ls(i,`${this.serviceName}: ${o} (${i}).`,r)}}const _ne=/\{\$([^}]+)}/g;function Ad(n){return JSON.parse(n)}function cn(n){return JSON.stringify(n)}const Fg=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=Ad(JC(s[0])||""),t=Ad(JC(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function us(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function eu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function C2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lg(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function eb(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(b2(s)&&b2(o)){if(!eb(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function b2(n){return null!==n&&"object"==typeof n}function tb(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class wne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let u,c,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class Cne{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function bne(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=nb),void 0===i.error&&(i.error=nb),void 0===i.complete&&(i.complete=nb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nb(){}const Bg=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function rb(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function xn(n){return n&&n._delegate?n._delegate:n}class dn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jo="[DEFAULT]";class Mne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Dd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Nne(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Jo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Jo){return this.instances.has(e)}getOptions(e=Jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Jo?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Jo){return this.component?this.component.multipleInstances?e:Jo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ib=[];var Ee=(()=>{return(n=Ee||(Ee={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Ee;var n})();const T2={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Pne=Ee.INFO,One={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Fne=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=One[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Xo{constructor(e){this.name=e,this._logLevel=Pne,this._logHandler=Fne,this._userLogHandler=null,ib.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?T2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}let I2,D2;const S2=new WeakMap,sb=new WeakMap,A2=new WeakMap,ob=new WeakMap,ab=new WeakMap;let lb={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return sb.get(n);if("objectStoreNames"===e)return n.objectStoreNames||A2.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Gne(n){return"function"==typeof n?function Hne(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Bne(){return D2||(D2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ub(this),e),cs(S2.get(this))}:function(...e){return cs(n.apply(ub(this),e))}:function(e,...t){const r=n.call(ub(this),e,...t);return A2.set(r,e.sort?e.sort():[e]),cs(r)}}(n):(n instanceof IDBTransaction&&function $ne(n){if(sb.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});sb.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Vne(){return I2||(I2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,lb):n)}function cs(n){if(n instanceof IDBRequest)return function Une(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(cs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&S2.set(t,n)}).catch(()=>{}),ab.set(e,n),e}(n);if(ob.has(n))return ob.get(n);const e=Gne(n);return e!==n&&(ob.set(n,e),ab.set(e,n)),e}const ub=n=>ab.get(n);function Ug(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cs(o.result),l.oldVersion,l.newVersion,cs(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function cb(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),cs(t).then(()=>{})}const Wne=["get","getKey","getAll","getAllKeys","count"],qne=["put","add","delete","clear"],db=new Map;function x2(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(db.get(e))return db.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=qne.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Wne.includes(t))return;const s=function(){var o=_(function*(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(yield Promise.all([c[t](...l),i&&u.done]))[0]});return function(l){return o.apply(this,arguments)}}();return db.set(e,s),s}!function jne(n){lb=n(lb)}(n=>({...n,get:(e,t,r)=>x2(e,t)||n.get(e,t,r),has:(e,t)=>!!x2(e,t)||n.has(e,t)}));class zne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Kne(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const hb="@firebase/app",fb=new Xo("@firebase/app"),pb="[DEFAULT]",wre={[hb]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zo=new Map,$g=new Map;function Ere(n,e){try{n.container.addComponent(e)}catch(t){fb.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mn(n){const e=n.name;if($g.has(e))return fb.debug(`There were multiple attempts to register component ${e}.`),!1;$g.set(e,n);for(const t of Zo.values())Ere(t,n);return!0}function xd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const js=new Ii("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class bre{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}function Tre(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:pb,automaticDataCollectionEnabled:!1},e),r=t.name;if("string"!=typeof r||!r)throw js.create("bad-app-name",{appName:String(r)});const i=Zo.get(r);if(i){if(eb(n,i.options)&&eb(t,i.config))return i;throw js.create("duplicate-app",{appName:r})}const s=new Rne(r);for(const a of $g.values())s.addComponent(a);const o=new bre(n,t,s);return Zo.set(r,o),o}function gb(n=pb){const e=Zo.get(n);if(!e)throw js.create("no-app",{appName:n});return e}function k2(){return Array.from(Zo.values())}function Ze(n,e,t){var r;let i=null!==(r=wre[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void fb.warn(a.join(" "))}Mn(new dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const kd="firebase-heartbeat-store";let _b=null;function N2(){return _b||(_b=Ug("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(kd)}}).catch(n=>{throw js.create("storage-open",{originalErrorMessage:n.message})})),_b}function yb(){return(yb=_(function*(n){var e;try{return(yield N2()).transaction(kd).objectStore(kd).get(P2(n))}catch(t){throw js.create("storage-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function R2(n,e){return vb.apply(this,arguments)}function vb(){return(vb=_(function*(n,e){var t;try{const i=(yield N2()).transaction(kd,"readwrite");return yield i.objectStore(kd).put(e,P2(n)),i.done}catch(r){throw js.create("storage-set",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message})}})).apply(this,arguments)}function P2(n){return`${n.name}!${n.options.appId}`}class Mre{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Nre(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=O2();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=O2(),{heartbeatsToSend:r,unsentEntries:i}=function kre(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),F2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),F2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Rg(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function O2(){return(new Date).toISOString().substring(0,10)}class Nre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!Yo()&&Sd().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Sre(n){return yb.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return R2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return R2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function F2(n){return Rg(JSON.stringify({version:2,heartbeats:n})).length}!function Rre(n){Mn(new dn("platform-logger",e=>new zne(e),"PRIVATE")),Mn(new dn("heartbeat",e=>new Mre(e),"PRIVATE")),Ze(hb,"0.7.27",n),Ze(hb,"0.7.27","esm2017"),Ze("fire-js","")}(""),Ze("firebase","9.8.4","app");const L2="@firebase/installations",wb="0.5.11",B2=`w:${wb}`,U2="FIS_v2",ds=new Ii("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $2(n){return n instanceof ls&&n.code.includes("request-failed")}function Eb({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function j2(n){return{token:n.token,requestStatus:2,expiresIn:$re(n.expiresIn),creationTime:Date.now()}}function Cb(n,e){return bb.apply(this,arguments)}function bb(){return(bb=_(function*(n,e){const r=(yield e.json()).error;return ds.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function H2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function G2(n,{refreshToken:e}){const t=H2(n);return t.append("Authorization",function jre(n){return`${U2} ${n}`}(e)),t}function Tb(n){return Ib.apply(this,arguments)}function Ib(){return(Ib=_(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function $re(n){return Number(n.replace("s","000"))}function Hre(n,e){return Db.apply(this,arguments)}function Db(){return(Db=_(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Eb(n),i=H2(n),s=e.getImmediate({optional:!0});if(s){const u=yield s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:U2,appId:n.appId,sdkVersion:B2})},l=yield Tb(()=>fetch(r,a));if(l.ok){const u=yield l.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:j2(u.authToken)}}throw yield Cb("Create Installation",l)})).apply(this,arguments)}function W2(n){return new Promise(e=>{setTimeout(e,n)})}const Wre=/^[cdef][\w-]{21}$/;function qre(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function zre(n){return function Gre(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Wre.test(t)?t:""}catch{return""}}function tu(n){return`${n.appName}!${n.appId}`}const nu=new Map;function q2(n,e){const t=tu(n);z2(t,e),function Yre(n,e){const t=function K2(){return!ea&&"BroadcastChannel"in self&&(ea=new BroadcastChannel("[Firebase] FID Change"),ea.onmessage=n=>{z2(n.data.key,n.data.fid)}),ea}();t&&t.postMessage({key:n,fid:e}),function Q2(){0===nu.size&&ea&&(ea.close(),ea=null)}()}(t,e)}function z2(n,e){const t=nu.get(n);if(t)for(const r of t)r(e)}let ea=null;const ta="firebase-installations-store";let Ab=null;function xb(){return Ab||(Ab=Ug("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ta)}})),Ab}function jg(n,e){return Mb.apply(this,arguments)}function Mb(){return(Mb=_(function*(n,e){const t=tu(n),i=(yield xb()).transaction(ta,"readwrite"),s=i.objectStore(ta),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&q2(n,e.fid),e})).apply(this,arguments)}function kb(n){return Nb.apply(this,arguments)}function Nb(){return(Nb=_(function*(n){const e=tu(n),r=(yield xb()).transaction(ta,"readwrite");yield r.objectStore(ta).delete(e),yield r.done})).apply(this,arguments)}function Nd(n,e){return Rb.apply(this,arguments)}function Rb(){return(Rb=_(function*(n,e){const t=tu(n),i=(yield xb()).transaction(ta,"readwrite"),s=i.objectStore(ta),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&q2(n,a.fid),a})).apply(this,arguments)}function Pb(n){return Ob.apply(this,arguments)}function Ob(){return(Ob=_(function*(n){let e;const t=yield Nd(n.appConfig,r=>{const i=Zre(r),s=eie(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function Zre(n){return J2(n||{fid:qre(),registrationStatus:0})}function eie(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ds.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function tie(n,e){return Fb.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:nie(n)}:{installationEntry:e}}function Fb(){return(Fb=_(function*(n,e){try{const t=yield Hre(n,e);return jg(n.appConfig,t)}catch(t){throw $2(t)&&409===t.customData.serverCode?yield kb(n.appConfig):yield jg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function nie(n){return Lb.apply(this,arguments)}function Lb(){return(Lb=_(function*(n){let e=yield Y2(n.appConfig);for(;1===e.registrationStatus;)yield W2(100),e=yield Y2(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Pb(n);return r||t}return e})).apply(this,arguments)}function Y2(n){return Nd(n,e=>{if(!e)throw ds.create("installation-not-found");return J2(e)})}function J2(n){return function rie(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function iie(n,e){return Vb.apply(this,arguments)}function Vb(){return(Vb=_(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=sie(n,t),i=G2(n,t),s=e.getImmediate({optional:!0});if(s){const u=yield s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:B2,appId:n.appId}})},l=yield Tb(()=>fetch(r,a));if(l.ok)return j2(yield l.json());throw yield Cb("Generate Auth Token",l)})).apply(this,arguments)}function sie(n,{fid:e}){return`${Eb(n)}/${e}/authTokens:generate`}function Bb(n){return Ub.apply(this,arguments)}function Ub(){return(Ub=_(function*(n,e=!1){let t;const r=yield Nd(n.appConfig,s=>{if(!Z2(s))throw ds.create("not-registered");const o=s.authToken;if(!e&&lie(o))return s;if(1===o.requestStatus)return t=oie(n,e),s;{if(!navigator.onLine)throw ds.create("app-offline");const a=cie(s);return t=aie(n,a),a}});return t?yield t:r.authToken})).apply(this,arguments)}function oie(n,e){return $b.apply(this,arguments)}function $b(){return($b=_(function*(n,e){let t=yield X2(n.appConfig);for(;1===t.authToken.requestStatus;)yield W2(100),t=yield X2(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Bb(n,e):r})).apply(this,arguments)}function X2(n){return Nd(n,e=>{if(!Z2(e))throw ds.create("not-registered");return function die(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function aie(n,e){return jb.apply(this,arguments)}function jb(){return(jb=_(function*(n,e){try{const t=yield iie(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield jg(n.appConfig,r),t}catch(t){if(!$2(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield jg(n.appConfig,r)}else yield kb(n.appConfig);throw t}})).apply(this,arguments)}function Z2(n){return void 0!==n&&2===n.registrationStatus}function lie(n){return 2===n.requestStatus&&!function uie(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function cie(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Hb(){return(Hb=_(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Pb(e);return r?r.catch(console.error):Bb(e).catch(console.error),t.fid})).apply(this,arguments)}function Gb(){return(Gb=_(function*(n,e=!1){const t=n;return yield pie(t),(yield Bb(t,e)).token})).apply(this,arguments)}function pie(n){return Wb.apply(this,arguments)}function Wb(){return(Wb=_(function*(n){const{registrationPromise:e}=yield Pb(n);e&&(yield e)})).apply(this,arguments)}function Kb(n){return ds.create("missing-app-config-values",{valueName:n})}const eB="installations",vie=n=>{const e=n.getProvider("app").getImmediate(),t=function _ie(n){if(!n||!n.options)throw Kb("App Configuration");if(!n.name)throw Kb("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Kb(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:xd(e,"heartbeat"),_delete:()=>Promise.resolve()}},wie=n=>{const t=xd(n.getProvider("app").getImmediate(),eB).getImmediate();return{getId:()=>function hie(n){return Hb.apply(this,arguments)}(t),getToken:i=>function fie(n){return Gb.apply(this,arguments)}(t,i)}};(function Eie(){Mn(new dn(eB,vie,"PUBLIC")),Mn(new dn("installations-internal",wie,"PRIVATE"))})(),Ze(L2,wb),Ze(L2,wb,"esm2017");const Qb="@firebase/remote-config",Zn=new Ii("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nie{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return _(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Rie(n=navigator){return n.languages&&n.languages[0]||n.language}class Pie{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return _(function*(){var r,i,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:Rie()},h={method:"POST",headers:c,body:JSON.stringify(d)},f=fetch(u,h),p=new Promise((D,F)=>{e.signal.addEventListener(()=>{const j=new Error("The operation was aborted.");j.name="AbortError",F(j)})});let g;try{yield Promise.race([f,p]),g=yield f}catch(D){let F="fetch-client-network";throw"AbortError"===(null===(r=D)||void 0===r?void 0:r.name)&&(F="fetch-timeout"),Zn.create(F,{originalErrorMessage:null===(i=D)||void 0===i?void 0:i.message})}let m=g.status;const v=g.headers.get("ETag")||void 0;let C,y;if(200===g.status){let D;try{D=yield g.json()}catch(F){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(s=F)||void 0===s?void 0:s.message})}C=D.entries,y=D.state}if("INSTANCE_STATE_UNSPECIFIED"===y?m=500:"NO_CHANGE"===y?m=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(C={}),304!==m&&200!==m)throw Zn.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:C}})()}}class Lie{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return _(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return _(function*(){yield function Oie(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Fie(n){if(!(n instanceof ls&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+rb(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Uie{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gg(n,e){var t;const r=n.target.error||void 0;return Zn.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const na="app_namespace_store";class Gie{constructor(e,t,r,i=function Hie(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(Gg(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(na,{keyPath:"compositeKey"})}}catch(r){e(Zn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([na],"readonly").objectStore(na),u=t.createCompositeKey(e);try{const c=l.get(u);c.onerror=d=>{s(Gg(d,"storage-get"))},c.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(c){s(Zn.create("storage-get",{originalErrorMessage:null===(o=c)||void 0===o?void 0:o.message}))}})})()}set(e,t){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const u=i.transaction([na],"readwrite").objectStore(na),c=r.createCompositeKey(e);try{const d=u.put({compositeKey:c,value:t});d.onerror=h=>{o(Gg(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(Zn.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([na],"readwrite").objectStore(na),u=t.createCompositeKey(e);try{const c=l.delete(u);c.onerror=d=>{s(Gg(d,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Zn.create("storage-delete",{originalErrorMessage:null===(o=c)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Wie{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function zie(){return eT.apply(this,arguments)}function eT(){return(eT=_(function*(){if(!Yo())return!1;try{return yield Sd()}catch{return!1}})).apply(this,arguments)}!function qie(){Mn(new dn("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!Yo())throw Zn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Zn.create("registration-project-id");if(!o)throw Zn.create("registration-api-key");if(!a)throw Zn.create("registration-app-id");const l=new Gie(a,r.name,t=t||"firebase"),u=new Wie(l),c=new Xo(Qb);c.logLevel=Ee.ERROR;const d=new Pie(i,"9.8.4",t,s,o,a),h=new Lie(d,l),f=new Nie(h,l,u,c),p=new Uie(r,f,u,l,c);return function xie(n){const e=xn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ze(Qb,"0.3.10"),Ze(Qb,"0.3.10","esm2017")}();const Kie="/firebase-messaging-sw.js",Qie="/firebase-cloud-messaging-push-scope",iB="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sB="google.c.a.c_id",Jie="google.c.a.c_l",Xie="google.c.a.ts",Zie="google.c.a.e";var ru=(()=>{return(n=ru||(ru={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",ru;var n})();function hs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ese(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const tT="fcm_token_details_db",oB="fcm_token_object_Store";function nse(n){return nT.apply(this,arguments)}function nT(){return nT=_(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(tT))return null;let e=null;return(yield Ug(tT,5,{upgrade:(r=_(function*(i,s,o,a){var l;if(s<2||!i.objectStoreNames.contains(oB))return;const u=a.objectStore(oB),c=yield u.index("fcmSenderId").get(n);if(yield u.clear(),c)if(2===s){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:hs(d.vapidKey)}}}else if(3===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:hs(d.auth),p256dh:hs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:hs(d.vapidKey)}}}else if(4===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:hs(d.auth),p256dh:hs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:hs(d.vapidKey)}}}}),function(s,o,a,l){return r.apply(this,arguments)})})).close(),yield cb(tT),yield cb("fcm_vapid_details_db"),yield cb("undefined"),rse(e)?e:null;var r}),nT.apply(this,arguments)}function rse(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const ra="firebase-messaging-store";let rT=null;function iT(){return rT||(rT=Ug("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ra)}})),rT}function aB(n){return sT.apply(this,arguments)}function sT(){return(sT=_(function*(n){const e=uT(n),r=yield(yield iT()).transaction(ra).objectStore(ra).get(e);if(r)return r;{const i=yield nse(n.appConfig.senderId);if(i)return yield oT(n,i),i}})).apply(this,arguments)}function oT(n,e){return aT.apply(this,arguments)}function aT(){return(aT=_(function*(n,e){const t=uT(n),i=(yield iT()).transaction(ra,"readwrite");return yield i.objectStore(ra).put(e,t),yield i.done,e})).apply(this,arguments)}function ose(n){return lT.apply(this,arguments)}function lT(){return(lT=_(function*(n){const e=uT(n),r=(yield iT()).transaction(ra,"readwrite");yield r.objectStore(ra).delete(e),yield r.done})).apply(this,arguments)}function uT({appConfig:n}){return n.appId}const hn=new Ii("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lse(n,e){return cT.apply(this,arguments)}function cT(){return(cT=_(function*(n,e){var t;const r=yield pT(n),i=uB(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(fT(n.appConfig),s)).json()}catch(a){throw hn.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw hn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw hn.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function use(n,e){return dT.apply(this,arguments)}function dT(){return(dT=_(function*(n,e){var t;const r=yield pT(n),i=uB(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${fT(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw hn.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw hn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw hn.create("token-update-no-token");return o.token})).apply(this,arguments)}function lB(n,e){return hT.apply(this,arguments)}function hT(){return(hT=_(function*(n,e){var t;const i={method:"DELETE",headers:yield pT(n)};try{const o=yield(yield fetch(`${fT(n.appConfig)}/${e}`,i)).json();if(o.error)throw hn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw hn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function fT({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function pT(n){return gT.apply(this,arguments)}function gT(){return(gT=_(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function uB({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==iB&&(i.web.applicationPubKey=r),i}function dse(n){return mT.apply(this,arguments)}function mT(){return(mT=_(function*(n){const e=yield fse(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:hs(e.getKey("auth")),p256dh:hs(e.getKey("p256dh"))},r=yield aB(n.firebaseDependencies);if(r){if(pse(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?hse(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield lB(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return dB(n.firebaseDependencies,t)}return dB(n.firebaseDependencies,t)})).apply(this,arguments)}function cB(n){return _T.apply(this,arguments)}function _T(){return(_T=_(function*(n){const e=yield aB(n.firebaseDependencies);e&&(yield lB(n.firebaseDependencies,e.token),yield ose(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function hse(n,e){return yT.apply(this,arguments)}function yT(){return(yT=_(function*(n,e){try{const t=yield use(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield oT(n.firebaseDependencies,r),t}catch(t){throw yield cB(n),t}})).apply(this,arguments)}function dB(n,e){return vT.apply(this,arguments)}function vT(){return(vT=_(function*(n,e){const r={token:yield lse(n,e),createTime:Date.now(),subscriptionOptions:e};return yield oT(n,r),r.token})).apply(this,arguments)}function fse(n,e){return wT.apply(this,arguments)}function wT(){return(wT=_(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ese(e)})})).apply(this,arguments)}function pse(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function hB(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function gse(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function mse(n,e){!e.data||(n.data=e.data)}(e,n),function _se(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function yse(n){return"object"==typeof n&&!!n&&sB in n}function fB(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function ET(n){return hn.create("missing-app-config-values",{valueName:n})}fB("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fB("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wse{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function vse(n){if(!n||!n.options)throw ET("App Configuration Object");if(!n.name)throw ET("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw ET(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function pB(n){return CT.apply(this,arguments)}function CT(){return(CT=_(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(Kie,{scope:Qie}),n.swRegistration.update().catch(()=>{})}catch(t){throw hn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function Ese(n,e){return bT.apply(this,arguments)}function bT(){return(bT=_(function*(n,e){if(!e&&!n.swRegistration&&(yield pB(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw hn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function Cse(n,e){return TT.apply(this,arguments)}function TT(){return(TT=_(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=iB)})).apply(this,arguments)}function IT(){return(IT=_(function*(n,e){if(!navigator)throw hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hn.create("permission-blocked");return yield Cse(n,e?.vapidKey),yield Ese(n,e?.serviceWorkerRegistration),dse(n)})).apply(this,arguments)}function bse(n,e,t){return DT.apply(this,arguments)}function DT(){return(DT=_(function*(n,e,t){const r=Tse(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[sB],message_name:t[Jie],message_time:t[Xie],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tse(n){switch(n){case ru.NOTIFICATION_CLICKED:return"notification_open";case ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ST(){return(ST=_(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===ru.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(hB(t)):n.onMessageHandler.next(hB(t)));const r=t.data;yse(r)&&"1"===r[Zie]&&(yield bse(n,t.messageType,r))})).apply(this,arguments)}const mB="@firebase/messaging",Dse=n=>{const e=new wse(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Ise(n,e){return ST.apply(this,arguments)}(e,t)),e},Sse=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function gB(n,e){return IT.apply(this,arguments)}(e,r)}};function yB(){return AT.apply(this,arguments)}function AT(){return(AT=_(function*(){try{yield Sd()}catch{return!1}return typeof window<"u"&&Yo()&&ZC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ase(){Mn(new dn("messaging",Dse,"PUBLIC")),Mn(new dn("messaging-internal",Sse,"PRIVATE")),Ze(mB,"0.9.15"),Ze(mB,"0.9.15","esm2017")}();const Wg="analytics",kse="firebase_id",Pse="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vB="https://www.googletagmanager.com/gtag/js",fn=new Xo("@firebase/analytics");function wB(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ose(n,e){const t=document.createElement("script");t.src=`${vB}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function Lse(n,e,t,r,i,s){return kT.apply(this,arguments)}function kT(){return(kT=_(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield wB(t)).find(u=>u.measurementId===i);l&&(yield e[l.appId])}}catch(a){fn.error(a)}n("config",i,s)})).apply(this,arguments)}function Vse(n,e,t,r,i){return NT.apply(this,arguments)}function NT(){return(NT=_(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield wB(t);for(const l of o){const u=a.find(d=>d.measurementId===l),c=u&&e[u.appId];if(!c){s=[];break}s.push(c)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){fn.error(s)}})).apply(this,arguments)}function $se(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(vB))return e;return null}const vr=new Ii("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),EB=new class Wse{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function qse(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function zse(n){return RT.apply(this,arguments)}function RT(){return(RT=_(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:qse(r)},s=Pse.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw vr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Kse(n){return PT.apply(this,arguments)}function PT(){return(PT=_(function*(n,e=EB,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw vr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw vr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Jse;return setTimeout(_(function*(){a.abort()}),void 0!==t?t:6e4),CB({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function CB(n,e,t){return OT.apply(this,arguments)}function OT(){return(OT=_(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=EB){var s,o;const{appId:a,measurementId:l}=n;try{yield Qse(r,e)}catch(u){if(l)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(s=u)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:l};throw u}try{const u=yield zse(n);return i.deleteThrottleMetadata(a),u}catch(u){const c=u;if(!Yse(c)){if(i.deleteThrottleMetadata(a),l)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:l};throw u}const d=503===Number(null===(o=c?.customData)||void 0===o?void 0:o.httpStatus)?rb(t,i.intervalMillis,30):rb(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(a,h),fn.debug(`Calling attemptFetch again in ${d} millis`),CB(n,h,r,i)}})).apply(this,arguments)}function Qse(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(vr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Yse(n){if(!(n instanceof ls&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Jse{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function Xse(){return FT.apply(this,arguments)}function FT(){return(FT=_(function*(){var n;if(!Yo())return fn.warn(vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Sd()}catch(e){return fn.warn(vr.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function LT(){return(LT=_(function*(n,e,t,r,i,s,o){var a;const l=Kse(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>fn.error(f)),e.push(l);const u=Xse().then(f=>{if(f)return r.getId()}),[c,d]=yield Promise.all([l,u]);$se()||Ose(s,c.measurementId),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[kse]=d),i("config",c.measurementId,h),c.measurementId})).apply(this,arguments)}class eoe{constructor(e){this.app=e}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},bB=[];const TB={};let DB,Rd,qg="dataLayer",VT=!1;function noe(n,e,t){!function toe(){const n=[];if(Og()&&n.push("This is a browser extension environment."),ZC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=vr.create("invalid-analytics-context",{errorInfo:e});fn.warn(t.message)}}();const r=n.options.appId;if(!r)throw vr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw vr.create("no-api-key");fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[r])throw vr.create("already-exists",{id:r});if(!VT){!function Fse(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(qg);const{wrappedGtag:s,gtagCore:o}=function Use(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Bse(n,e,t,r){function s(){return(s=_(function*(o,a,l){try{"event"===o?yield Vse(n,e,t,a,l):"config"===o?yield Lse(n,e,t,r,a,l):n("set",a)}catch(u){fn.error(u)}})).apply(this,arguments)}return function i(o,a,l){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(fs,bB,TB,qg,"gtag");Rd=s,DB=o,VT=!0}return fs[r]=function Zse(n,e,t,r,i,s,o){return LT.apply(this,arguments)}(n,bB,TB,e,DB,qg,t),new eoe(n)}function BT(){return(BT=_(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function uoe(){return GT.apply(this,arguments)}function GT(){return(GT=_(function*(){if(Og()||!ZC()||!Yo())return!1;try{return yield Sd()}catch{return!1}})).apply(this,arguments)}const SB="@firebase/analytics";!function doe(){Mn(new dn(Wg,(e,{options:t})=>noe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Mn(new dn("analytics-internal",function n(e){try{const t=e.getProvider(Wg).getImmediate();return{logEvent:(r,i,s)=>function coe(n,e,t,r){n=xn(n),function roe(n,e,t,r,i){return BT.apply(this,arguments)}(Rd,fs[n.app.options.appId],e,t,r).catch(i=>fn.error(i))}(t,r,i,s)}}catch(t){throw vr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ze(SB,"0.7.11"),Ze(SB,"0.7.11","esm2017")}();class hoe extends or{constructor(e,t){super()}schedule(e,t=0){return this}}const zg={setInterval(n,e,...t){const{delegate:r}=zg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=zg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class xB extends hoe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return zg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;zg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xa(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const MB={now:()=>(MB.delegate||Date).now(),delegate:void 0};class Pd{constructor(e,t=Pd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Pd.now=MB.now;class kB extends Pd{constructor(e,t=Pd.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const goe=new class poe extends kB{}(class foe extends xB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),NB=new kB(xB),Kg=new jl("7.4.1"),WT="__angularfire_symbol__analyticsIsSupportedValue",qT="__angularfire_symbol__analyticsIsSupported",zT="__angularfire_symbol__remoteConfigIsSupportedValue",KT="__angularfire_symbol__remoteConfigIsSupported",QT="__angularfire_symbol__messagingIsSupportedValue",YT="__angularfire_symbol__messagingIsSupported";function Qg(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[qT]||(globalThis[qT]=uoe().then(n=>globalThis[WT]=n).catch(()=>globalThis[WT]=!1)),globalThis[YT]||(globalThis[YT]=yB().then(n=>globalThis[QT]=n).catch(()=>globalThis[QT]=!1)),globalThis[KT]||(globalThis[KT]=zie().then(n=>globalThis[zT]=n).catch(()=>globalThis[zT]=!1));const Yg=(n,e)=>{const t=e?[e]:k2(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function iu(){}class RB{constructor(e,t=goe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class moe{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",iu,{},iu,iu)),t.pipe(an({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let XT=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new RB(Zone.current)),this.insideAngular=t.run(()=>new RB(Zone.current,NB)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(k(Le))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ia(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function _oe(n){return ia().ngZone.runOutsideAngular(()=>n())}function sa(n){return ia().ngZone.run(()=>n())}function yoe(n){return ia(),function voe(n){return function(t){return(t=t.lift(new moe(n.ngZone))).pipe(Mf(n.outsideAngular),xf(n.insideAngular))}}(ia())(n)}const woe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),sa(()=>n.apply(void 0,r))},Di=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=sa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",iu,{},iu,iu)))),r[s]=woe(r[s],t));const i=_oe(()=>n.apply(this,r));if(!e){if(i instanceof rt){const s=ia();return i.pipe(Mf(s.outsideAngular),xf(s.insideAngular))}return sa(()=>i)}return i instanceof rt?i.pipe(yoe):i instanceof Promise?sa(()=>new Promise((s,o)=>i.then(a=>sa(()=>s(a)),a=>sa(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:sa(()=>i)};class oa{constructor(e){return e}}class ZT{constructor(){return k2()}}const eI=new K("angularfire2._apps"),Coe={provide:oa,useFactory:function Eoe(n){return n&&1===n.length?n[0]:new oa(gb())},deps:[[new st,eI]]},boe={provide:ZT,deps:[[new st,eI]]};function Toe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new oa(r)}}let Ioe=(()=>{class n{constructor(t){Ze("angularfire",Kg.full,"core"),Ze("angularfire",Kg.full,"app"),Ze("angular",rO.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(k(Vp))},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({providers:[Coe,boe]}),n})();function Doe(n,...e){return{ngModule:Ioe,providers:[{provide:eI,useFactory:Toe(n),multi:!0,deps:[Le,Lt,XT,...e]}]}}const Soe=Di(Tre,!0);const Aoe=function PB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},OB=new Ii("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),FB=new Xo("@firebase/auth");function Jg(n,...e){FB.logLevel<=Ee.ERROR&&FB.error(`Auth (9.8.4): ${n}`,...e)}function er(n,...e){throw tI(n,...e)}function Si(n,...e){return tI(n,...e)}function LB(n,e,t){const r=Object.assign(Object.assign({},Aoe()),{[e]:t});return new Ii("auth","Firebase",r).create(e,{appName:n.name})}function tI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return OB.create(n,...e)}function N(n,e,...t){if(!n)throw tI(e,...t)}function Ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jg(e),new Error(e)}function Hs(n,e){n||Ai(e)}const VB=new Map;function ps(n){Hs(n instanceof Function,"Expected a class definition");let e=VB.get(n);return e?(Hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VB.set(n,e),e)}function BB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Fd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hs(t>e,"Short delay should be less than long delay!"),this.isMobile=Pg()||XC()}get(){return function koe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function nI(){return"http:"===BB()||"https:"===BB()}()||Og()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class UB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Roe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Poe=new Fd(3e4,6e4);function zt(n,e,t,r){return iI.apply(this,arguments)}function iI(){return(iI=_(function*(n,e,t,r,i={}){return $B(n,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=tb(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),UB.fetch()(jB(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function $B(n,e,t){return sI.apply(this,arguments)}function sI(){return(sI=_(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Roe),e);try{const i=new Ooe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Ld(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Ld(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw Ld(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw Ld(n,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw LB(n,c,u);er(n,c)}}catch(i){if(i instanceof ls)throw i;er(n,"network-request-failed")}})).apply(this,arguments)}function jB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function rI(n,e){Hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class Ooe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),Poe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Si(n,e,r);return i.customData._tokenResponse=t,i}function aI(){return(aI=_(function*(n,e){return zt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Voe(n,e){return uI.apply(this,arguments)}function uI(){return(uI=_(function*(n,e){return zt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Vd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cI(){return(cI=_(function*(n,e=!1){const t=xn(n),r=yield t.getIdToken(e),i=Xg(r);N(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Vd(dI(i.auth_time)),issuedAtTime:Vd(dI(i.iat)),expirationTime:Vd(dI(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function dI(n){return 1e3*Number(n)}function Xg(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return Jg("JWT malformed, contained fewer than 3 sections"),null;try{const s=JC(r);return s?JSON.parse(s):(Jg("Failed to decode base64 JWT payload"),null)}catch(s){return Jg("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function ms(n,e){return hI.apply(this,arguments)}function hI(){return(hI=_(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof ls&&$oe(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function $oe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class joe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield t.iteration()}),r)}iteration(){var e=this;return _(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class HB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bd(n){return fI.apply(this,arguments)}function fI(){return(fI=_(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield ms(n,Voe(t,{idToken:r}));N(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?Woe(s.providerUserInfo):[],a=Goe(n.providerData,o),c=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new HB(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)})).apply(this,arguments)}function pI(){return(pI=_(function*(n){const e=xn(n);yield Bd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Goe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Woe(n){return n.map(e=>{var{providerId:t}=e,r=uk(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gI(){return(gI=_(function*(n,e){const t=yield $B(n,{},_(function*(){const r=tb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=jB(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UB.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Ud{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){N(e.idToken,"internal-error"),N(typeof e.idToken<"u","internal-error"),N(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Uoe(n){const e=Xg(n);return N(e,"internal-error"),N(typeof e.exp<"u","internal-error"),N(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return _(function*(){return N(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function qoe(n,e){return gI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Ud;return r&&(N("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(N("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(N("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ud,this.toJSON())}_performRefresh(){return Ai("not implemented")}}function Gs(n,e){N("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class aa{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=uk(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new joe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new HB(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return _(function*(){const r=yield ms(t,t.stsTokenManager.getToken(t.auth,e));return N(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Boe(n){return cI.apply(this,arguments)}(this,e)}reload(){return function Hoe(n){return pI.apply(this,arguments)}(this)}_assign(e){this!==e&&(N(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new aa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Bd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const t=yield e.getIdToken();return yield ms(e,function Foe(n,e){return aI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,c;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(u=t.createdAt)&&void 0!==u?u:void 0,C=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:D,isAnonymous:F,providerData:j,stsTokenManager:fe}=t;N(y&&fe,e,"internal-error");const wt=Ud.fromJSON(this.name,fe);N("string"==typeof y,e,"internal-error"),Gs(d,e.name),Gs(h,e.name),N("boolean"==typeof D,e,"internal-error"),N("boolean"==typeof F,e,"internal-error"),Gs(f,e.name),Gs(p,e.name),Gs(g,e.name),Gs(m,e.name),Gs(v,e.name),Gs(C,e.name);const wn=new aa({uid:y,auth:e,email:h,emailVerified:D,displayName:d,isAnonymous:F,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:wt,createdAt:v,lastLoginAt:C});return j&&Array.isArray(j)&&(wn.providerData=j.map(Qn=>Object.assign({},Qn))),m&&(wn._redirectEventId=m),wn}static _fromIdTokenResponse(e,t,r=!1){return _(function*(){const i=new Ud;i.updateFromServerResponse(t);const s=new aa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Bd(s),s})()}}const GB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(t,r){var i=this;return _(function*(){i.storage[t]=r})()}_get(t){var r=this;return _(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return _(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Zg(n,e,t){return`firebase:${n}:${e}:${t}`}class ou{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Zg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Zg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?aa._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return _(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(function*(){if(!t.length)return new ou(ps(GB),e,r);const i=(yield Promise.all(t.map(function(){var u=_(function*(c){if(yield c._isAvailable())return c});return function(c){return u.apply(this,arguments)}}()))).filter(u=>u);let s=i[0]||ps(GB);const o=Zg(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const c=yield u._get(o);if(c){const d=aa._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var u=_(function*(c){if(c!==s)try{yield c._remove(o)}catch{}});return function(c){return u.apply(this,arguments)}}())),new ou(s,e,r)):new ou(s,e,r)})()}}function WB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function KB(n=yr()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function qB(n=yr()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function YB(n=yr()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function JB(n=yr()){return/webos/i.test(n)}(e))return"Webos";if(function mI(n=yr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function zB(n=yr()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function QB(n=yr()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function XB(n,e=[]){let t;switch(n){case"Browser":t=WB(yr());break;case"Worker":t=`${WB(yr())}-${n}`;break;default:t=n}return`${t}/JsCore/9.8.4/${e.length?e.join(","):"FirebaseCore-web"}`}class Qoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return _(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const s of t.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class Yoe{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZB(this),this.idTokenSubscription=new ZB(this),this.beforeStateQueue=new Qoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OB,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield ou.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return _(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,u=yield t.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(s=u.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return N(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return _(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return _(function*(){var r;try{yield Bd(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Noe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return _(function*(){const r=e?xn(e):null;return r&&N(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return _(function*(){if(!r._deleted)return e&&N(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(_(function*(){yield t.assertedPersistence.setPersistence(ps(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ii("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return _(function*(){if(!t.redirectPersistenceManager){const r=e&&ps(e)||t._popupRedirectResolver;N(r,t,"argument-error"),t.redirectPersistenceManager=yield ou.create(t,[ps(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return _(function*(){var r,i;return t._isInitialized&&(yield t.queue(_(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return _(function*(){if(e===t.currentUser)return t.queue(_(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return N(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return _(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}class ZB{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Ene(n,e){const t=new Cne(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function yU(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new Fd(3e4,6e4),new Fd(2e3,1e4),new Fd(3e4,6e4),new Fd(5e3,15e3);var MU="@firebase/auth";class Ble{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return _(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function $le(n){Mn(new dn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{N(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),N(!o?.includes(":"),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XB(n)},c=new Yoe(a,l,u);return function Moe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ps);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new dn("auth-internal",e=>{const t=function tr(n){return xn(n)}(e.getProvider("auth").getImmediate());return new Ble(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(MU,"0.20.4",function Ule(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Ze(MU,"0.20.4","esm2017")}("Browser");class JD{constructor(){return Yg("auth")}}const RU=new Map,Wle={activated:!1,tokenObservers:[]},qle={initialized:!1,enabled:!1};function Kt(n){return RU.get(n)||Wle}function ai(n,e){RU.set(n,e)}function dm(){return qle}class Jle{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return _(function*(){t.stop();try{t.pending=new Dd,yield function Xle(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dd,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hn=new Ii("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function OU(n){if(!Kt(n).activated)throw Hn.create("use-before-activation",{appName:n.name})}function t0(n,e){return n0.apply(this,arguments)}function n0(){return(n0=_(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l,u;try{l=yield fetch(n,a)}catch(f){throw Hn.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==l.status)throw Hn.create("fetch-status-error",{httpStatus:l.status});try{u=yield l.json()}catch(f){throw Hn.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const c=u.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Hn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const d=1e3*Number(c[1]),h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})).apply(this,arguments)}function nue(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Wd="firebase-app-check-store";let pm=null;function LU(){return pm||(pm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Hn.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Wd,{keyPath:"compositeKey"})}}catch(r){e(Hn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),pm)}function r0(){return(r0=_(function*(n,e){const r=(yield LU()).transaction(Wd,"readwrite"),s=r.objectStore(Wd).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Hn.create("storage-set",{originalErrorMessage:null===(u=l.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const qd=new Xo("@firebase/app-check");function $U(n,e){return Yo()?function oue(n,e){return function VU(n,e){return r0.apply(this,arguments)}(function UU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jU(){return dm().enabled}function HU(){return l0.apply(this,arguments)}function l0(){return(l0=_(function*(){const n=dm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hue={error:"UNKNOWN_ERROR"};function fue(n){return Ng.encodeString(JSON.stringify(n),!1)}function gm(n){return u0.apply(this,arguments)}function u0(){return(u0=_(function*(n,e=!1){const t=n.app;OU(t);const r=Kt(t);let s,i=r.token;if(!i){const l=yield r.cachedTokenPromise;l&&mm(l)&&(i=l)}if(!e&&i&&mm(i))return{token:i.token};let a,o=!1;if(jU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=t0(nue(t,yield HU()),n.heartbeatServiceProvider).then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0);const l=yield r.exchangeTokenPromise;return yield $U(t,l),ai(t,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=yield r.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?qd.warn(l.message):qd.error(l),s=l}return i?(a={token:i.token},ai(t,Object.assign(Object.assign({},r),{token:i})),yield $U(t,i)):a=gue(s),o&&WU(t,a),a})).apply(this,arguments)}function d0(n,e){const t=Kt(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ai(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function GU(n){const{app:e}=n,t=Kt(e);let r=t.tokenRefresher;r||(r=function pue(n){const{app:e}=n;return new Jle(_(function*(){let r;if(r=Kt(e).token?yield gm(n,!0):yield gm(n),r.error)throw r.error}),()=>!0,()=>{const t=Kt(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ai(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WU(n,e){const t=Kt(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function mm(n){return n.expireTimeMillis-Date.now()>0}function gue(n){return{token:fue(hue),error:n}}class mue{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Kt(this.app);for(const t of e)d0(this.app,t.next);return Promise.resolve()}}const ZU="app-check-internal";!function Mue(){Mn(new dn("app-check",n=>function _ue(n,e){return new mue(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZU).initialize()})),Mn(new dn(ZU,n=>function yue(n){return{getToken:e=>gm(n,e),addTokenListener:e=>function c0(n,e,t,r){const{app:i}=n,s=Kt(i),o={next:t,error:r,type:e};if(ai(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&mm(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),GU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>GU(n))}(n,"INTERNAL",e),removeTokenListener:e=>d0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ze("@firebase/app-check","0.5.10")}();class g0{constructor(){return Yg("app-check")}}typeof window<"u"&&window;var U,Oue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ys={},_0=_0||{},re=Oue||self;function ym(){}function y0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function zd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var v0="closure_uid_"+(1e9*Math.random()>>>0),Lue=0;function Vue(n,e,t){return n.call.apply(n.bind,arguments)}function Bue(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function pn(n,e,t){return(pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vue:Bue).apply(null,arguments)}function vm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ws(){this.s=this.s,this.o=this.o}var $ue={};Ws.prototype.s=!1,Ws.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Fue(n){return Object.prototype.hasOwnProperty.call(n,v0)&&n[v0]||(n[v0]=++Lue)}(this);delete $ue[n]}},Ws.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const t$=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},n$=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function r$(n){return Array.prototype.concat.apply([],arguments)}function w0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wm(n){return/^[\s\xa0]*$/.test(n)}var Wn,i$=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Gn(n,e){return-1!=n.indexOf(e)}function E0(n,e){return n<e?-1:n>e?1:0}e:{var s$=re.navigator;if(s$){var o$=s$.userAgent;if(o$){Wn=o$;break e}}Wn=""}function C0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function a$(n){const e={};for(const t in n)e[t]=n[t];return e}var l$="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u$(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<l$.length;s++)t=l$[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function b0(n){return b0[" "](n),n}b0[" "]=ym;var Em,n,Gue=Gn(Wn,"Opera"),au=Gn(Wn,"Trident")||Gn(Wn,"MSIE"),c$=Gn(Wn,"Edge"),T0=c$||au,d$=Gn(Wn,"Gecko")&&!(Gn(Wn.toLowerCase(),"webkit")&&!Gn(Wn,"Edge"))&&!(Gn(Wn,"Trident")||Gn(Wn,"MSIE"))&&!Gn(Wn,"Edge"),Wue=Gn(Wn.toLowerCase(),"webkit")&&!Gn(Wn,"Edge");function h$(){var n=re.document;return n?n.documentMode:void 0}e:{var I0="",D0=(n=Wn,d$?/rv:([^\);]+)(\)|;)/.exec(n):c$?/Edge\/([\d\.]+)/.exec(n):au?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wue?/WebKit\/(\S+)/.exec(n):Gue?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(D0&&(I0=D0?D0[1]:""),au){var S0=h$();if(null!=S0&&S0>parseFloat(I0)){Em=String(S0);break e}}Em=I0}var que={};var Kue=re.document&&au&&(h$()||parseInt(Em,10))||void 0,Que=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{re.addEventListener("test",ym,e),re.removeEventListener("test",ym,e)}catch{}return n}();function kn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Kd(n,e){if(kn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(d$){e:{try{b0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yue[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kd.Z.h.call(this)}}kn.prototype.h=function(){this.defaultPrevented=!0},gn(Kd,kn);var Yue={2:"touch",3:"pen",4:"mouse"};Kd.prototype.h=function(){Kd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qd="closure_listenable_"+(1e6*Math.random()|0),Jue=0;function Xue(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Jue,this.ca=this.fa=!1}function Cm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function bm(n){this.src=n,this.g={},this.h=0}function x0(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=t$(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Cm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function M0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}bm.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=M0(n,e,r,i);return-1<o?(e=n[o],t||(e.fa=!1)):((e=new Xue(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var k0="closure_lm_"+(1e6*Math.random()|0),N0={};function p$(n,e,t,r,i){if(r&&r.once)return m$(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)p$(n,e[s],t,r,i);return null}return t=F0(t),n&&n[Qd]?n.N(e,t,zd(r)?!!r.capture:!!r,i):g$(n,e,t,!1,r,i)}function g$(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=zd(i)?!!i.capture:!!i,a=P0(n);if(a||(n[k0]=a=new bm(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function Zue(){var e=ece;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Que||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(y$(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function m$(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)m$(n,e[s],t,r,i);return null}return t=F0(t),n&&n[Qd]?n.O(e,t,zd(r)?!!r.capture:!!r,i):g$(n,e,t,!0,r,i)}function _$(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)_$(n,e[s],t,r,i);else r=zd(r)?!!r.capture:!!r,t=F0(t),n&&n[Qd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=M0(s=n.g[e],t,r,i))&&(Cm(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=P0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=M0(e,t,r,i)),(t=-1<n?e[n]:null)&&R0(t))}function R0(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qd])x0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(y$(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=P0(e))?(x0(t,n),0==t.h&&(t.src=null,e[k0]=null)):Cm(n)}}}function y$(n){return n in N0?N0[n]:N0[n]="on"+n}function ece(n,e){if(n.ca)n=!0;else{e=new Kd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&R0(n),n=t.call(r,e)}return n}function P0(n){return(n=n[k0])instanceof bm?n:null}var O0="__closure_events_fn_"+(1e9*Math.random()>>>0);function F0(n){return"function"==typeof n?n:(n[O0]||(n[O0]=function(e){return n.handleEvent(e)}),n[O0])}function Qt(){Ws.call(this),this.i=new bm(this),this.P=this,this.I=null}function mn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new kn(e,n);else if(e instanceof kn)e.target=e.target||n;else{var i=e;u$(e=new kn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Tm(o,r,!0,e)&&i}if(i=Tm(o=e.g=n,r,!0,e)&&i,i=Tm(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Tm(o=e.g=t[s],r,!1,e)&&i}function Tm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==t){var a=o.listener,l=o.ia||o.src;o.fa&&x0(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}gn(Qt,Ws),Qt.prototype[Qd]=!0,Qt.prototype.removeEventListener=function(n,e,t,r){_$(this,n,e,t,r)},Qt.prototype.M=function(){if(Qt.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Cm(t[r]);delete n.g[e],n.h--}}this.I=null},Qt.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Qt.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var L0=re.JSON.stringify;function tce(){var n=w$;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var B0,v$=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rce,n=>n.reset());class rce{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ice(n){re.setTimeout(()=>{throw n},0)}function V0(n,e){B0||function sce(){var n=re.Promise.resolve(void 0);B0=function(){n.then(oce)}}(),U0||(B0(),U0=!0),w$.add(n,e)}var U0=!1,w$=new class nce{constructor(){this.h=this.g=null}add(e,t){const r=v$.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function oce(){for(var n;n=tce();){try{n.h.call(n.g)}catch(t){ice(t)}var e=v$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}U0=!1}function Im(n,e){Qt.call(this),this.h=n||1,this.g=e||re,this.j=pn(this.kb,this),this.l=Date.now()}function $0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function j0(n,e,t){if("function"==typeof n)t&&(n=pn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=pn(n.handleEvent,n)}return 2147483647<Number(e)?-1:re.setTimeout(n,e||0)}function E$(n){n.g=j0(()=>{n.g=null,n.i&&(n.i=!1,E$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gn(Im,Qt),(U=Im.prototype).da=!1,U.S=null,U.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mn(this,"tick"),this.da&&($0(this),this.start()))}},U.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},U.M=function(){Im.Z.M.call(this),$0(this),delete this.g};class ace extends Ws{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:E$(this)}M(){super.M(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yd(n){Ws.call(this),this.h=n,this.g={}}gn(Yd,Ws);var C$=[];function b$(n,e,t,r){Array.isArray(t)||(t&&(C$[0]=t.toString()),t=C$);for(var i=0;i<t.length;i++){var s=p$(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function T$(n){C0(n.g,function(e,t){this.g.hasOwnProperty(t)&&R0(e)},n),n.g={}}function Dm(){this.g=!0}function lu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dce(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return L0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Yd.prototype.M=function(){Yd.Z.M.call(this),T$(this)},Yd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dm.prototype.Aa=function(){this.g=!1},Dm.prototype.info=function(){};var da={},I$=null;function Sm(){return I$=I$||new Qt}function D$(n){kn.call(this,da.Ma,n)}function Jd(n){const e=Sm();mn(e,new D$(e,n))}function S$(n,e){kn.call(this,da.STAT_EVENT,n),this.stat=e}function qn(n){const e=Sm();mn(e,new S$(e,n))}function A$(n,e){kn.call(this,da.Na,n),this.size=e}function Xd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){n()},e)}da.Ma="serverreachability",gn(D$,kn),da.STAT_EVENT="statevent",gn(S$,kn),da.Na="timingevent",gn(A$,kn);var Am={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},x$={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function H0(){}function k$(){}H0.prototype.h=null;var q0,Zd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function G0(){kn.call(this,"d")}function W0(){kn.call(this,"c")}function xm(){}function eh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Yd(this),this.P=hce,this.W=new Im(n=T0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new N$}function N$(){this.i=null,this.g="",this.h=!1}gn(G0,kn),gn(W0,kn),gn(xm,H0),xm.prototype.g=function(){return new XMLHttpRequest},xm.prototype.i=function(){return{}},q0=new xm;var hce=45e3,z0={},Mm={};function K0(n,e,t){n.K=1,n.v=Om(vs(e)),n.s=t,n.U=!0,R$(n,null)}function R$(n,e){n.F=Date.now(),th(n),n.A=vs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),j$(t.h,"t",r),n.C=0,t=n.l.H,n.h=new N$,n.g=dj(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ace(pn(n.Ia,n,n.g),n.O)),b$(n.V,n.g,"readystatechange",n.gb),e=n.H?a$(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jd(1),function lce(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.X,n.s)}function P$(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function O$(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=fce(n,t),i==Mm){4==e&&(n.o=4,qn(14),r=!1),lu(n.j,n.m,null,"[Incomplete Response]");break}if(i==z0){n.o=4,qn(15),lu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lu(n.j,n.m,i,null),Q0(n,i)}P$(n)&&i!=Mm&&i!=z0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),oS(e),e.L=!0,qn(11))):(lu(n.j,n.m,t,"[Invalid Chunked Response]"),ha(n),nh(n))}function fce(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mm:(t=Number(e.substring(t,r)),isNaN(t)?z0:(r+=1)+t>e.length?Mm:(e=e.substr(r,t),n.C=r+t,e))}function th(n){n.Y=Date.now()+n.P,F$(n,n.P)}function F$(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xd(pn(n.eb,n),e)}function km(n){n.B&&(re.clearTimeout(n.B),n.B=null)}function nh(n){0==n.l.G||n.I||aj(n.l,n)}function ha(n){km(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,$0(n.W),T$(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Q0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||X0(t.i,n)))if(t.I=n.N,!n.J&&X0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;$m(t),Bm(t)}sS(t),qn(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xd(pn(t.ab,t),6e3));if(1>=W$(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else ga(t,11)}else if((n.J||t.g==n)&&$m(t),!wm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.U=u[0],u=u[1],2==t.G)if("c"==u[0]){t.J=u[1],t.la=u[2];const c=u[3];null!=c&&(t.ma=c,t.h.info("VER="+t.ma));const d=u[4];null!=d&&(t.za=d,t.h.info("SVER="+t.za));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(t.K=r=1.5*h,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(Gn(p,"spdy")||Gn(p,"quic")||Gn(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Z0(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,et(r.F,r.D,g))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var o=n;if((r=t).oa=cj(r,r.H?r.la:null,r.W),o.J){q$(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(km(a),th(a)),r.g=o}else sj(r);0<t.l.length&&Um(t)}else"stop"!=u[0]&&"close"!=u[0]||ga(t,7);else 3==t.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ga(t,7):rS(t):"noop"!=u[0]&&t.j&&t.j.wa(u),t.A=0)}Jd(4)}catch{}}function Y0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(y0(n)||"string"==typeof n)n$(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(y0(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function pce(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(y0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function uu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof uu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function J0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];fa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)fa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function fa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(U=eh.prototype).setTimeout=function(n){this.P=n},U.gb=function(n){n=n.target;const e=this.L;e&&3==ws(n)?e.l():this.Ia(n)},U.Ia=function(n){try{if(n==this.g)e:{const c=ws(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>c)&&(3!=c||T0||this.g&&(this.h.h||this.g.ga()||ej(this.g)))){this.I||4!=c||7==e||Jd(8==e||0>=d?3:2),km(this);var t=this.g.ba();this.N=t;t:if(P$(this)){var r=ej(this.g);n="";var i=r.length,s=4==ws(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ha(this),nh(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==t,function uce(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,c,t),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wm(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,qn(12),ha(this),nh(this);break e}lu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Q0(this,t)}this.U?(O$(this,c,o),T0&&this.i&&3==c&&(b$(this.V,this.W,"tick",this.fb),this.W.start())):(lu(this.j,this.m,o,null),Q0(this,o)),4==c&&ha(this),this.i&&!this.I&&(4==c?aj(this.l,this):(this.i=!1,th(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,qn(12)):(this.o=0,qn(13)),ha(this),nh(this)}}}catch{}},U.fb=function(){if(this.g){var n=ws(this.g),e=this.g.ga();this.C<e.length&&(km(this),O$(this,n,e),this.i&&4!=n&&th(this))}},U.cancel=function(){this.I=!0,ha(this)},U.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function cce(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jd(3),qn(17)),ha(this),this.o=2,nh(this)):F$(this,this.Y-n)},(U=uu.prototype).R=function(){J0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},U.T=function(){return J0(this),this.g.concat()},U.get=function(n,e){return fa(this.h,n)?this.h[n]:e},U.set=function(n,e){fa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},U.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var L$=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pa(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pa){this.g=void 0!==e?e:n.g,Nm(this,n.j),this.s=n.s,Rm(this,n.i),Pm(this,n.m),this.l=n.l,e=n.h;var t=new sh;t.i=e.i,e.g&&(t.g=new uu(e.g),t.h=e.h),V$(this,t),this.o=n.o}else n&&(t=String(n).match(L$))?(this.g=!!e,Nm(this,t[1]||"",!0),this.s=rh(t[2]||""),Rm(this,t[3]||"",!0),Pm(this,t[4]),this.l=rh(t[5]||"",!0),V$(this,t[6]||"",!0),this.o=rh(t[7]||"")):(this.g=!!e,this.h=new sh(null,this.g))}function vs(n){return new pa(n)}function Nm(n,e,t){n.j=t?rh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rm(n,e,t){n.i=t?rh(e,!0):e}function Pm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function V$(n,e,t){e instanceof sh?(n.h=e,function bce(n,e){e&&!n.j&&(qs(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(U$(this,r),j$(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ih(e,Ece)),n.h=new sh(e,n.g))}function et(n,e,t){n.h.set(e,t)}function Om(n){return et(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ih(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yce),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yce(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ih(e,B$,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ih(e,B$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ih(t,"/"==t.charAt(0)?wce:vce,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ih(t,Cce)),n.join("")};var B$=/[#\/\?@]/g,vce=/[#\?:]/g,wce=/[#\?]/g,Ece=/[#\?@]/g,Cce=/#/g;function sh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qs(n){n.g||(n.g=new uu,n.h=0,n.i&&function gce(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function U$(n,e){qs(n),e=cu(n,e),fa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,fa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&J0(n)))}function $$(n,e){return qs(n),e=cu(n,e),fa(n.g.h,e)}function j$(n,e,t){U$(n,e),0<t.length&&(n.i=null,n.g.set(cu(n,e),w0(t)),n.h+=t.length)}function cu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function H$(n){this.l=n||Ice,n=re.PerformanceNavigationTiming?0<(n=re.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(re.g&&re.g.Ea&&re.g.Ea()&&re.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(U=sh.prototype).add=function(n,e){qs(this),this.i=null,n=cu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},U.forEach=function(n,e){qs(this),this.g.forEach(function(t,r){n$(t,function(i){n.call(e,i,r,this)},this)},this)},U.T=function(){qs(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},U.R=function(n){qs(this);var e=[];if("string"==typeof n)$$(this,n)&&(e=r$(e,this.g.get(cu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=r$(e,n[t])}return e},U.set=function(n,e){return qs(this),this.i=null,$$(this,n=cu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},U.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},U.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),n.push(o)}}return this.i=n.join("&")};var Ice=10;function G$(n){return!!n.h||!!n.g&&n.g.size>=n.j}function W$(n){return n.h?1:n.g?n.g.size:0}function X0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Z0(n,e){n.g?n.g.add(e):n.h=e}function q$(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function z$(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return w0(n.i)}function eS(){}function Dce(){this.g=new eS}function Sce(n,e,t){const r=t||"";try{Y0(n,function(i,s){let o=i;zd(i)&&(o=L0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function oh(n){this.l=n.$b||null,this.j=n.ib||!1}function Lm(n,e){Qt.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=tS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}H$.prototype.cancel=function(){if(this.i=z$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},eS.prototype.stringify=function(n){return re.JSON.stringify(n,void 0)},eS.prototype.parse=function(n){return re.JSON.parse(n,void 0)},gn(oh,H0),oh.prototype.g=function(){return new Lm(this.l,this.j)},oh.prototype.i=function(n){return function(){return n}}({}),gn(Lm,Qt);var tS=0;function K$(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ah(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lh(n)}function lh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(U=Lm.prototype).open=function(n,e){if(this.readyState!=tS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lh(this)},U.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||re).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ah(this)),this.readyState=tS},U.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lh(this)),this.g&&(this.readyState=3,lh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;K$(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},U.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ah(this):lh(this),3==this.readyState&&K$(this)}},U.Ua=function(n){this.g&&(this.response=this.responseText=n,ah(this))},U.Ta=function(n){this.g&&(this.response=n,ah(this))},U.ha=function(){this.g&&ah(this)},U.setRequestHeader=function(n,e){this.v.append(n,e)},U.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},U.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Lm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xce=re.JSON.parse;function St(n){Qt.call(this),this.headers=new uu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Q$,this.K=this.L=!1}gn(St,Qt);var Q$="",Mce=/^https?$/i,kce=["POST","PUT"];function Rce(n){return"content-type"==n.toLowerCase()}function Y$(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,J$(n),Vm(n)}function J$(n){n.D||(n.D=!0,mn(n,"complete"),mn(n,"error"))}function X$(n){if(n.h&&typeof _0<"u"&&(!n.C[1]||4!=ws(n)||2!=n.ba()))if(n.v&&4==ws(n))j0(n.Fa,0,n);else if(mn(n,"readystatechange"),4==ws(n)){n.h=!1;try{const a=n.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(L$)[1]||null;if(!i&&re.self&&re.self.location){var s=re.self.location.protocol;i=s.substr(0,s.length-1)}r=!Mce.test(i?i.toLowerCase():"")}t=r}if(t)mn(n,"complete"),mn(n,"success");else{n.m=6;try{var o=2<ws(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.ba()+"]",J$(n)}}finally{Vm(n)}}}function Vm(n,e){if(n.g){Z$(n);const t=n.g,r=n.C[0]?ym:null;n.g=null,n.C=null,e||mn(n,"ready");try{t.onreadystatechange=r}catch{}}}function Z$(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(re.clearTimeout(n.A),n.A=null)}function ws(n){return n.g?n.g.readyState:0}function ej(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Q$:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function nS(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Pce(n){let e="";return C0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):et(n,e,t))}function uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function tj(n){this.za=0,this.l=[],this.h=new Dm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uh("baseRetryDelayMs",5e3,n),this.$a=uh("retryDelaySeedMs",1e4,n),this.Ya=uh("forwardChannelMaxRetries",2,n),this.ra=uh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new H$(n&&n.concurrentRequestLimit),this.Ca=new Dce,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rS(n){if(nj(n),3==n.G){var e=n.V++,t=vs(n.F);et(t,"SID",n.J),et(t,"RID",e),et(t,"TYPE","terminate"),ch(n,t),(e=new eh(n,n.h,e,void 0)).K=2,e.v=Om(vs(t)),t=!1,re.navigator&&re.navigator.sendBeacon&&(t=re.navigator.sendBeacon(e.v.toString(),"")),!t&&re.Image&&((new Image).src=e.v,t=!0),t||(e.g=dj(e.l,null),e.g.ea(e.v)),e.F=Date.now(),th(e)}uj(n)}function Bm(n){n.g&&(oS(n),n.g.cancel(),n.g=null)}function nj(n){Bm(n),n.u&&(re.clearTimeout(n.u),n.u=null),$m(n),n.i.cancel(),n.m&&("number"==typeof n.m&&re.clearTimeout(n.m),n.m=null)}function iS(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Um(n)}function Um(n){G$(n.i)||n.m||(n.m=!0,V0(n.Ha,n),n.C=0)}function rj(n,e){var t;t=e?e.m:n.V++;const r=vs(n.F);et(r,"SID",n.J),et(r,"RID",t),et(r,"AID",n.U),ch(n,r),n.o&&n.s&&nS(r,n.o,n.s),t=new eh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ij(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Z0(n.i,t),K0(t,r,e)}function ch(n,e){n.j&&Y0({},function(t,r){et(e,r,t)})}function ij(n,e,t){t=Math.min(n.l.length,t);var r=n.j?pn(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let u=i[l].h;const c=i[l].g;if(u-=s,0>u)s=Math.max(0,i[l].h-100),a=!1;else try{Sce(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function sj(n){n.g||n.u||(n.Y=1,V0(n.Ga,n),n.A=0)}function sS(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xd(pn(n.Ga,n),lj(n,n.A)),n.A++,0))}function oS(n){null!=n.B&&(re.clearTimeout(n.B),n.B=null)}function oj(n){n.g=new eh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=vs(n.oa);et(e,"RID","rpc"),et(e,"SID",n.J),et(e,"CI",n.N?"0":"1"),et(e,"AID",n.U),ch(n,e),et(e,"TYPE","xmlhttp"),n.o&&n.s&&nS(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Om(vs(e)),t.s=null,t.U=!0,R$(t,n)}function $m(n){null!=n.v&&(re.clearTimeout(n.v),n.v=null)}function aj(n,e){var t=null;if(n.g==e){$m(n),oS(n),n.g=null;var r=2}else{if(!X0(n.i,e))return;t=e.D,q$(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;mn(r=Sm(),new A$(r,t,e,i)),Um(n)}else sj(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Oce(n,e){return!(W$(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xd(pn(n.Ha,n,e),lj(n,n.C)),n.C++,0)))}(n,e)||2==r&&sS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ga(n,5);break;case 4:ga(n,10);break;case 3:ga(n,6);break;default:ga(n,2)}}function lj(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ga(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=pn(n.jb,n);t||(t=new pa("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||Nm(t,"https"),Om(t)),function Ace(n,e){const t=new Dm;if(re.Image){const r=new Image;r.onload=vm(Fm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=vm(Fm,t,r,"TestLoadImage: error",!1,e),r.onabort=vm(Fm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=vm(Fm,t,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qn(2);n.G=0,n.j&&n.j.va(e),uj(n),nj(n)}function uj(n){n.G=0,n.I=-1,n.j&&((0!=z$(n.i).length||0!=n.l.length)&&(n.i.i.length=0,w0(n.l),n.l.length=0),n.j.ua())}function cj(n,e,t){let r=function mce(n){return n instanceof pa?vs(n):new pa(n,void 0)}(t);if(""!=r.i)e&&Rm(r,e+"."+r.i),Pm(r,r.m);else{const i=re.location;r=function _ce(n,e,t,r){var i=new pa(null,void 0);return n&&Nm(i,n),e&&Rm(i,e),t&&Pm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&C0(n.aa,function(i,s){et(r,s,i)}),t=n.sa,(e=n.D)&&t&&et(r,e,t),et(r,"VER",n.ma),ch(n,r),r}function dj(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new St(t&&n.Ba&&!n.qa?new oh({ib:!0}):n.qa)).L=n.H,e}function hj(){}function jm(){if(au&&!(10<=Number(Kue)))throw Error("Environmental error: no available transport.")}function wr(n,e){Qt.call(this),this.g=new tj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!wm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new du(this)}function fj(n){G0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function pj(){W0.call(this),this.status=1}function du(n){this.g=n}(U=St.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():q0.g(),this.C=function M$(n){return n.h||(n.h=n.i())}(this.u?this.u:q0),this.g.onreadystatechange=pn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Y$(this,s)}n=t||"";const i=new uu(this.headers);r&&Y0(r,function(s,o){i.set(o,s)}),r=function jue(n){e:{var e=Rce;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=re.FormData&&n instanceof re.FormData,!(0<=t$(kce,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z$(this),0<this.B&&((this.K=function Nce(n){return au&&function zue(){return function Hue(n){var e=que;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=i$(String(Em)).split("."),t=i$("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=E0(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||E0(0==i[2].length,0==s[2].length)||E0(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pn(this.pa,this)):this.A=j0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Y$(this,s)}},U.pa=function(){typeof _0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mn(this,"timeout"),this.abort(8))},U.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mn(this,"complete"),mn(this,"abort"),Vm(this))},U.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vm(this,!0)),St.Z.M.call(this)},U.Fa=function(){this.s||(this.F||this.v||this.l?X$(this):this.cb())},U.cb=function(){X$(this)},U.ba=function(){try{return 2<ws(this)?this.g.status:-1}catch{return-1}},U.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},U.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xce(e)}},U.Da=function(){return this.m},U.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(U=tj.prototype).ma=8,U.G=1,U.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},U.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new eh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=a$(s),u$(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ij(this,i,e),et(t=vs(this.F),"RID",n),et(t,"CVER",22),this.D&&et(t,"X-HTTP-Session-Id",this.D),ch(this,t),this.o&&s&&nS(t,this.o,s),Z0(this.i,i),this.Ra&&et(t,"TYPE","init"),this.ja?(et(t,"$req",e),et(t,"SID","null"),i.$=!0,K0(i,t,null)):K0(i,t,e),this.G=2}}else 3==this.G&&(n?rj(this,n):0==this.l.length||G$(this.i)||rj(this))},U.Ga=function(){if(this.u=null,oj(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xd(pn(this.bb,this),n)}},U.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qn(10),Bm(this),oj(this))},U.ab=function(){null!=this.v&&(this.v=null,Bm(this),sS(this),qn(19))},U.jb=function(n){n?(this.h.info("Successfully pinged google.com"),qn(2)):(this.h.info("Failed to ping google.com"),qn(1))},(U=hj.prototype).xa=function(){},U.wa=function(){},U.va=function(){},U.ua=function(){},U.Oa=function(){},jm.prototype.g=function(n,e){return new wr(n,e)},gn(wr,Qt),wr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),V0(pn(n.hb,n,e))),qn(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=cj(n,null,n.W),Um(n)},wr.prototype.close=function(){rS(this.g)},wr.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,iS(this.g,e)}else this.v?((e={}).__data__=L0(n),iS(this.g,e)):iS(this.g,n)},wr.prototype.M=function(){this.g.j=null,delete this.j,rS(this.g),delete this.g,wr.Z.M.call(this)},gn(fj,G0),gn(pj,W0),gn(du,hj),du.prototype.xa=function(){mn(this.g,"a")},du.prototype.wa=function(n){mn(this.g,new fj(n))},du.prototype.va=function(n){mn(this.g,new pj(n))},du.prototype.ua=function(){mn(this.g,"b")},jm.prototype.createWebChannel=jm.prototype.g,wr.prototype.send=wr.prototype.u,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,Am.NO_ERROR=0,Am.TIMEOUT=8,Am.HTTP_ERROR=6,x$.COMPLETE="complete",k$.EventType=Zd,Zd.OPEN="a",Zd.CLOSE="b",Zd.ERROR="c",Zd.MESSAGE="d",Qt.prototype.listen=Qt.prototype.N,St.prototype.listenOnce=St.prototype.O,St.prototype.getLastError=St.prototype.La,St.prototype.getLastErrorCode=St.prototype.Da,St.prototype.getStatus=St.prototype.ba,St.prototype.getResponseJson=St.prototype.Qa,St.prototype.getResponseText=St.prototype.ga,St.prototype.send=St.prototype.ea;var Fce=ys.createWebChannelTransport=function(){return new jm},Lce=ys.getStatEventTarget=function(){return Sm()},aS=ys.ErrorCode=Am,Vce=ys.EventType=x$,Bce=ys.Event=da,gj=ys.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Uce=ys.FetchXmlHttpFactory=oh,Hm=ys.WebChannel=k$,$ce=ys.XhrIo=St;const mj="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let hu="9.8.4";const zs=new Xo("@firebase/firestore");function lS(){return zs.logLevel}function x(n,...e){if(zs.logLevel<=Ee.DEBUG){const t=e.map(uS);zs.debug(`Firestore (${hu}): ${n}`,...t)}}function At(n,...e){if(zs.logLevel<=Ee.ERROR){const t=e.map(uS);zs.error(`Firestore (${hu}): ${n}`,...t)}}function Gm(n,...e){if(zs.logLevel<=Ee.WARN){const t=e.map(uS);zs.warn(`Firestore (${hu}): ${n}`,...t)}}function uS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function H(n="Unexpected state"){const e=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: `+n;throw At(e),new Error(e)}function te(n,e){n||H()}function O(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _j{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}}class Gce{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(_(function*(){yield u.promise,yield s(r.currentUser)}))},l=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jt)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te("string"==typeof r.accessToken),new _j(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return te(null===e||"string"==typeof e),new Yt(e)}}class Wce{constructor(e,t,r){this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class qce{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Wce(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zce{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(te("string"==typeof t.token),this.p=t.token,new yj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vj{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kce(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ue(n,e){return n<e?-1:n>e?1:0}function fu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class at{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new at(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new at(0,0))}static max(){return new J(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dh{constructor(e,t,r){void 0===t?t=0:t>e.length&&H(),void 0===r?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===dh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Te extends dh{construct(e,t,r){return new Te(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new A(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Te(t)}static emptyPath(){return new Te([])}}const Qce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends dh{construct(e,t,r){return new xt(e,t,r)}static isValidIdentifier(e){return Qce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new A(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new A(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new A(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new A(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(t)}static emptyPath(){return new xt([])}}class R{constructor(e){this.path=e}static fromPath(e){return new R(Te.fromString(e))}static fromName(e){return new R(Te.fromString(e).popFirst(5))}static empty(){return new R(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Te.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new R(new Te(e.slice()))}}function Cj(n){return new Er(n.readTime,n.key,-1)}class Er{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Er(J.min(),R.empty(),-1)}static max(){return new Er(J.max(),R.empty(),-1)}}function dS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=R.comparator(n.documentKey,e.documentKey),0!==t?t:ue(n.largestBatchId,e.largestBatchId))}const bj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function Ks(n){return hS.apply(this,arguments)}function hS(){return hS=_(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==bj)throw n;x("LocalStore","Unexpectedly lost primary lease")}),hS.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,r)=>{t(e)})}static reject(e){return new w((t,r)=>{r(e)})}static waitFor(e){return new w((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=w.resolve(!1);for(const r of e)t=t.next(i=>i?w.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,t){return new w((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Qs(n){return"IndexedDbTransactionError"===n.name}class nr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Ij(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}nr.ot=-1;class gt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Km(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Km(this.root,e,this.comparator,!1)}getReverseIterator(){return new Km(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Km(this.root,e,this.comparator,!0)}}class Km{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??_n.RED,this.left=i??_n.EMPTY,this.right=s??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new _n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1,_n.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(n,e,t,r,i){return this}insert(n,e,t){return new _n(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ve{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sj(this.data.getIterator())}getIteratorFrom(e){return new Sj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ve(this.comparator);return t.data=e,t}}class Sj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new Ve(xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ht(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const tde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(te(!!n),"string"==typeof n){let e=0;const t=tde.exec(n);if(te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function va(n){return"string"==typeof n?Ht.fromBase64String(n):Ht.fromUint8Array(n)}function pS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Aj(n){const e=n.mapValue.fields.__previous_value__;return pS(e)?Aj(e):e}function ph(n){const e=Ys(n.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}class nde{constructor(e,t,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Js{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Js("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Js&&e.projectId===this.projectId&&e.database===this.database}}function gh(n){return null==n}function mh(n){return 0===n&&1/n==-1/0}const Xs_mapValue={fields:{__type__:{stringValue:"__max__"}}};function wa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pS(n)?4:Rj(n)?9007199254740991:10:H()}function xi(n,e){if(n===e)return!0;const t=wa(n);if(t!==wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ph(n).isEqual(ph(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ys(r.timestampValue),o=Ys(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,va(n.bytesValue).isEqual(va(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return mt(r.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(r.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mt(r.integerValue)===mt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=mt(r.doubleValue),o=mt(i.doubleValue);return s===o?mh(s)===mh(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return fu(n.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Ij(s)!==Ij(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!xi(s[a],o[a])))return!1;return!0}(n,e);default:return H()}var i}function _h(n,e){return void 0!==(n.values||[]).find(t=>xi(t,e))}function Zs(n,e){if(n===e)return 0;const t=wa(n),r=wa(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=mt(i.integerValue||i.doubleValue),a=mt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return Mj(n.timestampValue,e.timestampValue);case 4:return Mj(ph(n),ph(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(i,s){const o=va(i),a=va(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=ue(o[l],a[l]);if(0!==u)return u}return ue(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ue(mt(i.latitude),mt(s.latitude));return 0!==o?o:ue(mt(i.longitude),mt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Zs(o[l],a[l]);if(u)return u}return ue(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Xs_mapValue&&s===Xs_mapValue)return 0;if(i===Xs_mapValue)return 1;if(s===Xs_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=ue(a[c],u[c]);if(0!==d)return d;const h=Zs(o[a[c]],l[u[c]]);if(0!==h)return h}return ue(a.length,u.length)}(n.mapValue,e.mapValue);default:throw H()}}function Mj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ue(n,e);const t=Ys(n),r=Ys(e),i=ue(t.seconds,r.seconds);return 0!==i?i:ue(t.nanos,r.nanos)}function gu(n){return gS(n)}function gS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ys(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?va(n.bytesValue).toBase64():"referenceValue"in n?R.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=gS(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${gS(r.fields[a])}`;return s+"}"}(n.mapValue):H();var e}function mS(n){return!!n&&"integerValue"in n}function yh(n){return!!n&&"arrayValue"in n}function kj(n){return!!n&&"nullValue"in n}function Nj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ym(n){return!!n&&"mapValue"in n}function vh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ya(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(t)}setAll(e){let t=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=vh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ya(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yn(vh(this.value))}}function Fj(n){const e=[];return ya(n.fields,(t,r)=>{const i=new xt([t]);if(Ym(r)){const s=Fj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cr(e)}class Ke{constructor(e,t,r,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ke(e,0,J.min(),J.min(),yn.empty(),0)}static newFoundDocument(e,t,r){return new Ke(e,1,t,J.min(),r,0)}static newNoDocument(e,t){return new Ke(e,2,t,J.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Ke(e,3,t,J.min(),yn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sde{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function Lj(n,e=null,t=[],r=[],i=null,s=null,o=null){return new sde(n,e,t,r,i,s,o)}function Ca(n){const e=O(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+gu(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),gh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gu(r)).join(",")),e.ut=t}return e.ut}function wh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!pde(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!xi(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jj(n.startAt,e.startAt)&&jj(n.endAt,e.endAt)}function Jm(n){return R.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class vn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new ade(e,t,r):"array-contains"===t?new cde(e,r):"in"===t?new dde(e,r):"not-in"===t?new hde(e,r):"array-contains-any"===t?new fde(e,r):new vn(e,t,r)}static ct(e,t,r){return"in"===t?new lde(e,r):new ude(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Zs(t,this.value)):null!==t&&wa(this.value)===wa(t)&&this.at(Zs(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ade extends vn{constructor(e,t,r){super(e,t,r),this.key=R.fromName(r.referenceValue)}matches(e){const t=R.comparator(e.key,this.key);return this.at(t)}}class lde extends vn{constructor(e,t){super(e,"in",t),this.keys=Uj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ude extends vn{constructor(e,t){super(e,"not-in",t),this.keys=Uj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Uj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>R.fromName(r.referenceValue))}class cde extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yh(t)&&_h(t.arrayValue,this.value)}}class dde extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_h(this.value.arrayValue,t)}}class hde extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(_h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_h(this.value.arrayValue,t)}}class fde extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_h(this.value.arrayValue,r))}}class eo{constructor(e,t){this.position=e,this.inclusive=t}}class mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function pde(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $j(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?R.comparator(R.fromName(o.referenceValue),t.key):Zs(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function jj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xi(n.position[t],e.position[t]))return!1;return!0}class Es{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.lt=null,this.ft=null}}function _u(n){return new Es(n)}function yu(n){const e=O(n);if(null===e.lt){e.lt=[];const t=function yS(n){for(const e of n.filters)if(e.ht())return e.field;return null}(e),r=function _S(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new mu(t)),e.lt.push(new mu(xt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new mu(xt.keyField(),s))}}}return e.lt}function Vr(n){const e=O(n);if(!e.ft)if("F"===e.limitType)e.ft=Lj(e.path,e.collectionGroup,yu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of yu(e))t.push(new mu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new eo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new eo(e.startAt.position,e.startAt.inclusive):null;e.ft=Lj(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function Eh(n,e){return wh(Vr(n),Vr(e))&&n.limitType===e.limitType}function Wj(n){return`${Ca(Vr(n))}|lt:${n.limitType}`}function wS(n){return`Query(target=${function ode(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gu(r.value)}`;var r}).join(", ")}]`),gh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gu(t)).join(",")),`Target(${e})`}(Vr(n))}; limitType=${n.limitType})`}function ES(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):R.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=$j(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,yu(t),r)||t.endAt&&!function(i,s,o){const a=$j(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,yu(t),r)));var t,r}function zj(n){return(e,t)=>{let r=!1;for(const i of yu(n)){const s=mde(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function mde(n,e,t){const r=n.field.isKeyField()?R.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return null!==a&&null!==l?Zs(a,l):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}function Kj(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function Qj(n){return{integerValue:""+n}}function Yj(n,e){return function xj(n){return"number"==typeof n&&Number.isInteger(n)&&!mh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Qj(e):Kj(n,e)}class Zm{constructor(){this._=void 0}}function _de(n,e,t){return n instanceof vu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof ba?Xj(n,e):n instanceof Ta?Zj(n,e):function(r,i){const s=Jj(r,i),o=eH(s)+eH(r._t);return mS(s)&&mS(r._t)?Qj(o):Kj(r.wt,o)}(n,e)}function yde(n,e,t){return n instanceof ba?Xj(n,e):n instanceof Ta?Zj(n,e):t}function Jj(n,e){return n instanceof wu?mS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vu extends Zm{}class ba extends Zm{constructor(e){super(),this.elements=e}}function Xj(n,e){const t=tH(e);for(const r of n.elements)t.some(i=>xi(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ta extends Zm{constructor(e){super(),this.elements=e}}function Zj(n,e){let t=tH(e);for(const r of n.elements)t=t.filter(i=>!xi(i,r));return{arrayValue:{values:t}}}class wu extends Zm{constructor(e,t){super(),this.wt=e,this._t=t}}function eH(n){return mt(n.integerValue||n.doubleValue)}function tH(n){return yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wde{constructor(e,t){this.version=e,this.transformResults=t}}class lt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function e_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class t_{}function nH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Cu(n.key,lt.none()):new Eu(n.key,n.data,lt.none());{const t=n.data,r=yn.empty();let i=new Ve(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Cs(n.key,r,new Cr(i.toArray()),lt.none())}}function Ede(n,e,t){n instanceof Eu?function(r,i,s){const o=r.value.clone(),a=sH(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Cs?function(r,i,s){if(!e_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=sH(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(iH(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bh(n,e,t,r){return n instanceof Eu?function(i,s,o,a){if(!e_(i.precondition,s))return o;const l=i.value.clone(),u=oH(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cs?function(i,s,o,a){if(!e_(i.precondition,s))return o;const l=oH(i.fieldTransforms,a,s),u=s.data;return u.setAll(iH(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(n,e,t,r):(o=t,e_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Cde(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Jj(r.transform,i||null);null!=s&&(null===t&&(t=yn.empty()),t.set(r.field,s))}return t||null}function rH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&fu(t,r,(i,s)=>function vde(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ba&&r instanceof ba||t instanceof Ta&&r instanceof Ta?fu(t.elements,r.elements,xi):t instanceof wu&&r instanceof wu?xi(t._t,r._t):t instanceof vu&&r instanceof vu);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Eu extends t_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cs extends t_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function sH(n,e,t){const r=new Map;te(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yde(o,a,t[i]))}return r}function oH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,_de(s,o,e))}return r}class Cu extends t_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CS extends t_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bde{constructor(e){this.count=e}}var Mt,Ie;function aH(n){switch(n){default:return H();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function lH(n){if(void 0===n)return At("GRPC error has no .code"),E.UNKNOWN;switch(n){case Mt.OK:return E.OK;case Mt.CANCELLED:return E.CANCELLED;case Mt.UNKNOWN:return E.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return E.INTERNAL;case Mt.UNAVAILABLE:return E.UNAVAILABLE;case Mt.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Mt.NOT_FOUND:return E.NOT_FOUND;case Mt.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Mt.ABORTED:return E.ABORTED;case Mt.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Mt.DATA_LOSS:return E.DATA_LOSS;default:return H()}}(Ie=Mt||(Mt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dj(this.inner)}size(){return this.innerSize}}const Tde=new gt(R.comparator);function rr(){return Tde}const uH=new gt(R.comparator);function Th(...n){let e=uH;for(const t of n)e=e.insert(t.key,t);return e}function cH(n){let e=uH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mi(){return Ih()}function dH(){return Ih()}function Ih(){return new to(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ide=new gt(R.comparator),Dde=new Ve(R.comparator);function he(...n){let e=Dde;for(const t of n)e=e.add(t);return e}const Sde=new Ve(ue);function n_(){return Sde}class Dh{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Dh(J.min(),r,n_(),rr(),he())}}class Sh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sh(Ht.EMPTY_BYTE_STRING,t,he(),he(),he())}}class r_{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class hH{constructor(e,t){this.targetId=e,this.It=t}}class fH{constructor(e,t,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pH{constructor(){this.Tt=0,this.Et=mH(),this.At=Ht.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=he(),t=he(),r=he();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new Sh(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=mH()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Ade{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=rr(),this.Bt=gH(),this.Lt=new Ve(ue)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(Jm(s))if(0===r){const o=new R(s.path);this.Kt(t,o,Ke.newNoDocument(o,J.min()))}else te(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&Jm(a.target)){const l=new R(a.target.path);null!==this.$t.get(l)||this.Xt(o,l)||this.Kt(o,l,Ke.newNoDocument(l,e))}s.vt&&(t.set(o,s.St()),s.Dt())}});let r=he();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ht(l);return!u||2===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new Dh(e,t,this.Lt,this.$t,r);return this.$t=rr(),this.Bt=gH(),this.Lt=new Ve(ue),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new pH,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ve(ue),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||x("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new pH),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function gH(){return new gt(R.comparator)}function mH(){return new gt(R.comparator)}const xde={asc:"ASCENDING",desc:"DESCENDING"},Mde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class kde{constructor(e,t){this.databaseId=e,this.dt=t}}function Ah(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _H(n,e){return n.dt?e.toBase64():e.toUint8Array()}function Nde(n,e){return Ah(n,e.toTimestamp())}function Xt(n){return te(!!n),J.fromTimestamp(function(e){const t=Ys(e);return new at(t.seconds,t.nanos)}(n))}function bS(n,e){return(t=n,new Te(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function yH(n){const e=Te.fromString(n);return te(SH(e)),e}function xh(n,e){return bS(n.databaseId,e.path)}function ki(n,e){const t=yH(e);if(t.get(1)!==n.databaseId.projectId)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new R(wH(t))}function TS(n,e){return bS(n.databaseId,e)}function Mh(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wH(n){return te(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function EH(n,e,t){return{name:xh(n,e),fields:t.value.mapValue.fields}}function bH(n,e){return{documents:[TS(n,e.path)]}}function TH(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=TS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=TS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0===l.length)return;const u=l.map(c=>function(d){if("=="===d.op){if(Nj(d.value))return{unaryFilter:{field:bu(d.field),op:"IS_NAN"}};if(kj(d.value))return{unaryFilter:{field:bu(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(Nj(d.value))return{unaryFilter:{field:bu(d.field),op:"IS_NOT_NAN"}};if(kj(d.value))return{unaryFilter:{field:bu(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bu(d.field),op:Vde(d.op),value:d.value}}}(c));return 1===u.length?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(u=>{return{field:bu((c=u).field),direction:Lde(c.dir)};var c})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(u=e.limit,n.dt||gh(u)?u:{value:u});var u,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function IH(n){let e=function vH(n){const e=yH(n);return 4===e.length?Te.emptyPath():wH(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){te(1===r);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=DH(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(c=>{return new mu(Tu((d=c).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(c){let d;return d="object"==typeof c?c.value:c,gh(d)?null:d}(t.limit));let l=null;var c;t.startAt&&(l=new eo((c=t.startAt).values||[],!!c.before));let u=null;return t.endAt&&(u=function(c){return new eo(c.values||[],!c.before)}(t.endAt)),function Hj(n,e,t,r,i,s,o,a){return new Es(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",l,u)}function DH(n){return n?void 0!==n.unaryFilter?[Ude(n)]:void 0!==n.fieldFilter?[Bde(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>DH(e)).reduce((e,t)=>e.concat(t)):H():[]}function Lde(n){return xde[n]}function Vde(n){return Mde[n]}function bu(n){return{fieldPath:n.canonicalString()}}function Tu(n){return xt.fromServerFormat(n.fieldPath)}function Bde(n){return vn.create(Tu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ude(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Tu(n.unaryFilter.field);return vn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tu(n.unaryFilter.field);return vn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tu(n.unaryFilter.field);return vn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Tu(n.unaryFilter.field);return vn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return H()}}function $de(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class SS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ede(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=nH(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,(t,r)=>rH(t,r))&&fu(this.baseMutations,e.baseMutations,(t,r)=>rH(t,r))}}class AS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){te(e.mutations.length===r.length);let i=Ide;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AS(e,t,r,i)}}class xS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class no{constructor(e,t,r,i,s=J.min(),o=J.min(),a=Ht.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class PH{constructor(e){this.ne=e}}function MS(n){const e=IH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?function Gj(n,e,t){return new Es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}(e,e.limit,"L"):e}class Aa{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),mh(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(va(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Rj(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):H()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),R.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}Aa.ye=new Aa;class fhe{constructor(){this.ze=new NS}addToCollectionParentIndex(e,t){return this.ze.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(Er.min())}updateCollectionGroup(e,t,r){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class NS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ve(Te.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(Te.comparator)).toArray()}}new Uint8Array(0);class ir{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);class ka{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ka(0)}static Rn(){return new ka(-1)}}class bhe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tG{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&bh(r.mutation,i,Cr.empty(),at.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){const i=Mi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Th();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=rr();const o=Ih(),a=Ih();return t.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(void 0===c||c.mutation instanceof Cs)?s=s.insert(u.key,u):void 0!==c&&(o.set(u.key,c.mutation.getFieldMask()),bh(c.mutation,u,c.mutation.getFieldMask(),at.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),t.forEach((u,c)=>{var d;return a.set(u,new bhe(c,null!==(d=o.get(u))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ih();let i=new gt((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(null===u)return;let c=r.get(l)||Cr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||he()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=dH();c.forEach(h=>{if(!s.has(h)){const f=nH(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return R.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function vS(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):w.resolve(Mi());let a=-1,l=s;return o.next(u=>w.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?w.resolve():this.getBaseDocument(e,c,d).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,he())).next(c=>({batchId:a,changes:cH(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new R(t)).next(r=>{let i=Th();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Th();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const l=(u=t,c=a.child(i),new Es(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,c;return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((a,l)=>{const u=l.getKey();null===i.get(u)&&(i=i.insert(u,Ke.newInvalidDocument(u)))});let o=Th();return i.forEach((a,l)=>{const u=s.get(a);void 0!==u&&bh(u.mutation,l,Cr.empty(),at.now()),ES(t,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):w.resolve(Ke.newInvalidDocument(t))}}class The{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return w.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Xt(r.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:MS(r.bundledQuery),readTime:Xt(r.readTime)}),w.resolve();var r}}class Ihe{constructor(){this.overlays=new gt(R.comparator),this.Xn=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mi();return w.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),w.resolve()}getOverlaysForCollection(e,t,r){const i=Mi(),s=t.length+1,o=new R(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return w.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new gt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let c=s.get(u.largestBatchId);null===c&&(c=Mi(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Mi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return w.resolve(a)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xS(t,r));let s=this.Xn.get(t);void 0===s&&(s=he(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class RS{constructor(){this.Zn=new Ve(en.ts),this.es=new Ve(en.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new en(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new en(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new R(new Te([])),r=new en(t,e),i=new en(t,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new R(new Te([])),r=new en(t,e),i=new en(t,e+1);let s=he();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new en(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return R.comparator(e.key,t.key)||ue(e.ls,t.ls)}static ns(e,t){return ue(e.ls,t.ls)||R.comparator(e.key,t.key)}}class Dhe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ve(en.ts)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const o=new SS(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new en(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),i=new en(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ue);return t.forEach(i=>{const s=new en(i,0),o=new en(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),w.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;R.isDocumentKey(s)||(s=s.child(""));const o=new en(new R(s),0);let a=new Ve(ue);return this.ds.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.ls)),!0)},o),w.resolve(this.gs(a))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){te(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return w.forEach(t.mutations,i=>{const s=new en(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new en(t,0),i=this.ds.firstAfterOrEqual(r);return w.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class She{constructor(e){this.ps=e,this.docs=new gt(R.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return w.resolve(r?r.document.mutableCopy():Ke.newInvalidDocument(t))}getEntries(e,t){let r=rr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ke.newInvalidDocument(i))}),w.resolve(r)}getAllFromCollection(e,t,r){let i=rr();const s=new R(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||dS(Cj(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return w.resolve(i)}getAllFromCollectionGroup(e,t,r,i){H()}Is(e,t){return w.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ahe(this)}getSize(e){return w.resolve(this.size)}}class Ahe extends class whe{constructor(){this.changes=new to(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ke.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?w.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),w.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class xhe{constructor(e){this.persistence=e,this.Ts=new to(t=>Ca(t),wh),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Es=0,this.As=new RS,this.targetCount=0,this.Rs=ka.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),w.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.vn(t),w.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return w.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),w.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),w.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return w.resolve(r)}containsKey(e,t){return w.resolve(this.As.containsKey(t))}}class nG{constructor(e,t){this.bs={},this.overlays={},this.Ps=new nr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new xhe(this),this.indexManager=new fhe,this.remoteDocumentCache=new She(r=>this.referenceDelegate.Ss(r)),this.wt=new PH(t),this.Ds=new The(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ihe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Dhe(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);const i=new Mhe(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return w.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class Mhe extends class Yce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class h_{constructor(e){this.persistence=e,this.ks=new RS,this.Os=null}static Ms(e){return new h_(e)}get Fs(){if(this.Os)return this.Os;throw H()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),w.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),w.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Fs,r=>{const i=R.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,J.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return w.or([()=>w.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class LS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=he(),i=he();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LS(e,t.fromCache,r,i)}}class iG{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){return w.resolve(null)}xi(e,t,r,i){return function gde(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(J.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(t,s);return this.Oi(t,o,r,i)?this.Ni(e,t):(lS()<=Ee.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wS(t)),this.Mi(e,o,t,function Ej(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(1e9===r?new at(t+1,0):new at(t,r));return new Er(i,R.empty(),e)}(i,-1)))})}ki(e,t){let r=new Ve(zj(e));return t.forEach((i,s)=>{ES(e,s)&&(r=r.add(s))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return lS()<=Ee.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",wS(t)),this.Di.getDocumentsMatchingQuery(e,t,Er.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Nhe{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new gt(ue),this.Bi=new to(s=>Ca(s),wh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tG(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function oG(n,e){return VS.apply(this,arguments)}function VS(){return VS=_(function*(n,e){const t=O(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=he();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ki:u,removedBatchIds:o,addedBatchIds:a}))})})}),VS.apply(this,arguments)}function Rhe(n,e){const t=O(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);te(null!==g),p.version.compareTo(g)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=he();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aG(n){const e=O(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function Phe(n,e){const t=O(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(t.Vs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>t.Vs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;e.targetMismatches.has(d)?f=f.withResumeToken(Ht.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),g=f,m=c,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(t.Vs.updateTargetData(s,f))});let l=rr(),u=he();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(function lG(n,e,t){let r=he(),i=he();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=rr();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Gi:o,Qi:i}})}(s,o,e.documentUpdates).next(c=>{l=c.Gi,u=c.Qi})),!r.isEqual(J.min())){const c=t.Vs.getLastRemoteSnapshotVersion(s).next(d=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.$i=i,s))}function Ohe(n,e){const t=O(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Su(n,e){const t=O(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):t.Vs.allocateTargetId(r).next(o=>(i=new no(e,o,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Au(n,e,t){return BS.apply(this,arguments)}function BS(){return BS=_(function*(n,e,t){const r=O(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qs(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),BS.apply(this,arguments)}function p_(n,e,t){const r=O(n);let i=J.min(),s=he();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=O(a),d=c.Bi.get(u);return void 0!==d?w.resolve(c.$i.get(d)):c.Vs.getTargetData(l,u)}(r,o,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,t?i:J.min(),t?s:he())).next(a=>(function dG(n,e,t){let r=J.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}(r,function qj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ji:s})))}class GS{constructor(){this.activeTargetIds=n_()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pG{constructor(){this.Fr=new GS,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new GS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vhe{Br(e){}shutdown(){}}class gG{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Bhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Uhe{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class $he extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const o=this.oo(e,t);x("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(l=>(x("RestConnection","Received: ",l),l),l=>{throw Gm("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}ao(e,t,r,i,s,o){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${Bhe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,o)=>{const a=new $ce;a.listenOnce(Vce.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case aS.NO_ERROR:const u=a.getResponseJson();x("Connection","XHR received:",JSON.stringify(u)),s(u);break;case aS.TIMEOUT:x("Connection",'RPC "'+e+'" timed out'),o(new A(E.DEADLINE_EXCEEDED,"Request time out"));break;case aS.HTTP_ERROR:const c=a.getStatus();if(x("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(p)>=0?p:E.UNKNOWN}(d.status);o(new A(h,d.message))}else o(new A(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new A(E.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{x("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(t,"POST",l,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fce(),o=Lce(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Uce({})),this.uo(a.initMessageHeaders,t,r),Pg()||XC()||function hne(){return yr().indexOf("Electron/")>=0}()||function fne(){const n=yr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()||function pne(){return yr().indexOf("MSAppHost/")>=0}()||Og()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");x("Connection","Creating WebChannel: "+l,a);const u=s.createWebChannel(l,a);let c=!1,d=!1;const h=new Uhe({jr:p=>{d?x("Connection","Not sending because WebChannel is closed:",p):(c||(x("Connection","Opening WebChannel transport."),u.open(),c=!0),x("Connection","WebChannel sending:",p),u.send(p))},Wr:()=>u.close()}),f=(p,g,m)=>{p.listen(g,v=>{try{m(v)}catch(C){setTimeout(()=>{throw C},0)}})};return f(u,Hm.EventType.OPEN,()=>{d||x("Connection","WebChannel transport opened.")}),f(u,Hm.EventType.CLOSE,()=>{d||(d=!0,x("Connection","WebChannel transport closed"),h.eo())}),f(u,Hm.EventType.ERROR,p=>{d||(d=!0,Gm("Connection","WebChannel transport errored:",p),h.eo(new A(E.UNAVAILABLE,"The operation could not be completed")))}),f(u,Hm.EventType.MESSAGE,p=>{var g;if(!d){const m=p.data[0];te(!!m);const v=m,C=v.error||(null===(g=v[0])||void 0===g?void 0:g.error);if(C){x("Connection","WebChannel received error:",C);const y=C.status;let D=function(j){const fe=Mt[j];if(void 0!==fe)return lH(fe)}(y),F=C.message;void 0===D&&(D=E.INTERNAL,F="Unknown error status: "+y+" with message "+C.message),d=!0,h.eo(new A(D,F)),u.close()}else x("Connection","WebChannel received:",m),h.no(m)}}),f(o,Bce.STAT_EVENT,p=>{p.stat===gj.PROXY?x("Connection","Detected buffering proxy"):p.stat===gj.NOPROXY&&x("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.Zr()},0),h}}function __(){return typeof document<"u"?document:null}function Uh(n){return new kde(n,!0)}class qS{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class _G{constructor(e,t,r,i,s,o,a,l){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new qS(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return _(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return _(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return _(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(At(t.toString()),At("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new A(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io(_(function*(){e.state=0,e.start()}))}qo(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jhe extends _G{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Pde(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:H(),i=e.targetChange.targetIds||[],s=function(l,u){return l.dt?(te(void 0===u||"string"==typeof u),Ht.fromBase64String(u||"")):(te(void 0===u||u instanceof Uint8Array),Ht.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=void 0===l.code?E.UNKNOWN:lH(l.code);return new A(u,l.message||"")}(o);t=new fH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ki(n,r.document.name),s=Xt(r.document.updateTime),o=new yn({mapValue:{fields:r.document.fields}}),a=Ke.newFoundDocument(i,s,o);t=new r_(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ki(n,r.document),s=r.readTime?Xt(r.readTime):J.min(),o=Ke.newNoDocument(i,s);t=new r_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ki(n,r.document);t=new r_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return H();{const r=e.filter,s=new bde(r.count||0);t=new hH(r.targetId,s)}}var l;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return J.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Xt(s.readTime):J.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Mh(this.wt),t.addTarget=function(i,s){let o;const a=s.target;return o=Jm(a)?{documents:bH(i,a)}:{query:TH(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=_H(i,s.resumeToken):s.snapshotVersion.compareTo(J.min())>0&&(o.readTime=Ah(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=function Fde(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Mh(this.wt),t.removeTarget=e,this.Mo(t)}}class Hhe extends _G{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Ode(n,e){return n&&n.length>0?(te(void 0!==e),n.map(t=>function(r,i){let s=Xt(r.updateTime?r.updateTime:i);return s.isEqual(J.min())&&(s=Xt(i)),new wde(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.Jo(r,t)}return te(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Mh(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function kh(n,e){let t;if(e instanceof Eu)t={update:EH(n,e.key,e.value)};else if(e instanceof Cu)t={delete:xh(n,e.key)};else if(e instanceof Cs)t={update:EH(n,e.key,e.data),updateMask:$de(e.fieldMask)};else{if(!(e instanceof CS))return H();t={verify:xh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof vu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ba)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ta)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof wu)return{fieldPath:s.field.canonicalString(),increment:o._t};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Nde(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:H()),t;var i}(this.wt,r))};this.Mo(t)}}class Ghe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new A(E.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(E.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class Whe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(At(t),this.su=!1):x("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class qhe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(a=>{r.enqueueAndForget(_(function*(){var l;so(o)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(l=_(function*(u){const c=O(u);c.lu.add(4),yield xu(c),c._u.set("Unknown"),c.lu.delete(4),yield $h(c)}),function(u){return l.apply(this,arguments)})(o))}))}),this._u=new Whe(r,i)}}function $h(n){return zS.apply(this,arguments)}function zS(){return zS=_(function*(n){if(so(n))for(const e of n.fu)yield e(!0)}),zS.apply(this,arguments)}function xu(n){return KS.apply(this,arguments)}function KS(){return KS=_(function*(n){for(const e of n.fu)yield e(!1)}),KS.apply(this,arguments)}function y_(n,e){const t=O(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),JS(t)?YS(t):ku(t).Co()&&QS(t,e))}function jh(n,e){const t=O(n),r=ku(t);t.hu.delete(e),r.Co()&&yG(t,e),0===t.hu.size&&(r.Co()?r.ko():so(t)&&t._u.set("Unknown"))}function QS(n,e){n.wu.Nt(e.targetId),ku(n).Qo(e)}function yG(n,e){n.wu.Nt(e),ku(n).jo(e)}function YS(n){n.wu=new Ade({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),ku(n).start(),n._u.iu()}function JS(n){return so(n)&&!ku(n).Do()&&n.hu.size>0}function so(n){return 0===O(n).lu.size}function vG(n){n.wu=void 0}function zhe(n){return XS.apply(this,arguments)}function XS(){return XS=_(function*(n){n.hu.forEach((e,t)=>{QS(n,e)})}),XS.apply(this,arguments)}function Khe(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=_(function*(n,e){vG(n),JS(n)?(n._u.uu(e),YS(n)):n._u.set("Unknown")}),ZS.apply(this,arguments)}function Qhe(n,e,t){return eA.apply(this,arguments)}function eA(){return eA=_(function*(n,e,t){if(n._u.set("Online"),e instanceof fH&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.hu.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.hu.delete(a),i.wu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield v_(n,r)}else if(e instanceof r_?n.wu.Ut(e):e instanceof hH?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(J.min()))try{const r=yield aG(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.hu.get(l);u&&i.hu.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.hu.get(a);if(!l)return;i.hu.set(a,l.withResumeToken(Ht.EMPTY_BYTE_STRING,l.snapshotVersion)),yG(i,a);const u=new no(l.target,a,1,l.sequenceNumber);QS(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){x("RemoteStore","Failed to raise snapshot:",r),yield v_(n,r)}var r}),eA.apply(this,arguments)}function v_(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=_(function*(n,e,t){if(!Qs(e))throw e;n.lu.add(1),yield xu(n),n._u.set("Offline"),t||(t=()=>aG(n.localStore)),n.asyncQueue.enqueueRetryable(_(function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield $h(n)}))}),tA.apply(this,arguments)}function wG(n,e){return e().catch(t=>v_(n,t,e))}function Mu(n){return nA.apply(this,arguments)}function nA(){return nA=_(function*(n){const e=O(n),t=oo(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Yhe(e);)try{const i=yield Ohe(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,Jhe(e,i)}catch(i){yield v_(e,i)}EG(e)&&CG(e)}),nA.apply(this,arguments)}function Yhe(n){return so(n)&&n.au.length<10}function Jhe(n,e){n.au.push(e);const t=oo(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function EG(n){return so(n)&&!oo(n).Do()&&n.au.length>0}function CG(n){oo(n).start()}function Xhe(n){return rA.apply(this,arguments)}function rA(){return rA=_(function*(n){oo(n).Xo()}),rA.apply(this,arguments)}function Zhe(n){return iA.apply(this,arguments)}function iA(){return iA=_(function*(n){const e=oo(n);for(const t of n.au)e.Ho(t.mutations)}),iA.apply(this,arguments)}function efe(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=_(function*(n,e,t){const r=n.au.shift(),i=AS.from(r,e,t);yield wG(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mu(n)}),sA.apply(this,arguments)}function tfe(n,e){return oA.apply(this,arguments)}function oA(){return oA=_(function*(n,e){var t;e&&oo(n).zo&&(yield(t=_(function*(r,i){if(aH(s=i.code)&&s!==E.ABORTED){const o=r.au.shift();oo(r).No(),yield wG(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Mu(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),EG(n)&&CG(n)}),oA.apply(this,arguments)}function bG(n,e){return aA.apply(this,arguments)}function aA(){return aA=_(function*(n,e){const t=O(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=so(t);t.lu.add(3),yield xu(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield $h(t)}),aA.apply(this,arguments)}function uA(){return uA=_(function*(n,e){const t=O(n);e?(t.lu.delete(2),yield $h(t)):e||(t.lu.add(2),yield xu(t),t._u.set("Unknown"))}),uA.apply(this,arguments)}function ku(n){return n.mu||(n.mu=function(e,t,r){const i=O(e);return i.tu(),new jhe(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:zhe.bind(null,n),Jr:Khe.bind(null,n),Go:Qhe.bind(null,n)}),n.fu.push(function(){var e=_(function*(t){t?(n.mu.No(),JS(n)?YS(n):n._u.set("Unknown")):(yield n.mu.stop(),vG(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function oo(n){return n.gu||(n.gu=function(e,t,r){const i=O(e);return i.tu(),new Hhe(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:Xhe.bind(null,n),Jr:tfe.bind(null,n),Yo:Zhe.bind(null,n),Jo:efe.bind(null,n)}),n.fu.push(function(){var e=_(function*(t){t?(n.gu.No(),yield Mu(n)):(yield n.gu.stop(),n.au.length>0&&(x("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class cA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new cA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nu(n,e){if(At("AsyncQueue",`${e}: ${n}`),Qs(n))return new A(E.UNAVAILABLE,`${e}: ${n}`);throw n}class Ru{constructor(e){this.comparator=e?(t,r)=>e(t,r)||R.comparator(t.key,r.key):(t,r)=>R.comparator(t.key,r.key),this.keyedMap=Th(),this.sortedSet=new gt(this.comparator)}static emptySet(e){return new Ru(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ru)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class TG{constructor(){this.yu=new gt(R.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):H():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Pu{constructor(e,t,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Pu(e,t,Ru.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nfe{constructor(){this.Iu=void 0,this.listeners=[]}}class rfe{constructor(){this.queries=new to(e=>Wj(e),Eh),this.onlineState="Unknown",this.Tu=new Set}}function hA(){return hA=_(function*(n,e){const t=O(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new nfe),i)try{s.Iu=yield t.onListen(r)}catch(o){const a=Nu(o,`Initialization of query '${wS(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&gA(t)}),hA.apply(this,arguments)}function pA(){return pA=_(function*(n,e){const t=O(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),pA.apply(this,arguments)}function ife(n,e){const t=O(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&gA(t)}function sfe(n,e,t){const r=O(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function gA(n){n.Tu.forEach(e=>{e.next()})}class mA{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Pu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Pu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class SG{constructor(e){this.key=e}}class AG{constructor(e){this.key=e}}class xG{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=he(),this.mutatedKeys=he(),this.Lu=zj(e),this.Uu=new Ru(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new TG,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=ES(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Qu(h,f)||(r.track({type:2,doc:f}),m=!0,(l&&this.Lu(f,l)>0||u&&this.Lu(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(l||u)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Oi:a,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((u,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(d)-f(h)}(u.type,c.type)||this.Lu(u.doc,c.doc)),this.ju(r);const o=t?this.Wu():[],a=0===this.Bu.size&&this.current?1:0,l=a!==this.$u;return this.$u=a,0!==s.length||l?{snapshot:new Pu(this.query,e.Uu,i,s,e.mutatedKeys,0===a,l,!1),zu:o}:{zu:o}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new TG,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=he(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new AG(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new SG(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=he();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Pu.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class lfe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ufe{constructor(e){this.key=e,this.Xu=!1}}class cfe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new to(a=>Wj(a),Eh),this.ec=new Map,this.nc=new Set,this.sc=new gt(R.comparator),this.ic=new Map,this.rc=new RS,this.oc={},this.uc=new Map,this.cc=ka.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function dfe(n,e){return _A.apply(this,arguments)}function _A(){return _A=_(function*(n,e){const t=UA(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=yield Su(t.localStore,Vr(e));t.isPrimaryClient&&y_(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield yA(t,e,r,"current"===a)}return i}),_A.apply(this,arguments)}function yA(n,e,t,r){return vA.apply(this,arguments)}function vA(){return vA=_(function*(n,e,t,r){n.hc=(c,d,h)=>{return(f=_(function*(p,g,m,v){let C=g.view.Ku(m);C.Oi&&(C=yield p_(p.localStore,g.query,!1).then(({documents:F})=>g.view.Ku(F,C)));const y=v&&v.targetChanges.get(g.targetId),D=g.view.applyChanges(C,p.isPrimaryClient,y);return xA(p,g.targetId,D.zu),D.snapshot}),function(p,g,m,v){return f.apply(this,arguments)})(n,c,d,h);var f};const i=yield p_(n.localStore,e,!0),s=new xG(e,i.ji),o=s.Ku(i.documents),a=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),l=s.applyChanges(o,n.isPrimaryClient,a);xA(n,t,l.zu);const u=new lfe(e,t,s);return n.tc.set(e,u),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),l.snapshot}),vA.apply(this,arguments)}function hfe(n,e){return wA.apply(this,arguments)}function wA(){return wA=_(function*(n,e){const t=O(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!Eh(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Au(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),jh(t.remoteStore,r.targetId),Ou(t,r.targetId)}).catch(Ks))):(Ou(t,r.targetId),yield Au(t.localStore,r.targetId,!0))}),wA.apply(this,arguments)}function EA(){return EA=_(function*(n,e,t){const r=$A(n);try{const i=yield function(s,o){const a=O(s),l=at.now(),u=o.reduce((h,f)=>h.add(f.key),he());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=rr(),p=he();return a.Ui.getEntries(h,u).next(g=>{f=g,f.forEach((m,v)=>{v.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{c=g;const m=[];for(const v of o){const C=Cde(v,c.get(v.key).overlayedDocument);null!=C&&m.push(new Cs(v.key,C,Fj(C.value.mapValue),lt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:cH(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.oc[s.currentUser.toKey()];l||(l=new gt(ue)),l=l.insert(o,a),s.oc[s.currentUser.toKey()]=l}(r,i.batchId,t),yield bs(r,i.changes),yield Mu(r.remoteStore)}catch(i){const s=Nu(i,"Failed to persist write");t.reject(s)}}),EA.apply(this,arguments)}function MG(n,e){return CA.apply(this,arguments)}function CA(){return CA=_(function*(n,e){const t=O(n);try{const r=yield Phe(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.ic.get(s);o&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?te(o.Xu):i.removedDocuments.size>0&&(te(o.Xu),o.Xu=!1))}),yield bs(t,r,e)}catch(r){yield Ks(r)}}),CA.apply(this,arguments)}function kG(n,e,t){const r=O(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=O(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.Eu(o)&&(l=!0)}),l&&gA(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pfe(n,e,t){return bA.apply(this,arguments)}function bA(){return bA=_(function*(n,e,t){const r=O(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new gt(R.comparator);o=o.insert(s,Ke.newNoDocument(s,J.min()));const a=he().add(s),l=new Dh(J.min(),new Map,new Ve(ue),o,a);yield MG(r,l),r.sc=r.sc.remove(s),r.ic.delete(e),MA(r)}else yield Au(r.localStore,e,!1).then(()=>Ou(r,e,t)).catch(Ks)}),bA.apply(this,arguments)}function gfe(n,e){return TA.apply(this,arguments)}function TA(){return TA=_(function*(n,e){const t=O(n),r=e.batch.batchId;try{const i=yield Rhe(t.localStore,e);AA(t,r,null),SA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bs(t,i)}catch(i){yield Ks(i)}}),TA.apply(this,arguments)}function mfe(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=_(function*(n,e,t){const r=O(n);try{const i=yield function(s,o){const a=O(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(te(null!==c),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);AA(r,e,t),SA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bs(r,i)}catch(i){yield Ks(i)}}),IA.apply(this,arguments)}function SA(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function AA(n,e,t){const r=O(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ou(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||NG(n,r)})}function NG(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(jh(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),MA(n))}function xA(n,e,t){for(const r of t)r instanceof SG?(n.rc.addReference(r.key,e),yfe(n,r)):r instanceof AG?(x("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||NG(n,r.key)):H()}function yfe(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(x("SyncEngine","New document in limbo: "+t),n.nc.add(r),MA(n))}function MA(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new R(Te.fromString(e)),r=n.cc.next();n.ic.set(r,new ufe(t)),n.sc=n.sc.insert(t,r),y_(n.remoteStore,new no(Vr(_u(t.path)),r,2,nr.ot))}}function bs(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=_(function*(n,e,t){const r=O(n),i=[],s=[],o=[];var a;r.tc.isEmpty()||(r.tc.forEach((a,l)=>{o.push(r.hc(l,e,t).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),i.push(u);const c=LS.Vi(l.targetId,u);s.push(c)}}))}),yield Promise.all(o),r.Zu.Go(i),yield(a=_(function*(l,u){const c=O(l);try{yield c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(u,h=>w.forEach(h.Pi,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.vi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Qs(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.$i.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);c.$i=c.$i.insert(h,g)}}}),function(l,u){return a.apply(this,arguments)})(r.localStore,s))}),kA.apply(this,arguments)}function vfe(n,e){return NA.apply(this,arguments)}function NA(){return NA=_(function*(n,e){const t=O(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const r=yield oG(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(o=>{o.forEach(a=>{a.reject(new A(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bs(t,r.Ki)}var i}),NA.apply(this,arguments)}function wfe(n,e){const t=O(n),r=t.ic.get(e);if(r&&r.Xu)return he().add(r.key);{let i=he();const s=t.ec.get(e);if(!s)return i;for(const o of s){const a=t.tc.get(o);i=i.unionWith(a.view.qu)}return i}}function UA(n){const e=O(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pfe.bind(null,e),e.Zu.Go=ife.bind(null,e.eventManager),e.Zu.lc=sfe.bind(null,e.eventManager),e}function $A(n){const e=O(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mfe.bind(null,e),e}class xfe{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return _(function*(){t.wt=Uh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return function sG(n,e,t,r){return new Nhe(n,e,t,r)}(this.persistence,new iG,e.initialUser,this.wt)}_c(e){return new nG(h_.Ms,this.wt)}dc(e){return new pG}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jA{initialize(e,t){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kG(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vfe.bind(null,r.syncEngine),yield function lA(n,e){return uA.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rfe}createDatastore(e){const t=Uh(e.databaseInfo.databaseId),r=new $he(e.databaseInfo);return new Ghe(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>kG(this.syncEngine,a,0),o=gG.V()?new gG:new Vhe,new qhe(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,l,u){const c=new cfe(r,i,s,o,a,l);return u&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=_(function*(t){const r=O(t);x("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield xu(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class w_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ofe{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=vj.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){x("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Nu(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function FG(n,e){return HA.apply(this,arguments)}function HA(){return HA=_(function*(n,e){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield oG(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),HA.apply(this,arguments)}function LG(n,e){return GA.apply(this,arguments)}function GA(){return GA=_(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WA(n);x("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>bG(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>bG(e.remoteStore,s)),n.onlineComponents=e}),GA.apply(this,arguments)}function WA(n){return qA.apply(this,arguments)}function qA(){return qA=_(function*(n){return n.offlineComponents||(x("FirestoreClient","Using default OfflineComponentProvider"),yield FG(n,new xfe)),n.offlineComponents}),qA.apply(this,arguments)}function E_(n){return zA.apply(this,arguments)}function zA(){return zA=_(function*(n){return n.onlineComponents||(x("FirestoreClient","Using default OnlineComponentProvider"),yield LG(n,new jA)),n.onlineComponents}),zA.apply(this,arguments)}function Fu(n){return YA.apply(this,arguments)}function YA(){return YA=_(function*(n){const e=yield E_(n),t=e.eventManager;return t.onListen=dfe.bind(null,e.syncEngine),t.onUnlisten=hfe.bind(null,e.syncEngine),t}),YA.apply(this,arguments)}const jG=new Map;function JA(n,e,t){if(!t)throw new A(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HG(n){if(!R.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GG(n){if(R.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function C_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":H()}function De(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new A(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=C_(n);throw new A(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class qG{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new A(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new A(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Gfe(n,e,t,r){if(!0===e&&!0===r)throw new A(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qG({}),this._settingsFrozen=!1,e instanceof Js?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new A(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Js(i.options.projectId)}(e))}get app(){if(!this._app)throw new A(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new A(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qG(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jce;switch(t.type){case"gapi":const r=t.client;return te(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new qce(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new A(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jG.get(e);t&&(x("ComponentProvider","Removing Datastore"),jG.delete(e),t.terminate())}(this),Promise.resolve()}}class vt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class Nn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nn(this.firestore,e,this._query)}}class Ri extends Nn{constructor(e,t,r){super(e,t,_u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new R(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function Wfe(n,e,...t){if(n=xn(n),JA("collection","path",e),n instanceof Hh){const r=Te.fromString(e,...t);return GG(r),new Ri(n,null,r)}{if(!(n instanceof vt||n instanceof Ri))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Te.fromString(e,...t));return GG(r),new Ri(n.firestore,null,r)}}function zG(n,e,...t){if(n=xn(n),1===arguments.length&&(e=vj.I()),JA("doc","path",e),n instanceof Hh){const r=Te.fromString(e,...t);return HG(r),new vt(n,null,new R(r))}{if(!(n instanceof vt||n instanceof Ri))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Te.fromString(e,...t));return HG(r),new vt(n.firestore,n instanceof Ri?n.converter:null,new R(r))}}class zfe{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new qS(this,"async_queue_retry"),this.Kc=()=>{const t=__();t&&x("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=__();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=__();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Jt;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return _(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Qs(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,At("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=cA.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&H()}verifyOperationInProgress(){}zc(){var e=this;return _(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function XA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class tt extends Hh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new zfe,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KG(this),this._firestoreClient.terminate()}}function Qfe(n=gb()){return xd(n,"firestore").getImmediate()}function Gt(n){return n._firestoreClient||KG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KG(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nde(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new Ofe(n._authCredentials,n._appCheckCredentials,n._queue,r)}class Lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new A(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ra(Ht.fromBase64String(e))}catch(t){throw new A(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ra(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ZA{constructor(e){this._methodName=e}}class ex{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new A(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}const Yfe=/^__.*__$/;class Jfe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Eu(e,this.data,t,this.fieldTransforms)}}class JG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class b_{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new b_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return I_(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(XG(this.Zc)&&Yfe.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Xfe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Uh(e)}aa(e,t,r,i=!1){return new b_({Zc:e,methodName:t,ca:r,path:xt.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Vu(n){const e=n._freezeSettings(),t=Uh(n._databaseId);return new Xfe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tx(n,e,t,r,i,s={}){const o=n.aa(s.merge||s.mergeFields?2:0,e,t,i);rx("Data must be an object, but it was:",o,r);const a=rW(r,o);let l,u;if(s.merge)l=new Cr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=ix(e,d,t);if(!o.contains(h))throw new A(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);sW(c,h)||c.push(h)}l=new Cr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new Jfe(new yn(a),l,u)}class Gh extends ZA{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}function Pa(n,e){if(iW(n=xn(n)))return rx("Unsupported field value:",e,n),rW(n,e);if(n instanceof ZA)return function(t,r){if(!XG(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=Pa(o,r.ra(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=xn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yj(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=at.fromDate(t);return{timestampValue:Ah(r.wt,i)}}if(t instanceof at){const i=new at(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ah(r.wt,i)}}if(t instanceof ex)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ra)return{bytesValue:_H(r.wt,t._byteString)};if(t instanceof vt){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${C_(t)}`)}(n,e)}function rW(n,e){const t={};return Dj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(n,(r,i)=>{const s=Pa(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function iW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof at||n instanceof ex||n instanceof Ra||n instanceof vt||n instanceof ZA)}function rx(n,e,t){if(!iW(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=C_(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function ix(n,e,t){if((e=xn(e))instanceof Lu)return e._internalPath;if("string"==typeof e)return T_(n,e);throw I_("Field path arguments must be of type string or ",n,!1,void 0,t)}const npe=new RegExp("[~\\*/\\[\\]]");function T_(n,e,t){if(e.search(npe)>=0)throw I_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw I_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function I_(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new A(E.INVALID_ARGUMENT,a+n+l)}function sW(n,e){return n.some(t=>t.isEqual(e))}class sx{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(D_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rpe extends sx{data(){return super.data()}}function D_(n,e){return"string"==typeof e?T_(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}class Oa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bu extends sx{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new S_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(D_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class S_ extends Bu{data(e={}){return super.data(e)}}class Uu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new S_(this._firestore,this._userDataWriter,r.key,r,new Oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new A(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new S_(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Oa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new S_(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Oa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:ipe(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ipe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}class Fa extends class lpe{convertValue(e,t="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw H()}}convertObject(e,t){const r={};return ya(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ex(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Aj(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ph(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Te.fromString(e);te(SH(r));const i=new Js(r.get(1),r.get(3)),s=new R(r.popFirst(5));return i.isEqual(t)||At(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function cpe(n,e,t){n=De(n,vt);const r=De(n.firestore,tt),i=function ox(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return Wh(r,[tx(Vu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,lt.none())])}function dpe(n,e,t,...r){n=De(n,vt);const i=De(n.firestore,tt),s=Vu(i);let o;return o="string"==typeof(e=xn(e))||e instanceof Lu?function tW(n,e,t,r,i,s){const o=n.aa(1,e,t),a=[ix(e,r,t)],l=[i];if(s.length%2!=0)throw new A(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(ix(e,s[h])),l.push(s[h+1]);const u=[],c=yn.empty();for(let h=a.length-1;h>=0;--h)if(!sW(u,a[h])){const f=a[h];let p=l[h];p=xn(p);const g=o.ia(f);if(p instanceof Gh)u.push(f);else{const m=Pa(p,g);null!=m&&(u.push(f),c.set(f,m))}}const d=new Cr(u);return new JG(c,d,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function eW(n,e,t,r){const i=n.aa(1,e,t);rx("Data must be an object, but it was:",i,r);const s=[],o=yn.empty();ya(r,(l,u)=>{const c=T_(e,l,t);u=xn(u);const d=i.ia(c);if(u instanceof Gh)s.push(c);else{const h=Pa(u,d);null!=h&&(s.push(c),o.set(c,h))}});const a=new Cr(s);return new JG(o,a,i.fieldTransforms)}(s,"updateDoc",n._key,e),Wh(i,[o.toMutation(n._key,lt.exists(!0))])}function hpe(n){return Wh(De(n.firestore,tt),[new Cu(n._key,lt.none())])}function Wh(n,e){return function(t,r){const i=new Jt;return t.asyncQueue.enqueueAndForget(_(function*(){return function ffe(n,e,t){return EA.apply(this,arguments)}(yield function QA(n){return E_(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Gt(n),e)}!function(n,e=!0){hu="9.8.4",Mn(new dn("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new tt(i,new Gce(t.getProvider("auth-internal")),new zce(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Ze(mj,"3.4.11",n),Ze(mj,"3.4.11","esm2017")}();var gpe={includeMetadataChanges:!1};function lx(n,e){return void 0===e&&(e=gpe),new rt(function(t){var r=function fpe(n,...e){var t,r,i;n=xn(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||XA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(XA(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,u,c;if(n instanceof vt)u=De(n.firestore,tt),c=_u(n._key.path),l={next:d=>{e[o]&&e[o](function ax(n,e,t){const r=t.docs.get(e._key),i=new Fa(n);return new Bu(n,i,e._key,r,new Oa(t.hasPendingWrites,t.fromCache),e.converter)}(u,n,d))},error:e[o+1],complete:e[o+2]};else{const d=De(n,Nn);u=De(d.firestore,tt),c=d._query;const h=new Fa(u);l={next:f=>{e[o]&&e[o](new Uu(u,h,d,f))},error:e[o+1],complete:e[o+2]},function oW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new A(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(d,h,f,p){const g=new w_(p),m=new mA(h,g,f);return d.asyncQueue.enqueueAndForget(_(function*(){return function dA(n,e){return hA.apply(this,arguments)}(yield Fu(d),m)})),()=>{g.Tc(),d.asyncQueue.enqueueAndForget(_(function*(){return function fA(n,e){return pA.apply(this,arguments)}(yield Fu(d),m)}))}}(Gt(u),c,a,l)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function _pe(n,e){return void 0===e&&(e={}),function mpe(n){return lx(n,{includeMetadataChanges:!0})}(n).pipe(Re(function(t){return gW(t,e)}))}function gW(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}function bpe(n,e){return void 0===e&&(e={}),function Cpe(n){return lx(n,{includeMetadataChanges:!0}).pipe(Re(function(e){return e.docs}))}(n).pipe(Re(function(t){return t.map(function(r){return gW(r,e)})}))}class qh{constructor(e){return e}}const vW="firestore",dx=new K("angularfire2.firestore-instances");function Dpe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new qh(r)}}const Spe={provide:class Tpe{constructor(){return Yg(vW)}},deps:[[new st,dx]]},Ape={provide:qh,useFactory:function Ipe(n,e){const t=Qg(vW,n,e);return t&&new qh(t)},deps:[[new st,dx],oa]};let xpe=(()=>{class n{constructor(){Ze("angularfire",Kg.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({providers:[Ape,Spe]}),n})();function Mpe(n,...e){return{ngModule:xpe,providers:[{provide:dx,useFactory:Dpe(n),multi:!0,deps:[Le,Lt,XT,ZT,[new st,JD],[new st,g0],...e]}]}}const kpe=Di(bpe,!0),Npe=Di(_pe,!0),wW=Di(Wfe,!0),Rpe=Di(hpe,!0),x_=Di(zG,!0),Ppe=Di(Qfe,!0),Ope=Di(cpe,!0),Fpe=Di(dpe,!0);class EW{}const Ts="*";function Vpe(n,e){return{type:7,name:n,definitions:e,options:{}}}function CW(n,e=null){return{type:4,styles:e,timings:n}}function bW(n,e=null){return{type:2,steps:n,options:e}}function zh(n){return{type:6,styles:n,offset:null}}function hx(n,e,t){return{type:0,name:n,styles:e,options:t}}function TW(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function IW(n){Promise.resolve(null).then(n)}class Kh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){IW(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class DW{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?IW(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const SW=["toast-component",""];function Bpe(n,e){if(1&n){const t=Tp();T(0,"button",5),be("click",function(){return $f(t),jf(Dn().remove())}),T(1,"span",6),M(2,"\xd7"),I()()}}function Upe(n,e){if(1&n&&(Oc(0),M(1),Fc()),2&n){const t=Dn(2);q(1),Nr("[",t.duplicatesCount+1,"]")}}function $pe(n,e){if(1&n&&(T(0,"div"),M(1),Vt(2,Upe,2,1,"ng-container",4),I()),2&n){const t=Dn();Ji(t.options.titleClass),Jn("aria-label",t.title),q(1),Nr(" ",t.title," "),q(1),_e("ngIf",t.duplicatesCount)}}function jpe(n,e){if(1&n&&Oe(0,"div",7),2&n){const t=Dn();Ji(t.options.messageClass),_e("innerHTML",t.message,Rv)}}function Hpe(n,e){if(1&n&&(T(0,"div",8),M(1),I()),2&n){const t=Dn();Ji(t.options.messageClass),Jn("aria-label",t.message),q(1),Nr(" ",t.message," ")}}function Gpe(n,e){if(1&n&&(T(0,"div"),Oe(1,"div",9),I()),2&n){const t=Dn();q(1),Fl("width",t.width+"%")}}class Jpe{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class M_{constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this._onTap=new kt,this._onAction=new kt,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const xW=new K("ToastConfig");class Zpe{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new kt,this._activate=new kt,this._manualClose=new kt,this._resetTimeout=new kt,this._countDuplicate=new kt}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ege{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===M_?this._toastPackage:this._parentInjector.get(e,t,r)}}class tge extends class Xpe{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class nge{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let rge=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ige=(()=>{class n{constructor(t,r,i,s){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=s,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new tge(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new nge(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(k(rge),k(Ul),k(ql),k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k_=(()=>{class n{constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts){const l=o&&a.title===t;if((!o||l)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let u=r;r&&s.enableHtml&&(u=this.sanitizer.sanitize(je.HTML,r));const c=new Zpe(l),d=new M_(this.index,s,u,i,t,c),h=new ege(d,this._injector),f=new Jpe(s.toastComponent,h),p=l.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=p.instance;const g={toastId:this.index,title:i||"",message:r||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:p};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{g.toastRef.activate()})),this.toasts.push(g),g}}return n.\u0275fac=function(t){return new(t||n)(k(xW),k(ige),k(Lt),k(eL),k(Le))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sge={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(b(k_),b(M_),b(Le))},n.\u0275cmp=Wt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&be("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(Gw("@flyInOut",r.state),Ji(r.toastClasses),Fl("display",r.displayStyle))},attrs:SW,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(Vt(0,Bpe,3,0,"button",0),Vt(1,$pe,3,5,"div",1),Vt(2,jpe,1,3,"div",2),Vt(3,Hpe,2,4,"div",3),Vt(4,Gpe,2,2,"div",4)),2&t&&(_e("ngIf",r.options.closeButton),q(1),_e("ngIf",r.title),q(1),_e("ngIf",r.message&&r.options.enableHtml),q(1),_e("ngIf",r.message&&!r.options.enableHtml),q(1),_e("ngIf",r.options.progressBar))},dependencies:[ed],encapsulation:2,data:{animation:[Vpe("flyInOut",[hx("inactive",zh({opacity:0})),hx("active",zh({opacity:1})),hx("removed",zh({opacity:0})),TW("inactive => active",CW("{{ easeTime }}ms {{ easing }}")),TW("active => removed",CW("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let oge=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:xW,useValue:{default:sge,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[td]}),n})(),px=(()=>{class n{constructor(t,r){this.firestore=t,this.toastr=r,this.collection=wW(t,"page")}getsheet(t){var r=this;return _(function*(){return Npe(x_(r.collection,t))})()}create(t){var r=this;return _(function*(){yield Ope(x_(r.collection,t),{id:t}).then(()=>{r.toastr.success("Ficha criada","Parab\xe9ns!")}).catch(i=>{r.toastr.error("Erro na cria\xe7\xe3o da ficha","Algo deu errado!")})})()}update(t,r){var i=this;return _(function*(){console.log("Ficha salva: ",r),yield Fpe(x_(i.collection,t),{...r}).then(()=>{i.toastr.success("Ficha atualizada","Parab\xe9ns!")}).catch(s=>{console.error(s),i.toastr.error("Erro na atualiza\xe7\xe3o da ficha","Algo deu errado!")})})()}delete(){var t=this;return _(function*(){yield Rpe(x_(t.collection,"aaaa")).then(()=>{t.toastr.error("At\xe9 a pr\xf3xima","Tchau ficha!")}).catch(r=>{console.error(r),t.toastr.warning("Erro na dele\xe7\xe3o da ficha","Algo deu errado!")})})()}}return n.\u0275fac=function(t){return new(t||n)(k(qh),k(k_))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gx=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-footer"]],decls:12,vars:0,consts:[[1,"accent-container"],[1,"p2","flex","flex-column","align-center","gap1"],[1,"font-size-title"],[1,"flex","justify-center","flex-wrap","gap1"],["href","https://www.linkedin.com/in/ofelipescherer/","target","_blank","alt","Linkedin"],["src","https://img.shields.io/badge/-Linkedin-0e76a8?logo=Linkedin&logoColor=white&https://www.linkedin.com/in/ofelipescherer/"],["href","https://github.com/ofelipescherer","target","_blank","alt","Github"],["src","https://img.shields.io/badge/-Github-100000?logo=github&logoColor=white&link=https://github.com/ofelipescherer"],["src","https://img.shields.io/github/license/ofelipescherer/rpg-angular-v2.svg"],["src","https://img.shields.io/badge/license-MIT-green"]],template:function(t,r){1&t&&(T(0,"footer",0)(1,"div",1)(2,"span",2),M(3,"Created By Felipe Scherer"),I(),T(4,"div",3)(5,"a",4),Oe(6,"img",5),I(),T(7,"a",6),Oe(8,"img",7),I(),T(9,"a",6),Oe(10,"img",8),I(),Oe(11,"img",9),I()()())}}),n})();function age(n,e){if(1&n&&(T(0,"span",17),M(1),I()),2&n){const t=Dn();q(1),Nr("Code: ",t.id,"")}}function lge(n,e){1&n&&(T(0,"span",18),M(1," dark_mode "),I())}function uge(n,e){1&n&&(T(0,"span",18),M(1," light_mode "),I())}let mx=(()=>{class n{constructor(t,r){this.router=t,this.utilService=r,this.theme=document.documentElement.getAttribute("data-theme")||"light",this.id=this.router.url.split("/")[2]}ngOnInit(){this.utilService.changeID(this.id)}changeTheme(){let t=document.documentElement.getAttribute("data-theme");document.documentElement.setAttribute("data-theme","dark"===t?"light":"dark"),this.theme="dark"===t?"light":"dark"}openNav(){document.getElementById("mySidenav").style.display="flex",document.getElementById("overlay").style.display="block",document.getElementById("mySidenav").style.zIndex="20"}closeNav(){document.getElementById("mySidenav").style.display="none",document.getElementById("overlay").style.display="none",document.getElementById("mySidenav").style.zIndex="1"}}return n.\u0275fac=function(t){return new(t||n)(b(un),b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-header"]],decls:27,vars:3,consts:[[1,"accent-container"],[1,"max-size","p05","flex","flex-column"],[1,"flex","justify-between"],[1,"font-size-title"],["class","font-size-text mt05",4,"ngIf"],[1,"flex","gap05","align-center"],[3,"click"],["class","material-symbols-outlined",4,"ngIf"],[2,"font-size","30px","cursor","pointer",3,"click"],["id","overlay",1,"overlay",3,"click"],["id","mySidenav",1,"sidenav","background-accent"],[1,"material-symbols-outlined","btn-close",3,"click"],["href","https://github.com/ofelipescherer/rpg-angular-v2/blob/main/src/rules-readme/rules.md","target","_blank"],["href","https://github.com/ofelipescherer/rpg-angular-v2/blob/main/src/rules-readme/notes.md","target","_blank"],["href","https://github.com/ofelipescherer/rpg-angular-v2/blob/main/src/rules-readme/combat.md","target","_blank"],["href","https://github.com/ofelipescherer/rpg-angular-v2/blob/main/src/rules-readme/equipment.md","target","_blank"],["href","https://github.com/ofelipescherer/rpg-angular-v2/blob/main/src/rules-readme/stability.md","target","_blank"],[1,"font-size-text","mt05"],[1,"material-symbols-outlined"]],template:function(t,r){1&t&&(T(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),M(5,"What Happened in that Day"),I(),Vt(6,age,2,1,"span",4),I(),T(7,"div",5)(8,"button",6),be("click",function(){return r.changeTheme()}),Vt(9,lge,2,0,"span",7),Vt(10,uge,2,0,"span",7),I(),T(11,"span",8),be("click",function(){return r.openNav()}),M(12,"\u2630"),I(),T(13,"div",9),be("click",function(){return r.closeNav()}),I(),T(14,"div",10)(15,"span",11),be("click",function(){return r.closeNav()}),M(16," close "),I(),T(17,"a",12),M(18,"Documento de Regras"),I(),T(19,"a",13),M(20,"Notas"),I(),T(21,"a",14),M(22,"Regras de Combate"),I(),T(23,"a",15),M(24,"Lista de Equipamentos"),I(),T(25,"a",16),M(26,"Regras de Estabilidade"),I()()()()()()),2&t&&(q(6),_e("ngIf",r.id),q(3),_e("ngIf","dark"===r.theme),q(1),_e("ngIf","light"===r.theme))},dependencies:[ed],styles:["[_ngcontent-%COMP%]:root, html[data-theme=light][_ngcontent-%COMP%]{--background-color: #f4f4f4;--background-input: #ffffff;--background-accent: #000c66;--text-color: #121218;--subtext-color: #00000080;--text-accent-color: #ffffff;--card-shadow: rgba(0, 0, 0, 25%)}html[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1d1d1d;--background-input: #313131;--background-accent: #000630;--text-color: #ececec;--subtext-color: #ffffff80;--text-accent-color: #f3f3f3;--card-shadow: rgba(255, 255, 255, 25%)}.background-color[_ngcontent-%COMP%]{background-color:var(--background-color)}.background-accent[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{background-color:var(--background-accent)}.text-color[_ngcontent-%COMP%]{color:var(--text-color)!important}.subtext-color[_ngcontent-%COMP%]{color:var(--subtext-color)!important}.text-accent-color[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{color:var(--text-accent-color)}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px 4px var(--card-shadow)}.sidenav[_ngcontent-%COMP%]{display:none;flex-direction:column;align-items:flex-end;padding:0 2rem 1rem 0;height:100%;width:0;position:fixed;width:260px;z-index:1;gap:1rem;top:0;right:0;overflow-x:hidden;transition:.5s;transition:visibility 0s,opacity .5s linear;animation-name:example;animation-duration:.5s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-accent-color);font-size:12px;text-align:end}.sidenav[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{color:var(--text-accent-color);height:1.2rem;width:1.2rem;font-size:1.2rem;cursor:pointer;margin:1rem 0}@keyframes example{0%{width:0px}to{width:260px}}.overlay[_ngcontent-%COMP%]{position:fixed;top:0px;right:0px;bottom:0px;left:0px;width:100%;height:100%;z-index:10;background-color:#0000006c;display:none}"]}),n})(),cge=(()=>{class n{constructor(t,r,i){this.firestoreService=t,this.router=r,this.utilService=i,this.unsubscribe$=new kt,this.id=this.router.url.split("/")[2]}ngOnInit(){this.loadSheet(),this.isSheetAlreadyCreated()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}isSheetAlreadyCreated(){var t=this;return _(function*(){(yield t.firestoreService.getsheet(t.id)).pipe(QC(t.unsubscribe$)).subscribe(r=>{r?t.utilService.changeSheet(r):(t.firestoreService.create(t.id),t.utilService.changeID(t.id))})})()}loadSheet(){}}return n.\u0275fac=function(t){return new(t||n)(b(px),b(un),b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-body"]],decls:6,vars:0,consts:[[1,"flex","flex-column","min-h-100"],[1,"background-color","text-color","flex-fill"],[1,"pt1","pb1","pr1","max-size"]],template:function(t,r){1&t&&(T(0,"div",0),Oe(1,"app-header"),T(2,"div",1)(3,"div",2),Oe(4,"router-outlet"),I()(),Oe(5,"app-footer"),I())},dependencies:[pg,gx,mx]}),n})();function MW(n){return Uo((e,t)=>n<=t)}function hge(n,e){if(1&n){const t=Tp();T(0,"div",25),be("click",function(){const s=$f(t).index;return jf(Dn().changeCounterAttack(s))}),I()}2&n&&_e("ngClass",e.$implicit?"selected":"")}let kW=(()=>{class n{constructor(t){this.utilService=t,this.playerForm=new Ed({name:new An("",Fr.required),sparkEffect:new An(""),origin:new An("",Fr.required),currentLife:new An(1432,Fr.required),totalLife:new An(143,Fr.required),currentStability:new An(14,Fr.required),totalStability:new An(141,Fr.required),defence:new An(!1,Fr.required)}),this.counterAttacks=[!1,!1,!1],this.unsubscribe$=new kt}ngOnInit(){this.init(),this.onFormInit()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onFormInit(){this.playerForm?.valueChanges.pipe(function dge(n,e=NB){return Nt((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function l(){const u=o+n,c=e.now();if(c<u)return i=this.schedule(void 0,u-c),void r.add(i);a()}t.subscribe(Et(r,u=>{s=u,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(500),QC(this.unsubscribe$)).subscribe(()=>{this.utilService.changePlayer(this.playerForm.value)})}init(){this.utilService.player.pipe(QC(this.unsubscribe$),MW(1),el(1)).subscribe(t=>{this.playerForm.get("name")?.setValue(t?.name),this.playerForm.get("sparkEffect")?.setValue(t?.sparkEffect),this.playerForm.get("origin")?.setValue(t?.origin),this.playerForm.get("currentLife")?.setValue(t?.currentLife),this.playerForm.get("totalLife")?.setValue(t?.totalLife),this.playerForm.get("currentStability")?.setValue(t?.currentStability),this.playerForm.get("totalStability")?.setValue(t?.totalStability),this.playerForm.get("defence")?.setValue(t?.defence||!1)})}changeCounterAttack(t){this.counterAttacks[t]=!this.counterAttacks[t]}}return n.\u0275fac=function(t){return new(t||n)(b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-player-traits"]],inputs:{data:"data"},decls:65,vars:8,consts:[[1,"flex","flex-column","gap05"],[1,"flex","flex-column","gap05",3,"formGroup"],[1,"search-container","mt-2","mb-05"],["formControlName","name","type","text","placeholder","Nome",1,"w-100"],["formControlName","sparkEffect","type","text","placeholder","Efeito Spark",1,"w-100"],[1,"flex","align-center","justify-between"],["for","description"],["name","origin","formControlName","origin"],["value","","selected","","disabled","","hidden",""],["value","central_plaza"],["value","little_floreasp"],["value","high_forwib"],["value","industrial_district"],["value","great_hill"],["value","downtown"],["value","fewscraps_district"],["value","midnight_subdistrict"],[1,"flex","gap1","align-center","justify-between","flex-wrap","font-size-text"],[1,"flex","flex-column","align-center","gap025"],[1,"flex","gap05","counter-attacks"],[1,"btn-icon"],[1,"material-symbols-outlined",3,"click"],[1,"material-symbols-outlined"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"defence-button",3,"ngClass","click"],[3,"ngClass","click"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"h2"),M(2,"Personagem:"),I(),T(3,"form",1)(4,"div",2),Oe(5,"input",3),I(),T(6,"div",2),Oe(7,"input",4),I(),T(8,"div",5)(9,"label",6),M(10,"Origem: "),I(),T(11,"select",7)(12,"option",8),M(13,"Choose here"),I(),T(14,"option",9),M(15,"Central Plaza"),I(),T(16,"option",10),M(17,"Little Floreasp"),I(),T(18,"option",11),M(19,"High Forwib"),I(),T(20,"option",12),M(21,"Industrial District"),I(),T(22,"option",13),M(23,"Great Hill"),I(),T(24,"option",14),M(25,"Downtown"),I(),T(26,"option",15),M(27,"Fewscraps District"),I(),T(28,"option",16),M(29,"Midnight Subdistrict"),I()()()(),T(30,"div",17)(31,"div",18)(32,"span"),M(33,"Vida"),I(),T(34,"div",19)(35,"button",20)(36,"span",21),be("click",function(){let s;return null==r.playerForm||null==(s=r.playerForm.get("currentLife"))?null:s.setValue((null==r.playerForm||null==r.playerForm.value?null:r.playerForm.value.currentLife)+1)}),M(37," add "),I()(),T(38,"span"),M(39),I(),T(40,"button",20)(41,"span",22),M(42," remove "),I()()()(),T(43,"div",18)(44,"span"),M(45,"Estabilidade"),I(),T(46,"div",19)(47,"button",20)(48,"span",22),M(49," add "),I()(),T(50,"span"),M(51),I(),T(52,"button",20)(53,"span",22),M(54," remove "),I()()()(),T(55,"div",18)(56,"span"),M(57,"Contra-ataque"),I(),T(58,"div",19),Vt(59,hge,1,1,"div",23),I()(),T(60,"div",18)(61,"span"),M(62,"Defesa"),I(),T(63,"button",24),be("click",function(){let s;return null==(s=r.playerForm.get("defence"))?null:s.setValue(!(null!=r.playerForm&&null!=r.playerForm.value&&r.playerForm.value.defence))}),M(64),I()()()()),2&t&&(q(3),_e("formGroup",r.playerForm),q(36),Sp("",null==r.playerForm||null==r.playerForm.value?null:r.playerForm.value.currentLife,"/",null==r.playerForm||null==r.playerForm.value?null:r.playerForm.value.totalLife,""),q(12),Sp("",null==r.playerForm||null==r.playerForm.value?null:r.playerForm.value.currentStability,"/",null==r.playerForm||null==r.playerForm.value?null:r.playerForm.value.totalStability,""),q(8),_e("ngForOf",r.counterAttacks),q(4),_e("ngClass",null!=r.playerForm&&null!=r.playerForm.value&&r.playerForm.value.defence?"activate":""),q(1),Nr(" ",null!=r.playerForm&&null!=r.playerForm.value&&r.playerForm.value.defence?"Ativada":"Desativada"," "))},dependencies:[IF,GE,UC,WC,zC,Jl,Id,bg,MC,Td,kg],styles:["[_ngcontent-%COMP%]:root, html[data-theme=light][_ngcontent-%COMP%]{--background-color: #f4f4f4;--background-input: #ffffff;--background-accent: #000c66;--text-color: #121218;--subtext-color: #00000080;--text-accent-color: #ffffff;--card-shadow: rgba(0, 0, 0, 25%)}html[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1d1d1d;--background-input: #313131;--background-accent: #000630;--text-color: #ececec;--subtext-color: #ffffff80;--text-accent-color: #f3f3f3;--card-shadow: rgba(255, 255, 255, 25%)}.background-color[_ngcontent-%COMP%]{background-color:var(--background-color)}.background-accent[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{background-color:var(--background-accent)}.text-color[_ngcontent-%COMP%]{color:var(--text-color)!important}.subtext-color[_ngcontent-%COMP%]{color:var(--subtext-color)!important}.text-accent-color[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{color:var(--text-accent-color)}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px 4px var(--card-shadow)}.search-container[_ngcontent-%COMP%]{background-color:var(--background-input);display:flex;align-items:center;border-bottom:1px solid red;transition:.05s;border-radius:6px;max-height:2.8rem;width:100%;border:1px solid rgba(14,14,14,.1215686275)}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#535353a3;opacity:1;font-size:12px;font-weight:400}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-color);font-size:1rem;padding:.5rem;border:none;width:100%;background-color:transparent}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.search-container[_ngcontent-%COMP%]:focus-within{outline:1px solid red}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:1px solid gray;padding:.25rem;border-radius:50%}.btn-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;width:10px;height:10px}select[_ngcontent-%COMP%]{background:var(--background-input);color:var(--text-color);border:1px solid rgba(14,14,14,.1215686275);padding:4px;border-radius:3px}.counter-attacks[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;height:12px;cursor:pointer;border-radius:3px;background-color:red}.counter-attacks[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#b10000}.counter-attacks[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#016901}.counter-attacks[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:hover{background-color:#040}.defence-button[_ngcontent-%COMP%]{border:1px solid rgba(14,14,14,.1215686275);border-radius:5px;width:110px;padding:.25rem 1rem;color:#fff;background-color:red}.defence-button[_ngcontent-%COMP%]:hover{background-color:#b10000}.activate[_ngcontent-%COMP%]{background-color:#016901}.activate[_ngcontent-%COMP%]:hover{background-color:#040}"]}),n})();const fge={FOR:{name:"For\xe7a",shortName:"FOR",info:"FOR\xc7A TOP",totalValue:0,color:"C724B1"},DES:{name:"Destreza",shortName:"DES",info:"DES TOP",totalValue:0,color:"44D62C"},CON:{name:"Constitui\xe7\xe3o",shortName:"CON",info:"CON TOP",totalValue:0,color:"E0E722"},POD:{name:"Poder",shortName:"POD",info:"POD TOP",totalValue:0,color:"4D4DFF"},PER:{name:"Percep\xe7\xe3o",shortName:"PER",info:"PER TOP",totalValue:0,color:"FFAD00"},MED:{name:"Medicina",shortName:"MED",info:"MED TOP",totalValue:0,color:"FFAD00"},OUT:{name:"Outros",shortName:"OUT",info:"OUT TOP",totalValue:0,color:"D22730"}},pge=function(n){return{"box-shadow":n}},gge=function(n){return{"background-color":n}};let NW=(()=>{class n{constructor(){}ngOnInit(){this.fullData=this.data[this.type]}changeValue(){const t=prompt("Please enter your value in NUMBERS please");null!=t&&parseInt(t)&&(document.getElementById("demo").innerHTML=t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-player-attribute"]],inputs:{data:"data",type:"type"},decls:13,vars:11,consts:[[1,"flex","align-center","container",3,"ngStyle"],[1,"container-value","flex","p05","flex-column","align-center",3,"ngStyle"],["id","demo",1,"title","font-size-title",3,"click"],[1,"subtitle","font-size-text"],[1,"relative","flex","flex-fill","justify-center"],[1,"btn-info"],[1,"material-symbols-outlined"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"div",1)(2,"span",2),be("click",function(){return r.changeValue()}),M(3),Lo(4,"number"),I(),T(5,"span",3),M(6,"000"),I()(),T(7,"div",4)(8,"button",5)(9,"span",6),M(10," info "),I()(),T(11,"span"),M(12),I()()()),2&t&&(_e("ngStyle",tE(7,pge,"2px 2px 7px #"+(null==r.fullData?null:r.fullData.color))),q(1),_e("ngStyle",tE(9,gge,"#"+(null==r.fullData?null:r.fullData.color))),q(2),ni(qc(4,4,null==r.fullData?null:r.fullData.totalValue,"3.0")),q(9),ni(null==r.fullData?null:r.fullData.name))},dependencies:[MF,NF],styles:[".btn-info[_ngcontent-%COMP%]{position:absolute;top:-13px;right:15px}.btn-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;width:10px;height:10px}.container[_ngcontent-%COMP%]{margin-top:1rem;border-radius:7px;min-width:150px}.container[_ngcontent-%COMP%]   .container-value[_ngcontent-%COMP%]{color:#fff;border-radius:5px 0 0 5px}"]}),n})();function mge(n,e){if(1&n&&(T(0,"div",1),Oe(1,"app-player-attribute",2)(2,"app-player-attribute",2)(3,"app-player-attribute",2)(4,"app-player-attribute",2)(5,"app-player-attribute",2)(6,"app-player-attribute",2)(7,"app-player-attribute",2),I()),2&n){const t=Dn();q(1),_e("data",t.attributes)("type","FOR"),q(1),_e("data",t.attributes)("type","DES"),q(1),_e("data",t.attributes)("type","CON"),q(1),_e("data",t.attributes)("type","POD"),q(1),_e("data",t.attributes)("type","PER"),q(1),_e("data",t.attributes)("type","MED"),q(1),_e("data",t.attributes)("type","OUT")}}let RW=(()=>{class n{constructor(t){this.utilService=t}ngOnInit(){this.utilService?.attributes.pipe(MW(1)).subscribe(t=>{t||this.utilService.changeAttributes(fge),this.attributes=t})}}return n.\u0275fac=function(t){return new(t||n)(b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-player-attributes"]],decls:1,vars:1,consts:[["class","flex flex-wrap gap05 justify-center align-center",4,"ngIf"],[1,"flex","flex-wrap","gap05","justify-center","align-center"],[3,"data","type"]],template:function(t,r){1&t&&Vt(0,mge,8,14,"div",0),2&t&&_e("ngIf",r.attributes)},dependencies:[ed,NW]}),n})(),PW=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-text-area-component"]],inputs:{type:"type"},decls:4,vars:1,consts:[[1,"mt1","flex","flex-column","justify-center"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"h2"),M(2),I(),Oe(3,"textarea"),I()),2&t&&(q(2),Nr("",r.type,":"))}}),n})();var N_=(()=>(function(n){n["melee-light"]="Melee Leve",n["melee-heavy"]="Melee Pesada",n.pistol="Pistola",n.shotgun="Fuzil",n["machine-gun"]="Metralhadora"}(N_||(N_={})),N_))(),R_=(()=>(function(n){n.a="+A",n.b="+B",n.c="+C",n.d="+D"}(R_||(R_={})),R_))();const _x={a:{"melee-light":{damage:"2D4 + 3D2",aimed:"+3 de dano",special:"Ganha vantagem de teste de acerto (Teste de for\xe7a)"},"melee-heavy":{damage:"8 + D4",aimed:"+3 de dano",special:"Ganha vantagem de teste de acerto (Teste de for\xe7a)"},pistol:{damage:"2 + 1D12",aimed:"Aumenta o threshold em 2",special:"Tirar Baixo + 6"},shotgun:{damage:"1D12",aimed:"Debuff de baixo some e fica s\xf3 o alto",special:"Tirar Alto + 6, baixo 0"},"machine-gun":{damage:"6D2",aimed:"Metade dos dados \xe9 sempre 2",special:"Sem threshold"}},b:{"melee-light":{damage:"D6",aimed:"dasdasd",special:""},"melee-heavy":{damage:"D6",aimed:"dasdasd",special:""},pistol:{damage:"D6",aimed:"dasdasd",special:""},shotgun:{damage:"D6",aimed:"dasdasd",special:""},"machine-gun":{damage:"D6",aimed:"dasdasd",special:""}},c:{"melee-light":{damage:"D6",aimed:"dasdasd",special:""},"melee-heavy":{damage:"D6",aimed:"dasdasd",special:""},pistol:{damage:"D6",aimed:"dasdasd",special:""},shotgun:{damage:"D6",aimed:"dasdasd",special:""},"machine-gun":{damage:"D6",aimed:"dasdasd",special:""}},d:{"melee-light":{damage:"D6",aimed:"dasdasd",special:""},"melee-heavy":{damage:"D6",aimed:"dasdasd",special:""},pistol:{damage:"D6",aimed:"dasdasd",special:""},shotgun:{damage:"D6",aimed:"dasdasd",special:""},"machine-gun":{damage:"D6",aimed:"dasdasd",special:""}}};let _ge=(()=>{class n{transform(t){return N_[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Pt({name:"weaponType",type:n,pure:!0}),n})(),yge=(()=>{class n{transform(t){return R_[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Pt({name:"weaponClass",type:n,pure:!0}),n})(),vge=(()=>{class n{transform(t,r){return _x[r][t]?.damage}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Pt({name:"weaponDamage",type:n,pure:!0}),n})(),wge=(()=>{class n{transform(t,r){return _x[r][t]?.aimed}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Pt({name:"weaponDamageAimed",type:n,pure:!0}),n})(),Ege=(()=>{class n{transform(t,r){return _x[r][t]?.special}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Pt({name:"weaponDamageSpecial",type:n,pure:!0}),n})(),OW=(()=>{class n{constructor(){this.data={}}closeCard(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-weapon-card"]],inputs:{data:"data"},decls:36,vars:20,consts:[[1,"relative"],[1,"close",3,"click"],[1,"container-title","subtext-color","font-size-text","justify-around","flex","p025","pt05"],[1,"flex","flex-column","h-100","card","p05"],[1,"flex","align-center","gap05","container-description"],["src","../../../../assets/github.png","alt","github",1,"img-weapon"],[1,"title"],[1,"description","flex","flex-fill","mt05"],[1,"flex","flex-column","gap025","container-damage","mt1"],[1,"flex","align-center","gap05"],[1,"material-symbols-outlined","orange"],[1,"material-symbols-outlined"],[1,"sm-font","subtext-color"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"button",1),be("click",function(){return r.closeCard()}),M(2,"X"),I(),T(3,"div",2)(4,"span"),M(5),Lo(6,"weaponType"),I(),T(7,"span"),M(8),Lo(9,"weaponClass"),I()(),T(10,"div",3)(11,"div",4),Oe(12,"img",5),T(13,"span",6),M(14),I()(),T(15,"span",7),M(16),I(),T(17,"div",8)(18,"div",9)(19,"span",10),M(20," local_fire_department "),I(),T(21,"span"),M(22),Lo(23,"weaponDamage"),I()(),T(24,"div",9)(25,"span",11),M(26," sports_mma "),I(),T(27,"span",12),M(28),Lo(29,"weaponDamageAimed"),I()(),T(30,"div",9)(31,"span",11),M(32," sports_mma "),I(),T(33,"span",12),M(34),Lo(35,"weaponDamageSpecial"),I()()()()()),2&t&&(q(5),ni(nE(6,7,(null==r.data?null:r.data.type)||"")),q(3),ni(nE(9,9,(null==r.data?null:r.data.class)||"")),q(6),ni((null==r.data?null:r.data.name)||""),q(2),ni((null==r.data?null:r.data.description)||""),q(6),ni(qc(23,11,(null==r.data?null:r.data.type)||"",(null==r.data?null:r.data.class)||"")),q(6),ni(qc(29,14,(null==r.data?null:r.data.type)||"",(null==r.data?null:r.data.class)||"")),q(6),ni(qc(35,17,(null==r.data?null:r.data.type)||"",(null==r.data?null:r.data.class)||"")))},dependencies:[_ge,yge,vge,wge,Ege],styles:[".card[_ngcontent-%COMP%]{border-left:1px solid rgba(246,211,25,.6509803922);border-right:1px solid rgba(246,211,25,.6509803922);border-bottom:1px solid rgba(246,211,25,.6509803922);border-radius:0 0 23px 23px;background-color:transparent;height:200px;width:145px}.container-title[_ngcontent-%COMP%]{border-radius:23px 23px 0 0;background-color:#f6d319a6!important}.container-description[_ngcontent-%COMP%]{font-size:.75rem}.container-damage[_ngcontent-%COMP%]{justify-self:flex-end}.description[_ngcontent-%COMP%]{font-size:.63rem}.sm-font[_ngcontent-%COMP%]{font-size:.8rem}.img-weapon[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}.orange[_ngcontent-%COMP%]{color:#dd561c}.close[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;font-size:10px;left:46%;top:-3%;background-color:#d10000c0;color:#ffffffcb;border-radius:50%;width:15px;height:15px;cursor:pointer}.close[_ngcontent-%COMP%]:hover{background-color:#ad0000d5}"]}),n})();function Cge(n,e){1&n&&Oe(0,"app-weapon-card",6),2&n&&_e("data",e.$implicit)}let FW=(()=>{class n{constructor(t){this.utilService=t}ngOnInit(){this.data=this.utilService.weaponsList}}return n.\u0275fac=function(t){return new(t||n)(b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-weapons-list"]],decls:9,vars:1,consts:[[1,"flex","flex-column","mt1"],[1,"flex","justify-between"],["routerLink","create-weapon",1,"button-add"],[1,"material-symbols-outlined"],[1,"flex","flex-wrap","mt05","justify-around"],[3,"data",4,"ngFor","ngForOf"],[3,"data"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Equipamento:"),I(),T(4,"button",2)(5,"span",3),M(6," add "),I()()(),T(7,"div",4),Vt(8,Cge,1,1,"app-weapon-card",5),I()()),2&t&&(q(8),_e("ngForOf",r.data))},dependencies:[GE,yd,OW],styles:[".button-add[_ngcontent-%COMP%]{color:#fff;background-color:#004e00c7;display:flex;align-items:center;justify-content:center;border-radius:50%}.button-add[_ngcontent-%COMP%]:hover{background-color:#0a330ac7}"]}),n})();const bge=[{path:"",component:(()=>{class n{constructor(t,r,i){this.toastr=t,this.firestoreService=r,this.router=i,this.id=new An("",Fr.required)}showSuccess(){this.toastr.error("Hello world!","Toastr fun!")}submit(){this.id.value&&this.id.valid&&this.firestoreService.create(this.id.value).then(()=>this.router.navigate([`/page/${this.id.value}`]))}}return n.\u0275fac=function(t){return new(t||n)(b(k_),b(px),b(un))},n.\u0275cmp=Wt({type:n,selectors:[["app-home"]],decls:12,vars:1,consts:[[1,"flex","flex-column","min-h-100"],[1,"background-color","text-color","flex-fill","p1"],[1,"max-size"],[1,"search-container","mt1"],["type","text","placeholder","ID",1,"w-100",3,"formControl"],[1,"flex","justify-end","mt1"],[1,"btn-add",3,"click"]],template:function(t,r){1&t&&(T(0,"div",0),Oe(1,"app-header"),T(2,"div",1)(3,"div",2)(4,"h2"),M(5,"ID da ficha:"),I(),T(6,"div",3),Oe(7,"input",4),I(),T(8,"div",5)(9,"button",6),be("click",function(){return r.submit()}),M(10,"Entrar"),I()()()(),Oe(11,"app-footer"),I()),2&t&&(q(7),_e("formControl",r.id))},dependencies:[gx,mx,Jl,bg,jC],styles:["[_ngcontent-%COMP%]:root, html[data-theme=light][_ngcontent-%COMP%]{--background-color: #f4f4f4;--background-input: #ffffff;--background-accent: #000c66;--text-color: #121218;--subtext-color: #00000080;--text-accent-color: #ffffff;--card-shadow: rgba(0, 0, 0, 25%)}html[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1d1d1d;--background-input: #313131;--background-accent: #000630;--text-color: #ececec;--subtext-color: #ffffff80;--text-accent-color: #f3f3f3;--card-shadow: rgba(255, 255, 255, 25%)}.background-color[_ngcontent-%COMP%]{background-color:var(--background-color)}.background-accent[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{background-color:var(--background-accent)}.text-color[_ngcontent-%COMP%]{color:var(--text-color)!important}.subtext-color[_ngcontent-%COMP%]{color:var(--subtext-color)!important}.text-accent-color[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{color:var(--text-accent-color)}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px 4px var(--card-shadow)}.search-container[_ngcontent-%COMP%]{background-color:var(--background-input);display:flex;align-items:center;transition:.05s;border-radius:6px;max-height:2.8rem;width:100%;border:1px solid rgba(14,14,14,.1215686275)}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#535353a3;opacity:1;font-size:12px;font-weight:400}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#73737366}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;color:var(--text-color);font-size:1rem;padding:.5rem;border:none;background-color:transparent}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.search-container[_ngcontent-%COMP%]:focus-within{outline:1px solid red}"]}),n})()},{path:"page/:id",component:cge,children:[{path:"",component:(()=>{class n{constructor(t,r){this.firestoreService=t,this.utilService=r}ngOnInit(){this.utilService.characterSheet.subscribe(t=>{this.service$=t}),this.utilService.player.subscribe(t=>{this.player$=t}),this.utilService.id.subscribe(t=>{this.id$=t}),this.utilService.attributes.subscribe(t=>{this.attributes$=t})}scrollTo(t){document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}updateCS(){this.firestoreService.update(this.id$,{id:this.id$,player:this.player$,attributes:this.attributes$})}refresh(){location.reload()}}return n.\u0275fac=function(t){return new(t||n)(b(px),b(Qo))},n.\u0275cmp=Wt({type:n,selectors:[["app-character-sheet"]],decls:29,vars:1,consts:[[1,"flex","relative"],[1,"bookmarks","flex-column","mt1","flex"],[1,"material-symbols-outlined","border-radius-top",3,"click"],[1,"material-symbols-outlined",3,"click"],[1,"material-symbols-outlined","border-radius-bottom",3,"click"],[1,"flex","flex-column","align-end","pl2"],[1,"mb1","flex","flex-wrap","gap1"],[1,"btn-danger"],[1,"btn-back",3,"click"],[1,"btn-add",3,"click"],["id","playerTraits",3,"data"],["type","history"],["id","annotations"],["type","annotations"]],template:function(t,r){1&t&&(T(0,"div",0)(1,"div",1)(2,"div")(3,"a",2),be("click",function(){return r.scrollTo("playerTraits")}),M(4," star "),I()(),T(5,"div")(6,"a",3),be("click",function(){return r.scrollTo("playerTraits")}),M(7," description "),I()(),T(8,"div")(9,"a",3),be("click",function(){return r.scrollTo("playerTraits")}),M(10," backpack "),I()(),T(11,"div")(12,"a",4),be("click",function(){return r.scrollTo("annotations")}),M(13," sports_martial_arts "),I()()(),T(14,"div",5)(15,"div",6)(16,"button",7),M(17,"Deletar"),I(),T(18,"button",8),be("click",function(){return r.refresh()}),M(19,"Atualizar"),I(),T(20,"button",9),be("click",function(){return r.updateCS()}),M(21,"Salvar"),I()(),T(22,"div"),Oe(23,"app-player-traits",10)(24,"app-player-attributes")(25,"app-weapons-list")(26,"app-text-area-component",11),T(27,"div",12),Oe(28,"app-text-area-component",13),I()()()()),2&t&&(q(23),_e("data",r.service$))},dependencies:[kW,RW,PW,FW],styles:["[_ngcontent-%COMP%]:root, html[data-theme=light][_ngcontent-%COMP%]{--background-color: #f4f4f4;--background-input: #ffffff;--background-accent: #000c66;--text-color: #121218;--subtext-color: #00000080;--text-accent-color: #ffffff;--card-shadow: rgba(0, 0, 0, 25%)}html[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1d1d1d;--background-input: #313131;--background-accent: #000630;--text-color: #ececec;--subtext-color: #ffffff80;--text-accent-color: #f3f3f3;--card-shadow: rgba(255, 255, 255, 25%)}.background-color[_ngcontent-%COMP%]{background-color:var(--background-color)}.background-accent[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{background-color:var(--background-accent)}.text-color[_ngcontent-%COMP%]{color:var(--text-color)!important}.subtext-color[_ngcontent-%COMP%]{color:var(--subtext-color)!important}.text-accent-color[_ngcontent-%COMP%], .accent-container[_ngcontent-%COMP%]{color:var(--text-accent-color)}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px 4px var(--card-shadow)}.bookmarks[_ngcontent-%COMP%]{cursor:pointer;position:fixed;color:var(--text-accent-color);left:-10px}.bookmarks[_ngcontent-%COMP%]:hover{left:0}.bookmarks[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;padding:.25rem 0;background-color:var(--background-accent)}.bookmarks[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{padding-left:.75rem;left:15px}.bookmarks[_ngcontent-%COMP%]   .border-radius-top[_ngcontent-%COMP%]{border-radius:0 5px 0 0}.bookmarks[_ngcontent-%COMP%]   .border-radius-bottom[_ngcontent-%COMP%]{border-radius:0 0 5px}"]}),n})()},{path:"create-weapon",component:ane}]},{path:"**",redirectTo:"",pathMatch:"full"}];let Tge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[Yl.forRoot(bge),Yl]}),n})(),Ige=(()=>{class n{constructor(t){this.title="rpg-angular-v2";const r=wW(t,"items");this.items$=kpe(r)}}return n.\u0275fac=function(t){return new(t||n)(b(qh))},n.\u0275cmp=Wt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Oe(0,"router-outlet")},dependencies:[pg]}),n})();const Dge=[];let Sge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[Yl.forChild(Dge),Yl]}),n})(),LW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[td]}),n})(),Age=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[td,_2,ine,Yl,LW]}),n})(),xge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({imports:[td,Sge,Age,_2]}),n})();const VW="@firebase/database";let yx="";class kge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ad(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return us(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const UW=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kge(e)}}catch{}return new Nge},La=UW("localStorage"),vx=UW("sessionStorage"),$u=new Xo("@firebase/database"),$W=function(){let n=1;return function(){return n++}}(),jW=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,P(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new wne;t.update(e);const r=t.digest();return Ng.encodeByteArray(r)},Qh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Qh.apply(null,r):e+="object"==typeof r?cn(r):r,e+=" "}return e};let Va=null,HW=!0;const tn=function(...n){if(!0===HW&&(HW=!1,null===Va&&!0===vx.get("logging_enabled")&&function(n,e){P(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($u.logLevel=Ee.VERBOSE,Va=$u.log.bind($u),e&&vx.set("logging_enabled",!0)):"function"==typeof n?Va=n:(Va=null,vx.remove("logging_enabled"))}(!0)),Va){const e=Qh.apply(null,n);Va(e)}},Yh=function(n){return function(...e){tn(n,...e)}},wx=function(...n){const e="FIREBASE INTERNAL ERROR: "+Qh(...n);$u.error(e)},Pi=function(...n){const e=`FIREBASE FATAL ERROR: ${Qh(...n)}`;throw $u.error(e),new Error(e)},Rn=function(...n){const e="FIREBASE WARNING: "+Qh(...n);$u.warn(e)},P_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Is="[MIN_NAME]",Oi="[MAX_NAME]",Ba=function(n,e){if(n===e)return 0;if(n===Is||e===Oi)return-1;if(e===Is||n===Oi)return 1;{const t=O_(n),r=O_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Oge=function(n,e){return n===e?0:n<e?-1:1},Jh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+cn(e))},Ex=function(n){if("object"!=typeof n||null===n)return cn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=cn(e[r]),t+=":",t+=Ex(n[e[r]]);return t+="}",t},WW=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function nn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qW=function(n){P(!P_(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Bge=new RegExp("^-?(0*)\\d{1,10}$"),O_=function(n){if(Bge.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ju=function(n){try{n()}catch(e){setTimeout(()=>{throw Rn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Xh=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class $ge{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class jge{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rn(e)}}let Zh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const XW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,t3="websocket",n3="long_polling";class Tx{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=La.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&La.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function r3(n,e,t){let r;if(P("string"==typeof e,"typeof type must == string"),P("object"==typeof t,"typeof params must == object"),e===t3)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==n3)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Hge(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return nn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Gge{constructor(){this.counters_={}}incrementCounter(e,t=1){us(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return une(this.counters_)}}const Ix={},Dx={};function Sx(n){const e=n.toString();return Ix[e]||(Ix[e]=new Gge),Ix[e]}class qge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ju(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ao{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yh(e),this.stats_=Sx(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),r3(t,n3,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ax((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&XW.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ao.forceAllow_=!0}static forceDisallow(){ao.forceDisallow_=!0}static isAvailable(){return!(!ao.forceAllow_&&(ao.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=w2(t),i=WW(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=cn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ax{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$W(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ax.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){tn("frame writing exception"),a.stack&&tn(a.stack),tn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||tn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let L_=null;typeof MozWebSocket<"u"?L_=MozWebSocket:typeof WebSocket<"u"&&(L_=WebSocket);let Hu=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yh(this.connId),this.stats_=Sx(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&XW.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),r3(t,t3,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,La.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new L_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==L_&&!n.forceDisallow_}static previouslyFailed(){return La.isInMemoryStorage||!0===La.get("previous_websocket_failure")}markConnectionHealthy(){La.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Ad(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(P(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=cn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WW(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),c3=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ao,Hu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Hu&&Hu.isAvailable();let i=r&&!Hu.previouslyFailed();if(t.webSocketOnly&&(r||Rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hu];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _3{constructor(e,t,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yh("c:"+this.id+":"),this.transportManager_=new c3(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Jh("t",e),r=Jh("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Jh("t",e),r=Jh("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Jh("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?wx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Xh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(La.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class y3{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class v3{constructor(e){this.allowedEvents_=e,this.listeners_={},P(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){P(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class V_ extends v3{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new V_}getInitialEvent(e){return P("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ne{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ae(){return new Ne("")}function ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function lo(n){return n.pieces_.length-n.pieceNum_}function He(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ne(n.pieces_,e)}function Mx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ef(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function C3(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ne(e,0)}function nt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ne(t,0)}function me(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,e){const t=ge(n),r=ge(e);if(null===t)return e;if(t===r)return Kn(He(n),He(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function kx(n,e){if(lo(n)!==lo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Br(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(lo(n)>lo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class gme{constructor(e,t){this.errorPrefix_=t,this.parts_=ef(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bg(this.parts_[r]);b3(this)}}function b3(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ua(n))}function Ua(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Nx extends v3{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Nx}getInitialEvent(e){return P("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tf=1e3;let U_,$a=(()=>{class n extends y3{constructor(t,r,i,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Yh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&V_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(cn(o)),P(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Dd,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const a=this.outstandingGets_[o];void 0===a||s!==a||(delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),P(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),P(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,c=l.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==c&&this.removeListen_(i,s),t.onComplete&&t.onComplete(c,u))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&us(t,"w")){const i=eu(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Fg(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Fg(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),P(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+cn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):wx("Unrecognized action received from server: "+cn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){P(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return _(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,u=null;const c=function(){u?u.close():(l=!0,s())};t.realtime_={close:c,sendRequest:function(f){P(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?tn("getToken() completed but was canceled"):(tn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,u=new _3(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,g=>{Rn(g+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&Rn(f),c())}}})()}interrupt(t){tn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){tn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],C2(this.interruptReasons_)&&(this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>Ex(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Ne(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){tn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){tn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+yx.replace(/\./g,"-")]=1,Pg()?t["framework.cordova"]=1:XC()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=V_.getInstance().currentlyOnline();return C2(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ye{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ye(e,t)}}class B_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ye(Is,e),i=new ye(Is,t);return 0!==this.compare(r,i)}minPost(){return ye.MIN}}class D3 extends B_{static get __EMPTY_NODE(){return U_}static set __EMPTY_NODE(e){U_=e}compare(e,t){return Ba(e.name,t.name)}isDefinedOn(e){throw Zl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ye.MIN}maxPost(){return new ye(Oi,U_)}makePost(e,t){return P("string"==typeof e,"KeyIndex indexValue must always be a string."),new ye(e,U_)}toString(){return".key"}}const Fi=new D3;class $_{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Px,ui=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??sr.EMPTY_NODE,this.right=o??sr.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return sr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return sr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class sr{constructor(e,t=sr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new sr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ui.BLACK,null,null))}remove(e){return new sr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ui.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $_(this.root_,null,this.comparator_,!0,e)}}function Tme(n,e){return Ba(n.name,e.name)}function Rx(n,e){return Ba(n,e)}sr.EMPTY_NODE=new class bme{copy(e,t,r,i,s){return this}insert(e,t,r){return new ui(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const S3=function(n){return"number"==typeof n?"number:"+qW(n):"string:"+n},A3=function(n){if(n.isLeafNode()){const e=n.val();P("string"==typeof e||"number"==typeof e||"object"==typeof e&&us(e,".sv"),"Priority must be a string or number.")}else P(n===Px||n.isEmpty(),"priority of unexpected type.");P(n===Px||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let x3,M3,k3,Gu=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,P(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),A3(this.priorityNode_)}static set __childrenNodeConstructor(t){x3=t}static get __childrenNodeConstructor(){return x3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return me(t)?this:".priority"===ge(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ge(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(P(".priority"!==i||1===lo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(He(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+S3(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qW(this.value_):this.value_,this.lazyHash_=jW(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(P(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return P(s>=0,"Unknown leaf type: "+r),P(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Qe=new class Ame extends B_{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ba(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(Oi,new Gu("[PRIORITY-POST]",k3))}makePost(e,t){const r=M3(e);return new ye(t,new Gu("[PRIORITY-POST]",r))}toString(){return".priority"}},xme=Math.log(2);class Mme{constructor(e){this.count=parseInt(Math.log(e+1)/xme,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const j_=function(n,e,t,r){n.sort(e);const i=function(l,u){const c=u-l;let d,h;if(0===c)return null;if(1===c)return d=n[l],h=t?t(d):d,new ui(h,d.node,ui.BLACK,null,null);{const f=parseInt(c/2,10)+l,p=i(l,f),g=i(f+1,u);return d=n[f],h=t?t(d):d,new ui(h,d.node,ui.BLACK,p,g)}},a=function(l){let u=null,c=null,d=n.length;const h=function(p,g){const m=d-p,v=d;d-=p;const C=i(m+1,v),y=n[m],D=t?t(y):y;f(new ui(D,y.node,g,null,C))},f=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?h(m,ui.BLACK):(h(m,ui.BLACK),h(m,ui.RED))}return c}(new Mme(n.length));return new sr(r||e,a)};let Ox;const Wu={};class Ds{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return P(Wu&&Qe,"ChildrenNode.ts has not been loaded"),Ox=Ox||new Ds({".priority":Wu},{".priority":Qe}),Ox}get(e){const t=eu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof sr?t:null}hasIndex(e){return us(this.indexSet_,e.toString())}addIndex(e,t){P(e!==Fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(ye.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?j_(r,e.getCompare()):Wu;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new Ds(c,u)}addToIndexes(e,t){const r=Lg(this.indexes_,(i,s)=>{const o=eu(this.indexSet_,s);if(P(o,"Missing index implementation for "+s),i===Wu){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(ye.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),j_(a,o.getCompare())}return Wu}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new ye(e.name,a))),l.insert(e,e.node)}});return new Ds(r,this.indexSet_)}removeFromIndexes(e,t){const r=Lg(this.indexes_,i=>{if(i===Wu)return i;{const s=t.get(e.name);return s?i.remove(new ye(e.name,s)):i}});return new Ds(r,this.indexSet_)}}let nf,ae=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&A3(this.priorityNode_),this.children_.isEmpty()&&P(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nf||(nf=new n(new sr(Rx),null,Ds.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?nf:r}}getChild(t){const r=ge(t);return null===r?this:this.getImmediateChild(r).getChild(He(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(P(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ye(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?nf:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=ge(t);if(null===i)return r;{P(".priority"!==ge(t)||1===lo(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(He(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Qe,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+S3(this.getPriority().val())+":"),this.forEachChild(Qe,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":jW(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ye(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ye(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ye(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ye.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ye.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rf?-1:0}withIndex(t){if(t===Fi||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Qe),s=r.getIterator(Qe);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Fi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rf=new class kme extends ae{constructor(){super(new sr(Rx),ae.EMPTY_NODE,Ds.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ae.EMPTY_NODE}isEmpty(){return!1}};function ut(n,e=null){if(null===n)return ae.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),P(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gu(n,ut(e));if(n instanceof Array){let t=ae.EMPTY_NODE;return nn(n,(r,i)=>{if(us(n,r)&&"."!==r.substring(0,1)){const s=ut(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(ut(e))}{const t=[];let r=!1;if(nn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=ut(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new ye(o,l)))}}),0===t.length)return ae.EMPTY_NODE;const s=j_(t,Tme,o=>o.name,Rx);if(r){const o=j_(t,Qe.getCompare());return new ae(s,ut(e),new Ds({".priority":o},{".priority":Qe}))}return new ae(s,ut(e),Ds.Default)}}Object.defineProperties(ye,{MIN:{value:new ye(Is,ae.EMPTY_NODE)},MAX:{value:new ye(Oi,rf)}}),D3.__EMPTY_NODE=ae.EMPTY_NODE,Gu.__childrenNodeConstructor=ae,function Ime(n){Px=n}(rf),function Sme(n){k3=n}(rf),function Dme(n){M3=n}(ut);class Fx extends B_{constructor(e){super(),this.indexPath_=e,P(!me(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ba(e.name,t.name):s}makePost(e,t){const r=ut(e),i=ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(t,i)}maxPost(){const e=ae.EMPTY_NODE.updateChild(this.indexPath_,rf);return new ye(Oi,e)}toString(){return ef(this.indexPath_,0).join("/")}}const Lx=new class Rme extends B_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ba(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,t){const r=ut(e);return new ye(t,r)}toString(){return".value"}};function of(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ux{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return P(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return P(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Is}hasEnd(){return this.endSet_}getIndexEndValue(){return P(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return P(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Oi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return P(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const e=new Ux;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L3(n){const e={};if(n.isDefault())return e;let t;return n.index_===Qe?t="$priority":n.index_===Lx?t="$value":n.index_===Fi?t="$key":(P(n.index_ instanceof Fx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=cn(t),n.startSet_&&(e.startAt=cn(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+cn(n.indexStartName_))),n.endSet_&&(e.endAt=cn(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+cn(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function V3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Qe&&(e.i=n.index_.toString()),e}class G_ extends y3{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Yh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(P(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=G_.getListenId_(e,r),a={};this.listens_[o]=a;const l=L3(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(s,d,!1,r),eu(this.listens_,o)===a){let h;h=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(h,null)}})}unlisten(e,t){const r=G_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=L3(e._queryParams),r=e._path.toString(),i=new Dd;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+tb(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ad(a.responseText)}catch{Rn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Rn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class jme{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function W_(){return{value:null,children:new Map}}function Ku(n,e,t){if(me(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ge(e);n.children.has(r)||n.children.set(r,W_()),Ku(n.children.get(r),e=He(e),t)}}function Gx(n,e,t){null!==n.value?t(e,n.value):function Hme(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Gx(i,new Ne(e.toString()+"/"+r),t)})}class Gme{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class zme{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Gme(e);const r=1e4+2e4*Math.random();Xh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;nn(e,(i,s)=>{s>0&&us(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Xh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ur=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ur||(Ur={})),Ur))();function zx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class q_{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ur.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(me(this.path)){if(null!=this.affectedTree.value)return P(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ne(e));return new q_(Ae(),t,this.revert)}}return P(ge(this.path)===e,"operationForChild called for unrelated child."),new q_(He(this.path),this.affectedTree,this.revert)}}class ja{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ur.OVERWRITE}operationForChild(e){return me(this.path)?new ja(this.source,Ae(),this.snap.getImmediateChild(e)):new ja(this.source,He(this.path),this.snap)}}class Qu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ur.MERGE}operationForChild(e){if(me(this.path)){const t=this.children.subtree(new Ne(e));return t.isEmpty()?null:t.value?new ja(this.source,Ae(),t.value):new Qu(this.source,Ae(),t)}return P(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qu(this.source,He(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class uo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;const t=ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function uf(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function Jme(n,e,t){if(null==e.childName||null==t.childName)throw Zl("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),i=new ye(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Yme(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function z_(n,e){return{eventCache:n,serverCache:e}}function cf(n,e,t,r){return z_(new uo(e,t,r),n.serverCache)}function U3(n,e,t,r){return z_(n.eventCache,new uo(e,t,r))}function K_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ha(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Kx;class Ye{constructor(e,t=(()=>(Kx||(Kx=new sr(Oge)),Kx))()){this.value=e,this.children=t}static fromObject(e){let t=new Ye(null);return nn(e,(r,i)=>{t=t.set(new Ne(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ae(),value:this.value};if(me(e))return null;{const r=ge(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(He(e),t);return null!=s?{path:nt(new Ne(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{const t=ge(e),r=this.children.get(t);return null!==r?r.subtree(He(e)):new Ye(null)}}set(e,t){if(me(e))return new Ye(t,this.children);{const r=ge(e),s=(this.children.get(r)||new Ye(null)).set(He(e),t),o=this.children.insert(r,s);return new Ye(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new Ye(null):new Ye(null,this.children);{const t=ge(e),r=this.children.get(t);if(r){const i=r.remove(He(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Ye(null):new Ye(this.value,s)}return this}}get(e){if(me(e))return this.value;{const t=ge(e),r=this.children.get(t);return r?r.get(He(e)):null}}setTree(e,t){if(me(e))return t;{const r=ge(e),s=(this.children.get(r)||new Ye(null)).setTree(He(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Ye(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(nt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ae(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(me(e))return null;{const s=ge(e),o=this.children.get(s);return o?o.findOnPath_(He(e),nt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ae(),t)}foreachOnPath_(e,t,r){if(me(e))return this;{this.value&&r(t,this.value);const i=ge(e),s=this.children.get(i);return s?s.foreachOnPath_(He(e),nt(t,i),r):new Ye(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(nt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ci{constructor(e){this.writeTree_=e}static empty(){return new ci(new Ye(null))}}function df(n,e,t){if(me(e))return new ci(new Ye(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Kn(i,e);return s=s.updateChild(o,t),new ci(n.writeTree_.set(i,s))}{const i=new Ye(t),s=n.writeTree_.setTree(e,i);return new ci(s)}}}function Qx(n,e,t){let r=n;return nn(t,(i,s)=>{r=df(r,nt(e,i),s)}),r}function $3(n,e){if(me(e))return ci.empty();{const t=n.writeTree_.setTree(e,new Ye(null));return new ci(t)}}function Yx(n,e){return null!=Ga(n,e)}function Ga(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Kn(t.path,e)):null}function j3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Qe,(r,i)=>{e.push(new ye(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ye(r,i.value))}),e}function co(n,e){if(me(e))return n;{const t=Ga(n,e);return new ci(null!=t?new Ye(t):n.writeTree_.subtree(e))}}function Jx(n){return n.writeTree_.isEmpty()}function Yu(n,e){return H3(Ae(),n.writeTree_,e)}function H3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(P(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=H3(nt(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(nt(n,".priority"),r)),t}}function Q_(n,e){return K3(e,n)}function r_e(n,e){if(n.snap)return Br(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Br(nt(n.path,t),e))return!0;return!1}function s_e(n){return n.visible}function G3(n,e,t){let r=ci.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Br(t,o)?(a=Kn(t,o),r=df(r,a,s.snap)):Br(o,t)&&(a=Kn(o,t),r=df(r,Ae(),s.snap.getChild(a)));else{if(!s.children)throw Zl("WriteRecord should have .snap or .children");if(Br(t,o))a=Kn(t,o),r=Qx(r,a,s.children);else if(Br(o,t))if(a=Kn(o,t),me(a))r=Qx(r,Ae(),s.children);else{const l=eu(s.children,ge(a));if(l){const u=l.getChild(He(a));r=df(r,Ae(),u)}}}}}return r}function W3(n,e,t,r,i){if(r||i){const s=co(n.visibleWrites,e);return!i&&Jx(s)?t:i||null!=t||Yx(s,Ae())?Yu(G3(n.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Br(u.path,e)||Br(e,u.path))},e),t||ae.EMPTY_NODE):null}{const s=Ga(n.visibleWrites,e);if(null!=s)return s;{const o=co(n.visibleWrites,e);return Jx(o)?t:null!=t||Yx(o,Ae())?Yu(o,t||ae.EMPTY_NODE):null}}}function Y_(n,e,t,r){return W3(n.writeTree,n.treePath,e,t,r)}function Xx(n,e){return function o_e(n,e,t){let r=ae.EMPTY_NODE;const i=Ga(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Qe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=co(n.visibleWrites,e);return t.forEachChild(Qe,(o,a)=>{const l=Yu(co(s,new Ne(o)),a);r=r.updateImmediateChild(o,l)}),j3(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return j3(co(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function q3(n,e,t,r){return function a_e(n,e,t,r,i){P(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=nt(e,t);if(Yx(n.visibleWrites,s))return null;{const o=co(n.visibleWrites,s);return Jx(o)?i.getChild(t):Yu(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function J_(n,e){return function u_e(n,e){return Ga(n.visibleWrites,e)}(n.writeTree,nt(n.treePath,e))}function Zx(n,e,t){return function l_e(n,e,t,r){const i=nt(e,t),s=Ga(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Yu(co(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function z3(n,e){return K3(nt(n.treePath,e),n.writeTree)}function K3(n,e){return{treePath:n,writeTree:e}}class f_e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;P("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),P(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,of(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function sf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function zu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Zl("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,of(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Q3=new class p_e{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class eM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new uo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ha(this.viewCache_),s=function h_e(n,e,t,r,i,s){return function c_e(n,e,t,r,i,s,o){let a;const l=co(n.visibleWrites,e),u=Ga(l,Ae());if(null!=u)a=u;else{if(null==t)return[];a=Yu(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&c.length<i;)0!==d(f,r)&&c.push(f),f=h.getNext();return c}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Y3(n,e,t,r,i,s){const o=e.eventCache;if(null!=J_(r,t))return e;{let a,l;if(me(t))if(P(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ha(e),d=Xx(r,u instanceof ae?u:ae.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Y_(r,Ha(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=ge(t);if(".priority"===u){P(1===lo(t),"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=q3(r,t,c,l);a=null!=d?n.filter.updatePriority(c,d):o.getNode()}else{const c=He(t);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=q3(r,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(u).updateChild(c,h):o.getNode().getImmediateChild(u)}else d=Zx(r,u,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),u,d,c,i,s):o.getNode()}}return cf(e,a,o.isFullyInitialized()||me(t),n.filter.filtersNodes())}}function X_(n,e,t,r,i,s,o,a){const l=e.serverCache;let u;const c=o?n.filter:n.filter.getIndexedFilter();if(me(t))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=ge(t);if(!l.isCompleteForPath(t)&&lo(t)>1)return e;const p=He(t),m=l.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?c.updatePriority(l.getNode(),m):c.updateChild(l.getNode(),f,m,p,Q3,null)}const d=U3(e,u,l.isFullyInitialized()||me(t),c.filtersNodes());return Y3(n,d,t,i,new eM(i,d,s),a)}function tM(n,e,t,r,i,s,o){const a=e.eventCache;let l,u;const c=new eM(i,e,s);if(me(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=cf(e,u,!0,n.filter.filtersNodes());else{const d=ge(t);if(".priority"===d)u=n.filter.updatePriority(e.eventCache.getNode(),r),l=cf(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=He(t),f=a.getNode().getImmediateChild(d);let p;if(me(h))p=r;else{const g=c.getCompleteChild(d);p=null!=g?".priority"===Mx(h)&&g.getChild(C3(h)).isEmpty()?g:g.updateChild(h,r):ae.EMPTY_NODE}l=f.equals(p)?e:cf(e,n.filter.updateChild(a.getNode(),d,p,h,c,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function J3(n,e){return n.eventCache.isCompleteForChild(e)}function X3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nM(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=me(t)?r:new Ye(null).setTree(t,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const p=X3(0,e.serverCache.getNode().getImmediateChild(d),h);l=X_(n,l,new Ne(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&void 0===h.value;if(!c.hasChild(d)&&!f){const g=X3(0,e.serverCache.getNode().getImmediateChild(d),h);l=X_(n,l,new Ne(d),g,i,s,o,a)}}),l}function D_e(n,e){const t=Ha(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!me(e)&&!t.getImmediateChild(ge(e)).isEmpty())?t.getChild(e):null}function tq(n,e,t,r){e.type===Ur.MERGE&&null!==e.source.queryId&&(P(Ha(n.viewCache_),"We should always have a full cache before handling merges"),P(K_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function __e(n,e,t,r,i){const s=new f_e;let o,a;if(t.type===Ur.OVERWRITE){const u=t;u.source.fromUser?o=tM(n,e,u.path,u.snap,r,i,s):(P(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!me(u.path),o=X_(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===Ur.MERGE){const u=t;u.source.fromUser?o=function v_e(n,e,t,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=nt(t,l);J3(e,ge(c))&&(a=tM(n,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=nt(t,l);J3(e,ge(c))||(a=tM(n,a,c,u,i,s,o))}),a}(n,e,u.path,u.children,r,i,s):(P(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=nM(n,e,u.path,u.children,r,i,a,s))}else if(t.type===Ur.ACK_USER_WRITE){const u=t;o=u.revert?function C_e(n,e,t,r,i,s){let o;if(null!=J_(r,t))return e;{const a=new eM(r,e,i),l=e.eventCache.getNode();let u;if(me(t)||".priority"===ge(t)){let c;if(e.serverCache.isFullyInitialized())c=Y_(r,Ha(e));else{const d=e.serverCache.getNode();P(d instanceof ae,"serverChildren would be complete if leaf node"),c=Xx(r,d)}u=n.filter.updateFullNode(l,c,s)}else{const c=ge(t);let d=Zx(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),u=null!=d?n.filter.updateChild(l,c,d,He(t),a,s):e.eventCache.getNode().hasChild(c)?n.filter.updateChild(l,c,ae.EMPTY_NODE,He(t),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Y_(r,Ha(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=J_(r,Ae()),cf(e,u,o,n.filter.filtersNodes())}}(n,e,u.path,r,i,s):function w_e(n,e,t,r,i,s,o){if(null!=J_(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(me(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return X_(n,e,t,l.getNode().getChild(t),i,s,a,o);if(me(t)){let u=new Ye(null);return l.getNode().forEachChild(Fi,(c,d)=>{u=u.set(new Ne(c),d)}),nM(n,e,t,u,i,s,a,o)}return e}{let u=new Ye(null);return r.foreach((c,d)=>{const h=nt(t,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),nM(n,e,t,u,i,s,a,o)}}(n,e,u.path,u.affectedTree,r,i,s)}else{if(t.type!==Ur.LISTEN_COMPLETE)throw Zl("Unknown operation type: "+t.type);o=function E_e(n,e,t,r,i){const s=e.serverCache;return Y3(n,U3(e,s.getNode(),s.isFullyInitialized()||me(t),s.isFiltered()),t,r,Q3,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function y_e(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=K_(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function F3(n){return{type:"value",snapshotNode:n}}(K_(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function m_e(n,e){P(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),P(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),P(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function nq(n,e,t,r){return function Qme(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Ome(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),uf(n,i,"child_removed",e,r,t),uf(n,i,"child_added",e,r,t),uf(n,i,"child_moved",s,r,t),uf(n,i,"child_changed",e,r,t),uf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let Z_,ty;function rM(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return P(null!=s,"SyncTree gave us an op for an invalid query."),tq(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(tq(o,e,t,r));return s}}function ho(n,e){let t=null;for(const r of n.views.values())t=t||D_e(r,e);return t}class aq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ye(null),this.pendingWriteTree_=function d_e(){return{visibleWrites:ci.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sM(n,e,t,r,i){return function Zme(n,e,t,r,i){P(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=df(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ju(n,new ja({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function po(n,e,t=!1){const r=function t_e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function n_e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);P(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&r_e(a,r.path)?i=!1:Br(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function i_e(n){n.visibleWrites=G3(n.allWrites,s_e,Ae()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=$3(n.visibleWrites,r.path):nn(r.children,l=>{n.visibleWrites=$3(n.visibleWrites,nt(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Ye(null);return null!=r.snap?s=s.set(Ae(),!0):nn(r.children,o=>{s=s.set(new Ne(o),!0)}),Ju(n,new q_(r.path,s,t))}return[]}function hf(n,e,t){return Ju(n,new ja({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ry(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const u=ho(a,Kn(o,e));if(u)return u});return W3(i,e,s,t,!0)}function Ju(n,e){return dq(e,n.syncPointTree_,null,Q_(n.pendingWriteTree_,Ae()))}function dq(n,e,t,r){if(me(n.path))return hq(n,e,t,r);{const i=e.get(Ae());null==t&&null!=i&&(t=ho(i,Ae()));let s=[];const o=ge(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const u=t?t.getImmediateChild(o):null,c=z3(r,o);s=s.concat(dq(a,l,u,c))}return i&&(s=s.concat(rM(i,n,r,t))),s}}function hq(n,e,t,r){const i=e.get(Ae());null==t&&null!=i&&(t=ho(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,u=z3(r,o),c=n.operationForChild(o);c&&(s=s.concat(hq(c,a,l,u)))}),i&&(s=s.concat(rM(i,n,r,t))),s}function oM(n,e){return n.tagToQueryMap.get(e)}function aM(n){const e=n.indexOf("$");return P(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ne(n.substr(0,e))}}function lM(n,e,t){const r=n.syncPointTree_.get(e);return P(r,"Missing sync point for query tag that we're tracking"),rM(r,t,Q_(n.pendingWriteTree_,e),null)}class uM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new uM(t)}node(){return this.node_}}class cM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nt(this.path_,e);return new cM(this.syncTree_,t)}node(){return ry(this.syncTree_,this.path_)}}const pq=function(n,e,t){return n&&"object"==typeof n?(P(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Q_e(n[".sv"],e,t):"object"==typeof n[".sv"]?Y_e(n[".sv"],e):void P(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Q_e=function(n,e,t){if("timestamp"===n)return t.timestamp;P(!1,"Unexpected server value: "+n)},Y_e=function(n,e,t){n.hasOwnProperty("increment")||P(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&P(!1,"Unexpected increment value: "+r);const i=e.node();if(P(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},dM=function(n,e,t){return hM(n,new uM(e),t)};function hM(n,e,t){const r=n.getPriority().val(),i=pq(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=pq(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Gu(a,ut(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gu(i))),o.forEachChild(Qe,(a,l)=>{const u=hM(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class fM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sy(n,e){let t=e instanceof Ne?e:new Ne(e),r=n,i=ge(t);for(;null!==i;){const s=eu(r.node.children,i)||{children:{},childCount:0};r=new fM(i,r,s),t=He(t),i=ge(t)}return r}function Wa(n){return n.node.value}function pM(n,e){n.node.value=e,gM(n)}function mq(n){return n.node.childCount>0}function oy(n,e){nn(n.node.children,(t,r)=>{e(new fM(t,n,r))})}function _q(n,e,t,r){t&&!r&&e(n),oy(n,i=>{_q(i,e,!0,r)}),t&&r&&e(n)}function gf(n){return new Ne(null===n.parent?n.name:gf(n.parent)+"/"+n.name)}function gM(n){null!==n.parent&&function Z_e(n,e,t){const r=function J_e(n){return void 0===Wa(n)&&!mq(n)}(t),i=us(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,gM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,gM(n))}(n.parent,n.name,n)}const eye=/[\[\].#$\/\u0000-\u001F\u007F]/,tye=/[\[\].#$\u0000-\u001F\u007F]/,mM=10485760,ay=function(n){return"string"==typeof n&&0!==n.length&&!eye.test(n)},_f=function(n,e,t){const r=t instanceof Ne?new gme(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ua(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ua(r)+" with contents = "+e.toString());if(P_(e))throw new Error(n+"contains "+e.toString()+" "+Ua(r));if("string"==typeof e&&e.length>mM/3&&Bg(e)>mM)throw new Error(n+"contains a string greater than "+mM+" utf8 bytes "+Ua(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(nn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!ay(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ua(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mme(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Bg(e),b3(n)})(r,o),_f(n,a,r),function _me(n){const e=n.parts_.pop();n.byteLength_-=Bg(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ua(r)+" in addition to actual children.")}},wq=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ay(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!tye.test(n)}(n)}(t))throw new Error(function Vg(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sye{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $r(n,e,t){(function ly(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!kx(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function Cq(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(oye(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Br(r,e)||Br(e,r))}function oye(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Va&&tn("event: "+t.toString()),ju(r)}}}class lye{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sye,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=W_(),this.transactionQueueTree_=new fM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tq(n){const t=n.infoData_.getNode(new Ne(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Tq(n)})}function Iq(n,e,t,r,i){n.dataUpdateCount++;const s=new Ne(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=Lg(t,u=>ut(u));o=function j_e(n,e,t,r){const i=oM(n,r);if(i){const s=aM(i),o=s.path,a=s.queryId,l=Kn(o,e),u=Ye.fromObject(t);return lM(n,o,new Qu(zx(a),l,u))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=ut(t);o=function lq(n,e,t,r){const i=oM(n,r);if(null!=i){const s=aM(i),o=s.path,a=s.queryId,l=Kn(o,e);return lM(n,o,new ja(zx(a),l,t))}return[]}(n.serverSyncTree_,s,l,i)}else if(r){const l=Lg(t,u=>ut(u));o=function V_e(n,e,t){const r=Ye.fromObject(t);return Ju(n,new Qu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=ut(t);o=hf(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Xu(n,s)),$r(n.eventQueue_,a,o)}function Dq(n,e){vM(n,"connected",e),!1===e&&function fye(n){qa(n,"onDisconnectEvents");const e=vf(n),t=W_();Gx(n.onDisconnect_,Ae(),(i,s)=>{const o=function(n,e,t,r){return hM(e,new cM(t,n),r)}(i,s,n.serverSyncTree_,e);Ku(t,i,o)});let r=[];Gx(t,Ae(),(i,s)=>{r=r.concat(hf(n.serverSyncTree_,i,s));const o=function bM(n,e){const t=gf(xq(n,e)),r=sy(n.transactionQueueTree_,e);return function X_e(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{TM(n,i)}),TM(n,r),_q(r,i=>{TM(n,i)}),t}(n,i);Xu(n,o)}),n.onDisconnect_=W_(),$r(n.eventQueue_,Ae(),r)}(n)}function vM(n,e,t){const r=new Ne("/.info/"+e),i=ut(t);n.infoData_.updateSnapshot(r,i);const s=hf(n.infoSyncTree_,r,i);$r(n.eventQueue_,r,s)}function uy(n){return n.nextWriteId_++}function qa(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),tn(t,...e)}function CM(n,e,t){return ry(n.serverSyncTree_,e,t)||ae.EMPTY_NODE}function cy(n,e=n.transactionQueueTree_){if(e||dy(n,e),Wa(e)){const t=Mq(n,e);P(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function wye(n,e,t){const r=t.map(u=>u.currentWriteId),i=CM(n,e,r);let s=i;const o=i.hash();for(let u=0;u<t.length;u++){const c=t[u];P(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Kn(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{qa(n,"transaction put response",{path:l.toString(),status:u});let c=[];if("ok"===u){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,c=c.concat(po(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();dy(n,sy(n.transactionQueueTree_,e)),cy(n,n.transactionQueueTree_),$r(n.eventQueue_,e,c);for(let h=0;h<d.length;h++)ju(d[h])}else{if("datastale"===u)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Rn("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=u}Xu(n,e)}},o)}(n,gf(e),t)}else mq(e)&&oy(e,t=>{cy(n,t)})}function Xu(n,e){const t=xq(n,e),r=gf(t);return function Eye(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Kn(t,l.path);let d,c=!1;if(P(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,d=l.abortReason,i=i.concat(po(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,d="maxretry",i=i.concat(po(n.serverSyncTree_,l.currentWriteId,!0));else{const h=CM(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){_f("transaction failed: Data returned ",f,l.path);let p=ut(f);"object"==typeof f&&null!=f&&us(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=l.currentWriteId,v=vf(n),C=dM(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=C,l.currentWriteId=uy(n),o.splice(o.indexOf(m),1),i=i.concat(sM(n.serverSyncTree_,l.path,C,l.currentWriteId,l.applyLocally)),i=i.concat(po(n.serverSyncTree_,m,!0))}else c=!0,d="nodata",i=i.concat(po(n.serverSyncTree_,l.currentWriteId,!0))}$r(n.eventQueue_,t,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}dy(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ju(r[a]);cy(n,n.transactionQueueTree_)}(n,Mq(n,t),r),r}function xq(n,e){let t,r=n.transactionQueueTree_;for(t=ge(e);null!==t&&void 0===Wa(r);)r=sy(r,t),t=ge(e=He(e));return r}function Mq(n,e){const t=[];return kq(n,e,t),t.sort((r,i)=>r.order-i.order),t}function kq(n,e,t){const r=Wa(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);oy(e,i=>{kq(n,i,t)})}function dy(n,e){const t=Wa(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,pM(e,t.length>0?t:void 0)}oy(e,r=>{dy(n,r)})}function TM(n,e){const t=Wa(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(P(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(P(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(po(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?pM(e,void 0):t.length=s+1,$r(n.eventQueue_,gf(e),i);for(let o=0;o<r.length;o++)ju(r[o])}}const IM=function(n,e){const t=Tye(n),r=t.namespace;return"firebase.com"===t.domain&&Pi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Tx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ne(t.pathString)}},Tye=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let c=n.indexOf("/");-1===c&&(c=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(c,d)),c<d&&(i=function Cye(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(c,d)));const h=function bye(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rn(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class br{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:Mx(this._path)}get ref(){return new di(this._repo,this._path)}get _queryIdentifier(){const e=V3(this._queryParams),t=Ex(e);return"{}"===t?"default":t}get _queryObject(){return V3(this._queryParams)}isEqual(e){if(!((e=xn(e))instanceof br))return!1;const t=this._repo===e._repo,r=kx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fme(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class di extends br{constructor(e,t){super(e,t,new Ux,!1)}get parent(){const e=C3(this._path);return null===e?null:new di(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function x_e(n){P(!Z_,"__referenceConstructor has already been defined"),Z_=n})(di),function P_e(n){P(!ty,"__referenceConstructor has already been defined"),ty=n}(di);const DM={};class Hye{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function uye(n,e,t){if(n.stats_=Sx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new G_(n.repoInfo_,(r,i,s,o)=>{Iq(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Dq(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $a(n.repoInfo_,e,(r,i,s,o)=>{Iq(n,r,i,s,o)},r=>{Dq(n,r)},r=>{!function cye(n,e){nn(e,(t,r)=>{vM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Wge(n,e){const t=n.toString();return Dx[t]||(Dx[t]=e()),Dx[t]}(n.repoInfo_,()=>new zme(n.stats_,n.server_)),n.infoData_=new jme,n.infoSyncTree_=new aq({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=hf(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vM(n,"connected",!1),n.serverSyncTree_=new aq({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);$r(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new di(this._repo,Ae())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Uye(n,e){const t=DM[e];(!t||t[n.key]!==n)&&Pi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Aq(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pi("Cannot call "+e+" on a deleted database.")}}function Gye(n=gb(),e){return xd(n,"database").getImmediate({identifier:e})}$a.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},$a.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Wye(n){(function Mge(n){yx=n})("9.8.4"),Mn(new dn("database",(e,{instanceIdentifier:t})=>function Bye(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=IM(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=IM(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Zh(Zh.OWNER):new jge(n.name,n.options,e);wq("Invalid Firebase Database URL",o),me(o.path)||Pi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function $ye(n,e,t,r){let i=DM[e.name];i||(i={},DM[e.name]=i);let s=i[n.toURLString()];return s&&Pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new lye(n,!1,t,r),i[n.toURLString()]=s,s}(a,n,c,new $ge(n.name,t));return new Hye(d,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Ze(VW,"0.13.2",n),Ze(VW,"0.13.2","esm2017")}();class SM{constructor(e){return e}}const Uq="database",AM=new K("angularfire2.database-instances");function Yye(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new SM(r)}}const Jye={provide:class Kye{constructor(){return Yg(Uq)}},deps:[[new st,AM]]},Xye={provide:SM,useFactory:function Qye(n,e){const t=Qg(Uq,n,e);return t&&new SM(t)},deps:[[new st,AM],oa]};let Zye=(()=>{class n{constructor(){Ze("angularfire",Kg.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({providers:[Xye,Jye]}),n})();function eve(n,...e){return{ngModule:Zye,providers:[{provide:AM,useFactory:Yye(n),multi:!0,deps:[Le,Lt,XT,ZT,[new st,JD],[new st,g0],...e]}]}}const tve=Di(Gye,!0);function $q(n){return new L(3e3,!1)}function Fve(){return typeof window<"u"&&typeof window.document<"u"}function xM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function _o(n){switch(n.length){case 0:return new Kh;case 1:return n[0];default:return new DW(n)}}function jq(n,e,t,r,i=new Map,s=new Map){const o=[],a=[];let l=-1,u=null;if(r.forEach(c=>{const d=c.get("offset"),h=d==l,f=h&&u||new Map;c.forEach((p,g)=>{let m=g,v=p;if("offset"!==g)switch(m=e.normalizePropertyName(m,o),v){case"!":v=i.get(g);break;case Ts:v=s.get(g);break;default:v=e.normalizeStyleValue(g,m,v,o)}f.set(m,v)}),h||a.push(f),u=f,l=d}),o.length)throw function Tve(n){return new L(3502,!1)}();return a}function MM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&kM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&kM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&kM(t,"destroy",n)))}}function kM(n,e,t){const s=NM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function NM(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Tr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Hq(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let RM=(n,e)=>!1,Gq=(n,e,t)=>[],Wq=null;function PM(n){const e=n.parentNode||n.host;return e===Wq?null:e}(xM()||typeof Element<"u")&&(Fve()?(Wq=(()=>document.documentElement)(),RM=(n,e)=>{for(;e;){if(e===n)return!0;e=PM(e)}return!1}):RM=(n,e)=>n.contains(e),Gq=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ka=null,qq=!1;const zq=RM,Kq=Gq;let Qq=(()=>{class n{validateStyleProperty(t){return function Vve(n){Ka||(Ka=function Bve(){return typeof document<"u"?document.body:null}()||{},qq=!!Ka.style&&"WebkitAppearance"in Ka.style);let e=!0;return Ka.style&&!function Lve(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ka.style,!e&&qq&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ka.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return zq(t,r)}getParentElement(t){return PM(t)}query(t,r,i){return Kq(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Kh(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})(),OM=(()=>{class n{}return n.NOOP=new Qq,n})();const FM="ng-enter",my="ng-leave",_y="ng-trigger",yy=".ng-trigger",Jq="ng-animating",LM=".ng-animating";function yo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:VM(parseFloat(e[1]),e[2])}function VM(n,e){return"s"===e?1e3*n:n}function vy(n,e,t){return n.hasOwnProperty("duration")?n:function jve(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push($q()),{duration:0,delay:0,easing:""};i=VM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=VM(parseFloat(l),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function nve(){return new L(3100,!1)}()),a=!0),s<0&&(e.push(function rve(){return new L(3101,!1)}()),a=!0),a&&e.splice(l,0,$q())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Ef(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Xq(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function vo(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function ez(n,e,t){return t?e+":"+t+";":""}function tz(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ez(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ez(0,qve(t),n.style[t]));n.setAttribute("style",e)}function Bi(n,e,t){n.style&&(e.forEach((r,i)=>{const s=UM(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),xM()&&tz(n))}function Qa(n,e){n.style&&(e.forEach((t,r)=>{const i=UM(r);n.style[i]=""}),xM()&&tz(n))}function Cf(n){return Array.isArray(n)?1==n.length?n[0]:bW(n):n}const BM=new RegExp("{{\\s*(.+?)\\s*}}","g");function nz(n){let e=[];if("string"==typeof n){let t;for(;t=BM.exec(n);)e.push(t[1]);BM.lastIndex=0}return e}function wy(n,e,t){const r=n.toString(),i=r.replace(BM,(s,o)=>{let a=e[o];return null==a&&(t.push(function sve(n){return new L(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Ey(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Wve=/-+([a-z0-9])/g;function UM(n){return n.replace(Wve,(...e)=>e[1].toUpperCase())}function qve(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ir(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function ove(n){return new L(3004,!1)}()}}function rz(n,e){return window.getComputedStyle(n)[e]}function Xve(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Zve(n,e,t){if(":"==n[0]){const l=function ewe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function wve(n){return new L(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function vve(n){return new L(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(iz(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(iz(o,i))}(r,t,e)):t.push(n),t}const Iy=new Set(["true","1"]),Dy=new Set(["false","0"]);function iz(n,e){const t=Iy.has(n)||Dy.has(n),r=Iy.has(e)||Dy.has(e);return(i,s)=>{let o="*"==n||n==i,a="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Iy.has(n):Dy.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Iy.has(e):Dy.has(e)),o&&a}}const twe=new RegExp("s*:selfs*,?","g");function $M(n,e,t,r){return new nwe(n).build(e,t,r)}class nwe{constructor(e){this._driver=e}build(e,t,r){const i=new swe(t);return this._resetContextStyleTimingState(i),Ir(this,Cf(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function lve(){return new L(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,s.push(this.visitState(l,t))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function uve(){return new L(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{nz(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(Ey(s.values()),t.errors.push(function cve(n,e){return new L(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ir(this,Cf(e.animation),t);return{type:1,matchers:Xve(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ya(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ir(this,r,t)),options:Ya(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ir(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Ya(e.options)}}visitAnimate(e,t){const r=function awe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jM(vy(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=jM(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=vy(t,e);return jM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:zh({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=zh(u)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Ts?r.push(a):t.errors.push(new L(3002,!1)):r.push(Xq(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),c=u.get(l);let d=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(t.errors.push(function hve(n,e,t,r,i){return new L(3010,!1)}()),d=!1),s=c.startTime),d&&u.set(l,{startTime:s,endTime:i}),t.options&&function Gve(n,e,t){const r=e.params||{},i=nz(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function ive(n){return new L(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function fve(){return new L(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,u=0;const c=e.steps.map(v=>{const C=this._makeStyleAst(v,t);let y=null!=C.offset?C.offset:function owe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(C.styles),D=0;return null!=y&&(s++,D=C.offset=y),l=l||D<0||D>1,a=a||D<u,u=D,o.push(D),C});l&&t.errors.push(function pve(){return new L(3012,!1)}()),a&&t.errors.push(function gve(){return new L(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function mve(){return new L(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return c.forEach((v,C)=>{const y=h>0?C==f?1:h*C:o[C],D=y*m;t.currentTime=p+g.delay+D,g.duration=D,this._validateStyleAst(v,t),v.offset=y,r.styles.push(v)}),r}visitReference(e,t){return{type:8,animation:Ir(this,Cf(e.animation),t),options:Ya(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ya(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ya(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function rwe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(twe,"")),n=n.replace(/@\*/g,yy).replace(/@\w+/g,t=>yy+"-"+t.slice(1)).replace(/:animating/g,LM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Tr(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ir(this,Cf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ya(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _ve(){return new L(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:vy(e.timings,t.errors,!0);return{type:12,animation:Ir(this,Cf(e.animation),t),timings:r,options:null}}}class swe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set,this.nonAnimatableCSSPropertiesFound=new Set}}function Ya(n){return n?(n=Ef(n)).params&&(n.params=function iwe(n){return n?Ef(n):null}(n.params)):n={},n}function jM(n,e,t){return{duration:n,delay:e,easing:t}}function HM(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Sy{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cwe=new RegExp(":enter","g"),hwe=new RegExp(":leave","g");function GM(n,e,t,r,i,s=new Map,o=new Map,a,l,u=[]){return(new fwe).buildKeyframes(n,e,t,r,i,s,o,a,l,u)}class fwe{buildKeyframes(e,t,r,i,s,o,a,l,u,c=[]){u=u||new Sy;const d=new WM(e,t,u,i,s,c,[]);d.options=l;const h=l.delay?yo(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Ir(this,r,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[HM(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?yo(r.duration):null,a=null!=r.delay?yo(r.delay):null;return 0!==o&&e.forEach(l=>{const u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ir(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ay);const o=yo(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ir(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?yo(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ir(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return vy(t.params?wy(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?yo(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ay);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{t.currentQueryIndex=c;const d=t.createSubContext(e.options,u);s&&d.delayNextStep(s),u===t.element&&(l=d.currentTimeline),Ir(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const c=t.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;Ir(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Ay={};class WM{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ay,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new xy(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=yo(r.duration)),null!=r.delay&&(i.delay=yo(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=wy(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new WM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ay,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new pwe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(cwe,"."+this._enterClassName)).replace(hwe,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function yve(n){return new L(3014,!1)}()),a}}class xy{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new xy(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ts),this._currentKeyframe.set(t,Ts);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function gwe(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Ts)}else vo(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const u=wy(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)||Ts),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const u=vo(a,new Map,this._backFill);u.forEach((c,d)=>{"!"===c?e.add(d):c===Ts&&t.add(d)}),r||u.set("offset",l/this.duration),i.push(u)});const s=e.size?Ey(e.values()):[],o=t.size?Ey(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return HM(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class pwe extends xy{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=vo(e[0]);l.set("offset",0),s.push(l);const u=vo(e[0]);u.set("offset",az(a)),s.push(u);const c=e.length-1;for(let d=1;d<=c;d++){let h=vo(e[d]);const f=h.get("offset");h.set("offset",az((t+f*r)/o)),s.push(h)}r=o,t=0,i="",e=s}return HM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function az(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qM{}const mwe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _we extends qM{normalizePropertyName(e,t){return UM(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(mwe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function ave(n,e){return new L(3005,!1)}())}return o+s}}function lz(n,e,t,r,i,s,o,a,l,u,c,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:h}}const zM={};class uz{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function ywe(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,u,c){const d=[],h=this.ast.options&&this.ast.options.params||zM,p=this.buildStyles(r,a&&a.params||zM,d),g=l&&l.params||zM,m=this.buildStyles(i,g,d),v=new Set,C=new Map,y=new Map,D="void"===i,F={params:vwe(g,h),delay:this.ast.options?.delay},j=c?[]:GM(e,t,this.ast.animation,s,o,p,m,F,u,d);let fe=0;if(j.forEach(wn=>{fe=Math.max(wn.duration+wn.delay,fe)}),d.length)return lz(t,this._triggerName,r,i,D,p,m,[],[],C,y,fe,d);j.forEach(wn=>{const Qn=wn.element,tc=Tr(C,Qn,new Set);wn.preStyleProps.forEach(hi=>tc.add(hi));const Ss=Tr(y,Qn,new Set);wn.postStyleProps.forEach(hi=>Ss.add(hi)),Qn!==t&&v.add(Qn)});const wt=Ey(v.values());return lz(t,this._triggerName,r,i,D,p,m,j,wt,C,y,fe)}}function vwe(n,e){const t=Ef(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class wwe{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Ef(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=wy(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(l,o)})}),r}}class Cwe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new wwe(i.style,i.options&&i.options.params||{},r))}),cz(this.states,"true","1"),cz(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new uz(e,i,this.states))}),this.fallbackTransition=function bwe(n,e,t){return new uz(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function cz(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Twe=new Sy;class Iwe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=$M(this._driver,t,r,[]);if(r.length)throw function Ive(n){return new L(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=jq(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=GM(this._driver,t,s,FM,my,new Map,new Map,r,Twe,i),o.forEach(c=>{const d=Tr(a,c.element,new Map);c.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(function Dve(){return new L(3300,!1)}()),o=[]),i.length)throw function Sve(n){return new L(3504,!1)}();a.forEach((c,d)=>{c.forEach((h,f)=>{c.set(f,this._driver.computeStyle(d,f,Ts))})});const u=_o(o.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Ave(n){return new L(3301,!1)}();return t}listen(e,t,r,i){const s=NM(t,"","","");return MM(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const dz="ng-animate-queued",KM="ng-animate-disabled",Mwe=[],hz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kwe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jr="__ng_removed";class QM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Owe(n){return n??null}(r?e.value:e),r){const s=Ef(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const bf="void",YM=new QM(bf);class Nwe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function xve(n,e){return new L(3302,!1)}();if(null==r||0==r.length)throw function Mve(n){return new L(3303,!1)}();if(!function Fwe(n){return"start"==n||"done"==n}(r))throw function kve(n,e){return new L(3400,!1)}();const s=Tr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Tr(this._engine.statesByElement,e,new Map);return a.has(t)||(Hr(e,_y),Hr(e,_y+"-"+t),a.set(t,YM)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Nve(n){return new L(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new JM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Hr(e,_y),Hr(e,_y+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const u=new QM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=YM),u.value!==bf&&l.value===u.value){if(!function Bwe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,u.params)){const g=[],m=s.matchStyles(l.value,l.params,g),v=s.matchStyles(u.value,u.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Qa(e,m),Bi(e,v)})}return}const h=Tr(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,u.value,e,u.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:u,player:o,isFallbackTransition:p}),p||(Hr(e,dz),o.onStart(()=>{ec(e,dz)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let v=m.indexOf(o);v>=0&&m.splice(v,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,yy,!0);r.forEach(i=>{if(i[jr])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){const c=this.trigger(e,u,bf,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&_o(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,u=r.get(o)||YM,c=new QM(bf),d=new JM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[jr];(!s||s===hz)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Hr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=NM(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,MM(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Rwe{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Nwe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const u=r.indexOf(l);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(My(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!My(t))return;const s=t[jr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Hr(e,KM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ec(e,KM))}removeNode(e,t,r,i){if(My(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[jr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return My(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,yy,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,LM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _o(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[jr];if(t&&t.setForRemoval){if(e[jr]=hz,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(KM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Hr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?_o(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Rve(n){return new L(3402,!1)}()}_flushAnimations(e,t){const r=new Sy,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach($=>{c.add($);const G=this.driver.query($,".ng-animate-queued",!0);for(let X=0;X<G.length;X++)c.add(G[X])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=gz(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach(($,G)=>{const X=FM+g++;p.set(G,X),$.forEach(Se=>Hr(Se,X))});const m=[],v=new Set,C=new Set;for(let $=0;$<this.collectedLeaveElements.length;$++){const G=this.collectedLeaveElements[$],X=G[jr];X&&X.setForRemoval&&(m.push(G),v.add(G),X.hasAnimation?this.driver.query(G,".ng-star-inserted",!0).forEach(Se=>v.add(Se)):C.add(G))}const y=new Map,D=gz(h,Array.from(v));D.forEach(($,G)=>{const X=my+g++;y.set(G,X),$.forEach(Se=>Hr(Se,X))}),e.push(()=>{f.forEach(($,G)=>{const X=p.get(G);$.forEach(Se=>ec(Se,X))}),D.forEach(($,G)=>{const X=y.get(G);$.forEach(Se=>ec(Se,X))}),m.forEach($=>{this.processLeaveNode($)})});const F=[],j=[];for(let $=this._namespaceList.length-1;$>=0;$--)this._namespaceList[$].drainQueuedTransitions(t).forEach(X=>{const Se=X.player,rn=X.element;if(F.push(Se),this.collectedEnterElements.length){const Pn=rn[jr];if(Pn&&Pn.setForMove){if(Pn.previousTriggersValues&&Pn.previousTriggersValues.has(X.triggerName)){const Ja=Pn.previousTriggersValues.get(X.triggerName),Gr=this.statesByElement.get(X.element);if(Gr&&Gr.has(X.triggerName)){const Ry=Gr.get(X.triggerName);Ry.value=Ja,Gr.set(X.triggerName,Ry)}}return void Se.destroy()}}const Ui=!d||!this.driver.containsElement(d,rn),Dr=y.get(rn),wo=p.get(rn),ct=this._buildInstruction(X,r,wo,Dr,Ui);if(ct.errors&&ct.errors.length)return void j.push(ct);if(Ui)return Se.onStart(()=>Qa(rn,ct.fromStyles)),Se.onDestroy(()=>Bi(rn,ct.toStyles)),void i.push(Se);if(X.isFallbackTransition)return Se.onStart(()=>Qa(rn,ct.fromStyles)),Se.onDestroy(()=>Bi(rn,ct.toStyles)),void i.push(Se);const Tz=[];ct.timelines.forEach(Pn=>{Pn.stretchStartingKeyframe=!0,this.disabledNodes.has(Pn.element)||Tz.push(Pn)}),ct.timelines=Tz,r.append(rn,ct.timelines),o.push({instruction:ct,player:Se,element:rn}),ct.queriedElements.forEach(Pn=>Tr(a,Pn,[]).push(Se)),ct.preStyleProps.forEach((Pn,Ja)=>{if(Pn.size){let Gr=l.get(Ja);Gr||l.set(Ja,Gr=new Set),Pn.forEach((Ry,ZM)=>Gr.add(ZM))}}),ct.postStyleProps.forEach((Pn,Ja)=>{let Gr=u.get(Ja);Gr||u.set(Ja,Gr=new Set),Pn.forEach((Ry,ZM)=>Gr.add(ZM))})});if(j.length){const $=[];j.forEach(G=>{$.push(function Pve(n,e){return new L(3505,!1)}())}),F.forEach(G=>G.destroy()),this.reportError($)}const fe=new Map,wt=new Map;o.forEach($=>{const G=$.element;r.has(G)&&(wt.set(G,G),this._beforeAnimationBuild($.player.namespaceId,$.instruction,fe))}),i.forEach($=>{const G=$.element;this._getPreviousPlayers(G,!1,$.namespaceId,$.triggerName,null).forEach(Se=>{Tr(fe,G,[]).push(Se),Se.destroy()})});const wn=m.filter($=>_z($,l,u)),Qn=new Map;pz(Qn,this.driver,C,u,Ts).forEach($=>{_z($,l,u)&&wn.push($)});const Ss=new Map;f.forEach(($,G)=>{pz(Ss,this.driver,new Set($),l,"!")}),wn.forEach($=>{const G=Qn.get($),X=Ss.get($);Qn.set($,new Map([...Array.from(G?.entries()??[]),...Array.from(X?.entries()??[])]))});const hi=[],nc=[],rc={};o.forEach($=>{const{element:G,player:X,instruction:Se}=$;if(r.has(G)){if(c.has(G))return X.onDestroy(()=>Bi(G,Se.toStyles)),X.disabled=!0,X.overrideTotalTime(Se.totalTime),void i.push(X);let rn=rc;if(wt.size>1){let Dr=G;const wo=[];for(;Dr=Dr.parentNode;){const ct=wt.get(Dr);if(ct){rn=ct;break}wo.push(Dr)}wo.forEach(ct=>wt.set(ct,rn))}const Ui=this._buildAnimation(X.namespaceId,Se,fe,s,Ss,Qn);if(X.setRealPlayer(Ui),rn===rc)hi.push(X);else{const Dr=this.playersByElement.get(rn);Dr&&Dr.length&&(X.parentPlayer=_o(Dr)),i.push(X)}}else Qa(G,Se.fromStyles),X.onDestroy(()=>Bi(G,Se.toStyles)),nc.push(X),c.has(G)&&i.push(X)}),nc.forEach($=>{const G=s.get($.element);if(G&&G.length){const X=_o(G);$.setRealPlayer(X)}}),i.forEach($=>{$.parentPlayer?$.syncPlayerEvents($.parentPlayer):$.destroy()});for(let $=0;$<m.length;$++){const G=m[$],X=G[jr];if(ec(G,my),X&&X.hasAnimation)continue;let Se=[];if(a.size){let Ui=a.get(G);Ui&&Ui.length&&Se.push(...Ui);let Dr=this.driver.query(G,LM,!0);for(let wo=0;wo<Dr.length;wo++){let ct=a.get(Dr[wo]);ct&&ct.length&&Se.push(...ct)}}const rn=Se.filter(Ui=>!Ui.destroyed);rn.length?Lwe(this,G,rn):this.processLeaveNode(G)}return m.length=0,hi.forEach($=>{this.players.push($),$.onDone(()=>{$.destroy();const G=this.players.indexOf($);this.players.splice(G,1)}),$.play()}),hi}elementContainsData(e,t){let r=!1;const i=t[jr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==bf;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,c=u!==s,d=Tr(r,u,[]);this._getPreviousPlayers(u,c,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Qa(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,u=[],c=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;c.add(g);const m=g[jr];if(m&&m.removedBeforeQueried)return new Kh(p.duration,p.delay);const v=g!==l,C=function Vwe(n){const e=[];return mz(n,e),e}((r.get(g)||Mwe).map(fe=>fe.getRealPlayer())).filter(fe=>!!fe.element&&fe.element===g),y=s.get(g),D=o.get(g),F=jq(0,this._normalizer,0,p.keyframes,y,D),j=this._buildPlayer(p,F,C);if(p.subTimeline&&i&&d.add(g),v){const fe=new JM(e,a,g);fe.setRealPlayer(j),u.push(fe)}return j});u.forEach(p=>{Tr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Pwe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>Hr(p,Jq));const f=_o(h);return f.onDestroy(()=>{c.forEach(p=>ec(p,Jq)),Bi(l,t.toStyles)}),d.forEach(p=>{Tr(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Kh(e.duration,e.delay)}}class JM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Kh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>MM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Tr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function My(n){return n&&1===n.nodeType}function fz(n,e){const t=n.style.display;return n.style.display=e??"none",t}function pz(n,e,t,r,i){const s=[];t.forEach(l=>s.push(fz(l)));const o=[];r.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const h=e.computeStyle(u,d,i);c.set(d,h),(!h||0==h.length)&&(u[jr]=kwe,o.push(u))}),n.set(u,c)});let a=0;return t.forEach(l=>fz(l,s[a++])),o}function gz(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const u=a.parentNode;return l=t.has(u)?u:i.has(u)?1:o(u),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Hr(n,e){n.classList?.add(e)}function ec(n,e){n.classList?.remove(e)}function Lwe(n,e,t){_o(t).onDone(()=>n.processLeaveNode(e))}function mz(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof DW?mz(r.players,e):e.push(r)}}function _z(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class ky{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Rwe(e,t,r),this._timelineEngine=new Iwe(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],c=$M(this._driver,s,l,[]);if(l.length)throw function bve(n,e){return new L(3404,!1)}();a=function Ewe(n,e,t){return new Cwe(n,e,t)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Hq(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Hq(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $we=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Bi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bi(this._element,this._initialStyles),this._endStyles&&(Bi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qa(this._element,this._endStyles),this._endStyles=null),Bi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function XM(n){let e=null;return n.forEach((t,r)=>{(function jwe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class yz{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:rz(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Hwe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return zq(e,t)}getParentElement(e){return PM(e)}query(e,t,r){return Kq(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const u=new Map,c=o.filter(f=>f instanceof yz);(function zve(n,e){return 0===n||0===e})(r,i)&&c.forEach(f=>{f.currentSnapshot.forEach((p,g)=>u.set(g,p))});let d=function Hve(n){return n.length?n[0]instanceof Map?n:n.map(e=>Xq(e)):[]}(t).map(f=>vo(f));d=function Kve(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,rz(n,a)))}}return e}(e,d,u);const h=function Uwe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=XM(e[0]),e.length>1&&(r=XM(e[e.length-1]))):e instanceof Map&&(t=XM(e)),t||r?new $we(n,t,r):null}(e,d);return new yz(e,d,l,h)}}let Gwe=(()=>{class n extends EW{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:zr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?bW(t):t;return vz(this._renderer,null,r,"register",[i]),new Wwe(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(k(Hc),k(Tt))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();class Wwe extends class Lpe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new qwe(this._id,e,t||{},this._renderer)}}class qwe{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return vz(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function vz(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const wz="@.disabled";let zwe=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let c=this._rendererCache.get(s);return c||(c=new Ez("",s,this.engine),this._rendererCache.set(s,c)),c}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(o,a,t,c.name,c)};return r.data.animation.forEach(l),new Kwe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(k(Hc),k(ky),k(Le))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();class Ez{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==wz?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Kwe extends Ez{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==wz?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Qwe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Ywe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Jwe=(()=>{class n extends ky{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(k(Tt),k(OM),k(qM))},n.\u0275prov=W({token:n,factory:n.\u0275fac}),n})();const Cz=[{provide:EW,useClass:Gwe},{provide:qM,useFactory:function Xwe(){return new _we}},{provide:ky,useClass:Jwe},{provide:Hc,useFactory:function Zwe(n,e,t){return new zwe(n,e,t)},deps:[sg,ky,Le]}],bz=[{provide:OM,useFactory:()=>new Hwe},{provide:UO,useValue:"BrowserAnimations"},...Cz],eEe=[{provide:OM,useClass:Qq},{provide:UO,useValue:"NoopAnimations"},...Cz];let tEe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?eEe:bz}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n}),n.\u0275inj=_t({providers:bz,imports:[YF]}),n})(),nEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ct({type:n,bootstrap:[Ige]}),n.\u0275inj=_t({imports:[YF,Tge,xge,Yl,LW,Doe(()=>Soe(nL_firebase)),eve(()=>tve()),Mpe(()=>Ppe()),oge.forRoot(),tEe]}),n})();(function yY(){tF=!1})(),kX().bootstrapModule(nEe).catch(n=>console.error(n))}},Ge=>{Ge(Ge.s=972)}]);